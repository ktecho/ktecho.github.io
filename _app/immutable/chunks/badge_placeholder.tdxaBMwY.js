import{s as y}from"./scheduler.2vmdsppc.js";import{S as B,i as F}from"./index.eLAHt3dB.js";import{q as P,M as I,ag as U,ah as E,ai as M,ad as j}from"./utils.FkBaGfnY.js";function N(l,s,e){let{userPubkey:b=null}=s,{profile:a=null}=s,{profileFinishedLoading:m=!1}=s,{badgesAwarded:g=[]}=s,{badgesAccepted:d=[]}=s,{profileBadgesLastEvent:c}=s,{badgeDefinitions:o=new Map}=s,{pm_badges:h}=s,{other_badges:_}=s,{externalIdentities:f=[]}=s;function x(t){e(8,f=[]),e(0,a=null),e(1,m=!1),e(2,g=[]),e(3,d=[]),e(5,o=new Map),e(6,h=!1),e(7,_=!1),P([t],(i,w)=>{(a===null||a.created_at<w.created_at)&&(e(0,a=w),e(8,f=[]),I(a.tags,"i").forEach(n=>{const u=n[1]+":"+n[2];f.includes(u)||(f.push(u),e(8,f))}))},async()=>{e(1,m=!0)}),U(t,i=>{(c===null||c.created_at<i.created_at)&&(k(i,!0),e(4,c=i))}),E(t,i=>{k(i,!1)})}function k(t,i){I(t.tags,"a").forEach(w=>{const n=w[1],u=n.split(":"),L=u[2],D=u[1];M(L,D,A=>{const r=Object.fromEntries(A.tags);r.badgeFullName=n,r.eventId=t.id,A.pubkey===j?(r.pm_issued=!0,e(6,h=!0)):(r.pm_issued=!1,e(7,_=!0)),o.get(n)||(i&&(r.accepted=i),o.set(n,r)),i?d.includes(n)||(d.push(n),e(3,d)):g.includes(n)||(g.push(n),e(2,g))})})}return l.$$set=t=>{"userPubkey"in t&&e(9,b=t.userPubkey),"profile"in t&&e(0,a=t.profile),"profileFinishedLoading"in t&&e(1,m=t.profileFinishedLoading),"badgesAwarded"in t&&e(2,g=t.badgesAwarded),"badgesAccepted"in t&&e(3,d=t.badgesAccepted),"profileBadgesLastEvent"in t&&e(4,c=t.profileBadgesLastEvent),"badgeDefinitions"in t&&e(5,o=t.badgeDefinitions),"pm_badges"in t&&e(6,h=t.pm_badges),"other_badges"in t&&e(7,_=t.other_badges),"externalIdentities"in t&&e(8,f=t.externalIdentities)},l.$$.update=()=>{l.$$.dirty&512&&b&&x(b)},[a,m,g,d,c,o,h,_,f,b,x,k]}class O extends B{constructor(s){super(),F(this,s,N,null,y,{userPubkey:9,profile:0,profileFinishedLoading:1,badgesAwarded:2,badgesAccepted:3,profileBadgesLastEvent:4,badgeDefinitions:5,pm_badges:6,other_badges:7,externalIdentities:8,getUserProfileInformation:10,getBadgeDefinition:11})}get getUserProfileInformation(){return this.$$.ctx[10]}get getBadgeDefinition(){return this.$$.ctx[11]}}const T="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M9%2012.75L11.25%2015%2015%209.75m-3-7.036A11.959%2011.959%200%20013.598%206%2011.99%2011.99%200%20003%209.749c0%205.592%203.824%2010.29%209%2011.623%205.176-1.332%209-6.03%209-11.622%200-1.31-.21-2.571-.598-3.751h-.152c-3.196%200-6.1-1.248-8.25-3.285z'%20/%3e%3c/svg%3e";export{O as U,T as b};
