import{s as Q,P as K,Q as z,h as I,d as _,j as c,i as $,z as C,r as S,a as A,e as X,c as U,x as ce,y as ue,f as M,l as Y,g as B,m as H,M as D,n as se,G as oe}from"./scheduler.2vmdsppc.js";import{S as J,i as R,a as g,g as G,c as q,t as w,b as T,d as j,m as N,e as F}from"./index.eLAHt3dB.js";import{e as ee,f as he,aj as te,ak as de,X as O,I as _e}from"./utils.FkBaGfnY.js";import{C as me}from"./Clock.o45-HYqg.js";import{V as pe}from"./VerificationMark.95_-Gkx8.js";import{T as ge,G as ke,a as be}from"./Github.tAPxVNQX.js";function ve(s){let e,t;return{c(){e=K("svg"),t=K("path"),this.h()},l(i){e=z(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var l=I(e);t=z(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),I(t).forEach(_),l.forEach(_),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"stroke-width","2"),c(t,"d","M6 18L18 6M6 6l12 12"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"class","h-6 w-6"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke","currentColor")},m(i,l){$(i,e,l),C(e,t)},p:S,i:S,o:S,d(i){i&&_(e)}}}class fe extends J{constructor(e){super(),R(this,e,null,ve,Q,{})}}function we(s){let e,t,i,l;return{c(){e=K("svg"),t=K("path"),i=K("path"),l=K("path"),this.h()},l(r){e=z(r,"svg",{xmlns:!0,class:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var h=I(e);t=z(h,"path",{stroke:!0,d:!0,fill:!0}),I(t).forEach(_),i=z(h,"path",{d:!0}),I(i).forEach(_),l=z(h,"path",{d:!0}),I(l).forEach(_),h.forEach(_),this.h()},h(){c(t,"stroke","none"),c(t,"d","M0 0h24v24H0z"),c(t,"fill","none"),c(i,"d","M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"),c(l,"d","M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"class","icon icon-tabler icon-tabler-copy"),c(e,"width","24"),c(e,"height","24"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width","2"),c(e,"stroke","currentColor"),c(e,"fill","none"),c(e,"stroke-linecap","round"),c(e,"stroke-linejoin","round")},m(r,h){$(r,e,h),C(e,t),C(e,i),C(e,l)},p:S,i:S,o:S,d(r){r&&_(e)}}}class ye extends J{constructor(e){super(),R(this,e,null,we,Q,{})}}function ie(s,e,t){const i=s.slice();return i[12]=e[t],i}function le(s){let e,t,i,l,r;t=new fe({});function h(){return s[8](s[12])}return{c(){e=M("div"),T(t.$$.fragment),this.h()},l(a){e=B(a,"DIV",{class:!0,"data-tip":!0});var n=I(e);j(t.$$.fragment,n),n.forEach(_),this.h()},h(){c(e,"class","w-5 h-5 mr-4 tooltip tooltip-error"),c(e,"data-tip","Delete this identity from your Nostr Profile")},m(a,n){$(a,e,n),N(t,e,null),i=!0,l||(r=oe(e,"click",h),l=!0)},p(a,n){s=a},i(a){i||(g(t.$$.fragment,a),i=!0)},o(a){w(t.$$.fragment,a),i=!1},d(a){a&&_(e),F(t),l=!1,r()}}}function Ie(s){let e,t;return e=new ge({}),{c(){T(e.$$.fragment)},l(i){j(e.$$.fragment,i)},m(i,l){N(e,i,l),t=!0},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){w(e.$$.fragment,i),t=!1},d(i){F(e,i)}}}function Ee(s){let e,t;return e=new ke({}),{c(){T(e.$$.fragment)},l(i){j(e.$$.fragment,i)},m(i,l){N(e,i,l),t=!0},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){w(e.$$.fragment,i),t=!1},d(i){F(e,i)}}}function $e(s){let e,t;return e=new be({}),{c(){T(e.$$.fragment)},l(i){j(e.$$.fragment,i)},m(i,l){N(e,i,l),t=!0},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){w(e.$$.fragment,i),t=!1},d(i){F(e,i)}}}function re(s){let e,t,i,l,r,h,a;const n=[Pe,Ve,Ce],f=[];function u(o,d){return d&97&&(e=null),d&97&&(t=null),d&97&&(i=null),e==null&&(e=!!(o[5]&&o[6][o[12].split(":")[0]].verified==="waiting"&&!o[6][o[12].split(":")[0]].recently_added)),e?0:(t==null&&(t=!!(o[5]&&o[6][o[12].split(":")[0]].verified==="verified-ok"&&!o[6][o[12].split(":")[0]].recently_added)),t?1:(i==null&&(i=!!(o[5]&&o[6][o[12].split(":")[0]].verified==="verified-notok"&&!o[6][o[12].split(":")[0]].recently_added)),i?2:-1))}return~(l=u(s,-1))&&(r=f[l]=n[l](s)),{c(){r&&r.c(),h=X()},l(o){r&&r.l(o),h=X()},m(o,d){~l&&f[l].m(o,d),$(o,h,d),a=!0},p(o,d){let y=l;l=u(o,d),l!==y&&(r&&(G(),w(f[y],1,1,()=>{f[y]=null}),q()),~l?(r=f[l],r||(r=f[l]=n[l](o),r.c()),g(r,1),r.m(h.parentNode,h)):r=null)},i(o){a||(g(r),a=!0)},o(o){w(r),a=!1},d(o){o&&_(h),~l&&f[l].d(o)}}}function Ce(s){let e,t,i;return t=new fe({}),{c(){e=M("div"),T(t.$$.fragment),this.h()},l(l){e=B(l,"DIV",{class:!0,"data-tip":!0});var r=I(e);j(t.$$.fragment,r),r.forEach(_),this.h()},h(){c(e,"class","w-5 h-5 ml-2 tooltip tooltip-error text-red-500"),c(e,"data-tip","This identity couldn't be verified by Plebeian Market as belonging to this user")},m(l,r){$(l,e,r),N(t,e,null),i=!0},i(l){i||(g(t.$$.fragment,l),i=!0)},o(l){w(t.$$.fragment,l),i=!1},d(l){l&&_(e),F(t)}}}function Ve(s){let e,t,i;return t=new pe({}),{c(){e=M("div"),T(t.$$.fragment),this.h()},l(l){e=B(l,"DIV",{class:!0,"data-tip":!0});var r=I(e);j(t.$$.fragment,r),r.forEach(_),this.h()},h(){c(e,"class","w-5 h-5 mt-1 ml-2 tooltip tooltip-success text-green-500"),c(e,"data-tip","Identity verified by Plebeian Market")},m(l,r){$(l,e,r),N(t,e,null),i=!0},i(l){i||(g(t.$$.fragment,l),i=!0)},o(l){w(t.$$.fragment,l),i=!1},d(l){l&&_(e),F(t)}}}function Pe(s){let e,t,i;return t=new me({}),{c(){e=M("div"),T(t.$$.fragment),this.h()},l(l){e=B(l,"DIV",{class:!0,"data-tip":!0});var r=I(e);j(t.$$.fragment,r),r.forEach(_),this.h()},h(){c(e,"class","w-5 h-5 mt-1 ml-2 tooltip tooltip-warning text-orange-500"),c(e,"data-tip","Verifying identity...")},m(l,r){$(l,e,r),N(t,e,null),i=!0},i(l){i||(g(t.$$.fragment,l),i=!0)},o(l){w(t.$$.fragment,l),i=!1},d(l){l&&_(e),F(t)}}}function ne(s){let e,t,i,l,r,h,a,n,f,u,o=s[12].split(":")[1]+"",d,y,V=s[4].backend_present&&s[6][s[12].split(":")[0]],p,E,b=s[2]&&le(s);const W=[$e,Ee,Ie],L=[];function Z(m,k){return k&1&&(l=null),k&1&&(r=null),k&1&&(h=null),l==null&&(l=m[12].split(":")[0]==="twitter"),l?0:(r==null&&(r=m[12].split(":")[0]==="github"),r?1:(h==null&&(h=m[12].split(":")[0]==="telegram"),h?2:-1))}~(a=Z(s,-1))&&(n=L[a]=W[a](s));let v=V&&re(s);return{c(){e=M("div"),b&&b.c(),t=A(),i=M("a"),n&&n.c(),f=A(),u=M("div"),d=Y(o),y=A(),v&&v.c(),this.h()},l(m){e=B(m,"DIV",{class:!0});var k=I(e);b&&b.l(k),t=U(k),i=B(k,"A",{class:!0,target:!0,href:!0});var P=I(i);n&&n.l(P),f=U(P),u=B(P,"DIV",{class:!0});var x=I(u);d=H(x,o),x.forEach(_),y=U(P),v&&v.l(P),P.forEach(_),k.forEach(_),this.h()},h(){c(u,"class","ml-2"),c(i,"class","flex hover:underline"),c(i,"target","_blank"),c(i,"href",p=te(s[12].split(":")[0],s[12].split(":")[1],s[12].split(":")[2])),D(i,"text-base",s[3]),c(e,"class","flex mt-5"),D(e,"mt-5",!s[3]),D(e,"mt-3",s[3])},m(m,k){$(m,e,k),b&&b.m(e,null),C(e,t),C(e,i),~a&&L[a].m(i,null),C(i,f),C(i,u),C(u,d),C(i,y),v&&v.m(i,null),E=!0},p(m,k){m[2]?b?(b.p(m,k),k&4&&g(b,1)):(b=le(m),b.c(),g(b,1),b.m(e,t)):b&&(G(),w(b,1,1,()=>{b=null}),q());let P=a;a=Z(m,k),a!==P&&(n&&(G(),w(L[P],1,1,()=>{L[P]=null}),q()),~a?(n=L[a],n||(n=L[a]=W[a](m),n.c()),g(n,1),n.m(i,f)):n=null),(!E||k&1)&&o!==(o=m[12].split(":")[1]+"")&&se(d,o),k&81&&(V=m[4].backend_present&&m[6][m[12].split(":")[0]]),V?v?(v.p(m,k),k&81&&g(v,1)):(v=re(m),v.c(),g(v,1),v.m(i,null)):v&&(G(),w(v,1,1,()=>{v=null}),q()),(!E||k&1&&p!==(p=te(m[12].split(":")[0],m[12].split(":")[1],m[12].split(":")[2])))&&c(i,"href",p),(!E||k&8)&&D(i,"text-base",m[3]),(!E||k&8)&&D(e,"mt-5",!m[3]),(!E||k&8)&&D(e,"mt-3",m[3])},i(m){E||(g(b),g(n),g(v),E=!0)},o(m){w(b),w(n),w(v),E=!1},d(m){m&&_(e),b&&b.d(),~a&&L[a].d(),v&&v.d()}}}function ae(s){let e,t,i,l,r,h,a,n;function f(d,y){return d[3]?De:Me}let u=f(s),o=u(s);return r=new ye({}),{c(){e=M("div"),t=M("p"),o.c(),i=A(),l=M("button"),T(r.$$.fragment),this.h()},l(d){e=B(d,"DIV",{class:!0});var y=I(e);t=B(y,"P",{class:!0});var V=I(t);o.l(V),i=U(V),l=B(V,"BUTTON",{class:!0});var p=I(l);j(r.$$.fragment,p),p.forEach(_),V.forEach(_),y.forEach(_),this.h()},h(){c(l,"class","btn btn-square btn-xs ml-1 mt-2"),c(t,"class","text-ellipsis overflow-hidden mx-auto"),c(e,"class","flex mt-6 mb-4 w-11/12 lg:w-8/12"),D(e,"text-lg",!s[3]),D(e,"text-xs",s[3])},m(d,y){$(d,e,y),C(e,t),o.m(t,null),C(t,i),C(t,l),N(r,l,null),h=!0,a||(n=oe(l,"click",s[9]),a=!0)},p(d,y){u===(u=f(d))&&o?o.p(d,y):(o.d(1),o=u(d),o&&(o.c(),o.m(t,i))),(!h||y&8)&&D(e,"text-lg",!d[3]),(!h||y&8)&&D(e,"text-xs",d[3])},i(d){h||(g(r.$$.fragment,d),h=!0)},o(d){w(r.$$.fragment,d),h=!1},d(d){d&&_(e),o.d(),F(r),a=!1,n()}}}function De(s){let e;return{c(){e=Y("Check that this identities match the external ones by clicking on each link and searching for the npub of the user.")},l(t){e=H(t,"Check that this identities match the external ones by clicking on each link and searching for the npub of the user.")},m(t,i){$(t,e,i)},p:S,d(t){t&&_(e)}}}function Me(s){let e,t=O(s[1])+"",i;return{c(){e=Y("You can check that this identities match the external ones by clicking on each link and searching for "),i=Y(t)},l(l){e=H(l,"You can check that this identities match the external ones by clicking on each link and searching for "),i=H(l,t)},m(l,r){$(l,e,r),$(l,i,r)},p(l,r){r&2&&t!==(t=O(l[1])+"")&&se(i,t)},d(l){l&&(_(e),_(i))}}}function Be(s){let e,t,i,l=ee(s[0]),r=[];for(let n=0;n<l.length;n+=1)r[n]=ne(ie(s,l,n));const h=n=>w(r[n],1,1,()=>{r[n]=null});let a=!s[3]&&(!s[4].backend_present||!s[5])&&ae(s);return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=A(),a&&a.c(),t=X()},l(n){for(let f=0;f<r.length;f+=1)r[f].l(n);e=U(n),a&&a.l(n),t=X()},m(n,f){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(n,f);$(n,e,f),a&&a.m(n,f),$(n,t,f),i=!0},p(n,[f]){if(f&125){l=ee(n[0]);let u;for(u=0;u<l.length;u+=1){const o=ie(n,l,u);r[u]?(r[u].p(o,f),g(r[u],1)):(r[u]=ne(o),r[u].c(),g(r[u],1),r[u].m(e.parentNode,e))}for(G(),u=l.length;u<r.length;u+=1)h(u);q()}!n[3]&&(!n[4].backend_present||!n[5])?a?(a.p(n,f),f&56&&g(a,1)):(a=ae(n),a.c(),g(a,1),a.m(t.parentNode,t)):a&&(G(),w(a,1,1,()=>{a=null}),q())},i(n){if(!i){for(let f=0;f<l.length;f+=1)g(r[f]);g(a),i=!0}},o(n){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)w(r[f]);w(a),i=!1},d(n){n&&(_(e),_(t)),ce(r,n),a&&a.d(n)}}}function Te(s,e,t){let i,l,r;ue(s,he,p=>t(4,r=p));let{profileFinishedLoading:h=!1}=e,{externalIdentities:a}=e,{nostrPublicKey:n}=e,{deleteIdentity:f=!1}=e,{compact:u=!1}=e;const o=["twitter","github","telegram"];async function d(){if(r.backend_present){if(a.length===0)return;t(6,i={twitter:{verified:"waiting"},github:{verified:"waiting"},telegram:{verified:"waiting"}});const p=await de(n)??[];p?(p.forEach(E=>{t(6,i[E.split(":")[0]].verified="verified-ok",i),t(6,i[E.split(":")[0]].recently_added=!1,i)}),o.forEach(E=>{i[E].verified!=="verified-ok"&&t(6,i[E].verified="verified-notok",i)})):t(5,l=!1)}else t(5,l=!1)}const y=p=>{f(p)},V=()=>{navigator.clipboard.writeText(O(n)),_e.set("Public key copied to clipboard.")};return s.$$set=p=>{"profileFinishedLoading"in p&&t(7,h=p.profileFinishedLoading),"externalIdentities"in p&&t(0,a=p.externalIdentities),"nostrPublicKey"in p&&t(1,n=p.nostrPublicKey),"deleteIdentity"in p&&t(2,f=p.deleteIdentity),"compact"in p&&t(3,u=p.compact)},s.$$.update=()=>{s.$$.dirty&144&&r.backend_present&&h&&d()},t(6,i={}),t(5,l=!0),[a,n,f,u,r,l,i,h,y,V]}class ze extends J{constructor(e){super(),R(this,e,Te,Be,Q,{profileFinishedLoading:7,externalIdentities:0,nostrPublicKey:1,deleteIdentity:2,compact:3})}}export{ye as C,ze as S};
