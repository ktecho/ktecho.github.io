import{v as d,s as Y,e as U,i as b,r as N,d as _,y as q,f as y,l as m,a as w,g as k,h as A,m as p,c as v,j as g,z as h,n as C}from"./scheduler.2vmdsppc.js";import{S as z,i as H}from"./index.eLAHt3dB.js";import{ae as T,i as S,af as O}from"./utils.FkBaGfnY.js";class F{async getValue(e){var t=await fetch(this.getUrl(e),{method:"GET"}),l=await t.json();return this.parseResponse(l,e)}}class J extends F{constructor(){super()}static get Instance(){return this._instance||(this._instance=new this)}getUrl(e){return`https://api.binance.com/api/v3/avgPrice?symbol=BTC${e==="USD"?e+"T":e}`}parseResponse(e,t){return e.price}}class K extends F{constructor(){super()}static get Instance(){return this._instance||(this._instance=new this)}getUrl(e){return`https://api.coinbase.com/v2/prices/spot?currency=${e}`}parseResponse(e,t){return e.data.amount}}class L extends F{constructor(){super()}static get Instance(){return this._instance||(this._instance=new this)}getUrl(e){return`https://api.kraken.com/0/public/Ticker?pair=XBT${e}`}parseResponse(e,t){return e.result[`XXBTZ${t}`].c[0]}}const M={binance:J.Instance,coinbase:K.Instance,kraken:L.Instance};async function Z(s="kraken",e="USD"){return await M[s.toLowerCase()].getValue(e.toUpperCase())}const Q=1e3*60*10,W=[{symbol:"SAT",name:"Bitcoin (Satoshis)",prefix:"",suffix:" sat"},{symbol:"USD",name:"US Dollar",prefix:"$",suffix:""},{symbol:"EUR",name:"Euro",prefix:"",suffix:" €"},{symbol:"GBP",name:"GBP",prefix:"£",suffix:""},{symbol:"JPY",name:"Yen",prefix:"¥",suffix:""},{symbol:"CAD",name:"Canadian Dollar",prefix:"C$",suffix:""}];function x(s){return W.find(e=>e.symbol===s)}async function B(s){if(s=E(s),!s||s==="SAT")return;let e=d(T),t=e.get(s);if(!t||t&&t.fetched_at<Date.now()-Q){const l=await Z("kraken",s);t?(t.rate=l,t.fetched_at=Date.now()):e.set(s,{rate:l,fetched_at:Date.now()}),T.set(d(T))}}function E(s){return["sat","SAT","sats","SATS"].includes(s)?"SAT":s}async function $(s,e){let t,l;if(e=E(e),e==="SAT")t=s;else{await B(e);const f=d(T).get(e).rate;t=s*O/f}if(e===d(S))return{sourceAmount:s,sourceCurrency:e,amount:s,currency:d(S),sats:Number(D(t,"SAT"))};if(d(S)==="SAT")l=t;else{await B(d(S));const f=d(T).get(d(S)).rate;l=t*f/O}return{sourceAmount:s,sourceCurrency:e,amount:Number(D(l)),currency:d(S),sats:Number(D(t,"SAT"))}}function D(s,e=d(S)){return e&&e==="SAT"?s.toFixed(0):(isNaN(s)||(s>1?s=s.toFixed(2):s>99?s=s.toFixed(0):s=s.toFixed(4)),s)}function ee(s){let e,t,l,f,n,i;return{c(){e=y("p"),t=m(s[0]),l=w(),f=m(s[1]),n=w(),i=y("span"),this.h()},l(a){e=k(a,"P",{});var r=A(e);t=p(r,s[0]),l=v(r),f=p(r,s[1]),n=v(r),i=k(r,"SPAN",{class:!0}),A(i).forEach(_),r.forEach(_),this.h()},h(){g(i,"class","loading loading-bars w-6")},m(a,r){b(a,e,r),h(e,t),h(e,l),h(e,f),h(e,n),h(e,i)},p(a,r){r&1&&C(t,a[0]),r&2&&C(f,a[1])},d(a){a&&_(e)}}}function te(s){let e,t,l,f,n,i=!s[4]&&E(s[6])!=="SAT",a=i&&G(s);return{c(){e=y("div"),t=y("p"),l=m(s[8]),f=m(" sat"),n=w(),a&&a.c(),this.h()},l(r){e=k(r,"DIV",{});var c=A(e);t=k(c,"P",{class:!0});var o=A(t);l=p(o,s[8]),f=p(o," sat"),o.forEach(_),n=v(c),a&&a.l(c),c.forEach(_),this.h()},h(){g(t,"class",s[2])},m(r,c){b(r,e,c),h(e,t),h(t,l),h(t,f),h(e,n),a&&a.m(e,null)},p(r,c){c&256&&C(l,r[8]),c&4&&g(t,"class",r[2]),c&80&&(i=!r[4]&&E(r[6])!=="SAT"),i?a?a.p(r,c):(a=G(r),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(r){r&&_(e),a&&a.d()}}}function se(s){let e,t,l,f;return{c(){e=y("p"),t=m(s[0]),l=w(),f=m(s[1])},l(n){e=k(n,"P",{});var i=A(e);t=p(i,s[0]),l=v(i),f=p(i,s[1]),i.forEach(_)},m(n,i){b(n,e,i),h(e,t),h(e,l),h(e,f)},p(n,i){i&1&&C(t,n[0]),i&2&&C(f,n[1])},d(n){n&&_(e)}}}function ne(s){let e,t,l,f;return{c(){e=y("p"),t=m(s[0]),l=w(),f=m(s[1]),this.h()},l(n){e=k(n,"P",{class:!0});var i=A(e);t=p(i,s[0]),l=v(i),f=p(i,s[1]),i.forEach(_),this.h()},h(){g(e,"class","text-sm")},m(n,i){b(n,e,i),h(e,t),h(e,l),h(e,f)},p(n,i){i&1&&C(t,n[0]),i&2&&C(f,n[1])},d(n){n&&_(e)}}}function G(s){let e,t=s[10].prefix+"",l,f,n=s[10].suffix+"",i,a=s[5]&&V(),r=s[5]&&X();return{c(){e=y("p"),a&&a.c(),l=m(t),f=m(s[9]),i=m(n),r&&r.c(),this.h()},l(c){e=k(c,"P",{class:!0});var o=A(e);a&&a.l(o),l=p(o,t),f=p(o,s[9]),i=p(o,n),r&&r.l(o),o.forEach(_),this.h()},h(){g(e,"class",s[3])},m(c,o){b(c,e,o),a&&a.m(e,null),h(e,l),h(e,f),h(e,i),r&&r.m(e,null)},p(c,o){c[5]?a||(a=V(),a.c(),a.m(e,l)):a&&(a.d(1),a=null),o&1024&&t!==(t=c[10].prefix+"")&&C(l,t),o&512&&C(f,c[9]),o&1024&&n!==(n=c[10].suffix+"")&&C(i,n),c[5]?r||(r=X(),r.c(),r.m(e,null)):r&&(r.d(1),r=null),o&8&&g(e,"class",c[3])},d(c){c&&_(e),a&&a.d(),r&&r.d()}}}function V(s){let e;return{c(){e=m("(")},l(t){e=p(t,"(")},m(t,l){b(t,e,l)},d(t){t&&_(e)}}}function X(s){let e;return{c(){e=m(")")},l(t){e=p(t,")")},m(t,l){b(t,e,l)},d(t){t&&_(e)}}}function ae(s){let e;function t(n,i){return!n[0]||!n[1]?ne:!n[6]||!n[10]?se:n[7]?te:ee}let l=t(s),f=l(s);return{c(){f.c(),e=U()},l(n){f.l(n),e=U()},m(n,i){f.m(n,i),b(n,e,i)},p(n,[i]){l===(l=t(n))&&f?f.p(n,i):(f.d(1),f=l(n),f&&(f.c(),f.m(e.parentNode,e)))},i:N,o:N,d(n){n&&_(e),f.d(n)}}}function ie(s,e,t){let l,f,n,i;q(s,S,u=>t(6,i=u));let{amount:a}=e,{sourceCurrency:r}=e,{satsClassStyle:c=""}=e,{fiatClassStyle:o="text-xs"}=e,{showOnlySats:I=!1}=e,{parenthesisOnFiat:P=!0}=e,R=!1;async function j(){t(7,R=!1),t(10,l=x(i));const u=await $(a,r);u&&(t(9,f=u.amount),t(8,n=u.sats),t(7,R=!0))}return s.$$set=u=>{"amount"in u&&t(0,a=u.amount),"sourceCurrency"in u&&t(1,r=u.sourceCurrency),"satsClassStyle"in u&&t(2,c=u.satsClassStyle),"fiatClassStyle"in u&&t(3,o=u.fiatClassStyle),"showOnlySats"in u&&t(4,I=u.showOnlySats),"parenthesisOnFiat"in u&&t(5,P=u.parenthesisOnFiat)},s.$$.update=()=>{s.$$.dirty&67&&a&&r&&i&&j()},t(10,l=null),t(9,f=null),t(8,n=null),[a,r,c,o,I,P,i,R,n,f,l]}class ce extends z{constructor(e){super(),H(this,e,ie,ae,Y,{amount:0,sourceCurrency:1,satsClassStyle:2,fiatClassStyle:3,showOnlySats:4,parenthesisOnFiat:5})}}export{ce as C,Z as a,x as b,$ as c,B as g,D as r,W as s};
