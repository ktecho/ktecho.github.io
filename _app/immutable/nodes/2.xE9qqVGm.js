import{s as me,e as T,U as Fa,d as _,z as M,r as $,f as C,g as v,j as b,i as x,x as se,a as I,c as F,V as Ra,W as lr,h as O,y as we,o as qn,F as ue,X as za,M as je,l as ee,m as te,n as Le,G as ct,I as tu,k as Sn,p as Dr,Y as Tr,O as or,P as Ou,Q as Iu,Z as Ur,_ as Nr,$ as nu,T as Uf,S as Jf,K as Ct,A as Kf,R as Fu,J as Gf}from"../chunks/scheduler.2vmdsppc.js";import{S as Ee,i as Ae,a as D,g as J,c as K,t as R,b as Z,d as Q,m as Y,e as X,o as Or}from"../chunks/index.eLAHt3dB.js";import{p as Zf}from"../chunks/stores._GSMfgpH.js";import{e as j,H as Qf,x as Ir,D as Fr,f as Vn,J as $t,K as Pa,L as Ru,F as sr,G as ar,M as Yf,O as Jr}from"../chunks/utils.FkBaGfnY.js";import{g as Ba,C as La,S as Rr}from"../chunks/Product.Bi7yVyUB.js";import{P as Xf}from"../chunks/ProductCardBrowser.iBw0bK18.js";import{g as cr,A as ru,a as qa,s as ed,p as He}from"../chunks/AdminActions.I174XZwO.js";import{r as td,p as rn}from"../chunks/shopping.HYDPEdxb.js";import{S as Va}from"../chunks/Store.CEFXwr6Z.js";import{w as Ft}from"../chunks/singletons.PqOxICUJ.js";import{C as nd}from"../chunks/CurrencyConverter.JjeTDkRk.js";import{P as iu}from"../chunks/Minus.b0sP7xD2.js";import{_ as rd}from"../chunks/preload-helper.0HuHagjb.js";function zu(r,e,t){const n=r.slice();return n[16]=e[t],n}function Pu(r,e,t){const n=r.slice();return n[16]=e[t],n}function Bu(r,e,t){const n=r.slice();return n[21]=e[t],n}function Lu(r,e,t){const n=r.slice();return n[24]=e[t],n}function qu(r,e,t){const n=r.slice();return n[27]=e[t],n}function Vu(r,e,t){const n=r.slice();return n[16]=e[t],n}function $u(r,e,t){const n=r.slice();return n[41]=e[t],n}function Hu(r,e,t){const n=r.slice();return n[44]=e[t],n}function ju(r,e,t){const n=r.slice();return n[47]=e[t],n}function Wu(r,e,t){const n=r.slice();return n[16]=e[t],n}function Uu(r,e,t){const n=r.slice();return n[32]=e[t],n}function Ju(r,e,t){const n=r.slice();return n[16]=e[t],n}function Ku(r,e,t){const n=r.slice();return n[32]=e[t],n}function Gu(r,e,t){const n=r.slice();return n[50]=e[t],n}function Zu(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{name:!0,content:!0}),this.h()},h(){b(e,"name","robots"),b(e,"content",t=""+(r[0]+r[11]))},m(n,i){x(n,e,i)},p(n,i){i[0]&2049&&t!==(t=""+(n[0]+n[11]))&&b(e,"content",t)},d(n){n&&_(e)}}}function Qu(r){let e;return{c(){e=C("meta"),this.h()},l(t){e=v(t,"META",{name:!0,content:!0}),this.h()},h(){b(e,"name","description"),b(e,"content",r[1])},m(t,n){x(t,e,n)},p(t,n){n[0]&2&&b(e,"content",t[1])},d(t){t&&_(e)}}}function Yu(r){let e;return{c(){e=C("link"),this.h()},l(t){e=v(t,"LINK",{rel:!0,href:!0}),this.h()},h(){b(e,"rel","canonical"),b(e,"href",r[7])},m(t,n){x(t,e,n)},p(t,n){n[0]&128&&b(e,"href",t[7])},d(t){t&&_(e)}}}function Xu(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{name:!0,content:!0}),this.h()},h(){b(e,"name","keywords"),b(e,"content",t=r[8].join(", "))},m(n,i){x(n,e,i)},p(n,i){i[0]&256&&t!==(t=n[8].join(", "))&&b(e,"content",t)},d(n){n&&_(e)}}}function el(r){let e,t,n;return{c(){e=C("link"),this.h()},l(i){e=v(i,"LINK",{rel:!0,media:!0,href:!0}),this.h()},h(){b(e,"rel","alternate"),b(e,"media",t=r[2].media),b(e,"href",n=r[2].href)},m(i,u){x(i,e,u)},p(i,u){u[0]&4&&t!==(t=i[2].media)&&b(e,"media",t),u[0]&4&&n!==(n=i[2].href)&&b(e,"href",n)},d(i){i&&_(e)}}}function tl(r){let e,t=j(r[3]),n=[];for(let i=0;i<t.length;i+=1)n[i]=nl(Gu(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&8){t=j(i[3]);let l;for(l=0;l<t.length;l+=1){const o=Gu(i,t,l);n[l]?n[l].p(o,u):(n[l]=nl(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function nl(r){let e,t,n;return{c(){e=C("link"),this.h()},l(i){e=v(i,"LINK",{rel:!0,hreflang:!0,href:!0}),this.h()},h(){b(e,"rel","alternate"),b(e,"hreflang",t=r[50].hrefLang),b(e,"href",n=r[50].href)},m(i,u){x(i,e,u)},p(i,u){u[0]&8&&t!==(t=i[50].hrefLang)&&b(e,"hreflang",t),u[0]&8&&n!==(n=i[50].href)&&b(e,"href",n)},d(i){i&&_(e)}}}function rl(r){let e,t,n,i,u,l,o,s=r[4].cardType&&il(r),a=r[4].site&&ul(r),c=r[4].handle&&ll(r),f=r[4].title&&ol(r),d=r[4].description&&sl(r),h=r[4].image&&al(r),p=r[4].imageAlt&&cl(r);return{c(){s&&s.c(),e=I(),a&&a.c(),t=I(),c&&c.c(),n=I(),f&&f.c(),i=I(),d&&d.c(),u=I(),h&&h.c(),l=I(),p&&p.c(),o=T()},l(m){s&&s.l(m),e=F(m),a&&a.l(m),t=F(m),c&&c.l(m),n=F(m),f&&f.l(m),i=F(m),d&&d.l(m),u=F(m),h&&h.l(m),l=F(m),p&&p.l(m),o=T()},m(m,g){s&&s.m(m,g),x(m,e,g),a&&a.m(m,g),x(m,t,g),c&&c.m(m,g),x(m,n,g),f&&f.m(m,g),x(m,i,g),d&&d.m(m,g),x(m,u,g),h&&h.m(m,g),x(m,l,g),p&&p.m(m,g),x(m,o,g)},p(m,g){m[4].cardType?s?s.p(m,g):(s=il(m),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),m[4].site?a?a.p(m,g):(a=ul(m),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),m[4].handle?c?c.p(m,g):(c=ll(m),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null),m[4].title?f?f.p(m,g):(f=ol(m),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null),m[4].description?d?d.p(m,g):(d=sl(m),d.c(),d.m(u.parentNode,u)):d&&(d.d(1),d=null),m[4].image?h?h.p(m,g):(h=al(m),h.c(),h.m(l.parentNode,l)):h&&(h.d(1),h=null),m[4].imageAlt?p?p.p(m,g):(p=cl(m),p.c(),p.m(o.parentNode,o)):p&&(p.d(1),p=null)},d(m){m&&(_(e),_(t),_(n),_(i),_(u),_(l),_(o)),s&&s.d(m),a&&a.d(m),c&&c.d(m),f&&f.d(m),d&&d.d(m),h&&h.d(m),p&&p.d(m)}}}function il(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{name:!0,content:!0}),this.h()},h(){b(e,"name","twitter:card"),b(e,"content",t=r[4].cardType)},m(n,i){x(n,e,i)},p(n,i){i[0]&16&&t!==(t=n[4].cardType)&&b(e,"content",t)},d(n){n&&_(e)}}}function ul(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{name:!0,content:!0}),this.h()},h(){b(e,"name","twitter:site"),b(e,"content",t=r[4].site)},m(n,i){x(n,e,i)},p(n,i){i[0]&16&&t!==(t=n[4].site)&&b(e,"content",t)},d(n){n&&_(e)}}}function ll(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{name:!0,content:!0}),this.h()},h(){b(e,"name","twitter:creator"),b(e,"content",t=r[4].handle)},m(n,i){x(n,e,i)},p(n,i){i[0]&16&&t!==(t=n[4].handle)&&b(e,"content",t)},d(n){n&&_(e)}}}function ol(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{name:!0,content:!0}),this.h()},h(){b(e,"name","twitter:title"),b(e,"content",t=r[4].title)},m(n,i){x(n,e,i)},p(n,i){i[0]&16&&t!==(t=n[4].title)&&b(e,"content",t)},d(n){n&&_(e)}}}function sl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{name:!0,content:!0}),this.h()},h(){b(e,"name","twitter:description"),b(e,"content",t=r[4].description)},m(n,i){x(n,e,i)},p(n,i){i[0]&16&&t!==(t=n[4].description)&&b(e,"content",t)},d(n){n&&_(e)}}}function al(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{name:!0,content:!0}),this.h()},h(){b(e,"name","twitter:image"),b(e,"content",t=r[4].image)},m(n,i){x(n,e,i)},p(n,i){i[0]&16&&t!==(t=n[4].image)&&b(e,"content",t)},d(n){n&&_(e)}}}function cl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{name:!0,content:!0}),this.h()},h(){b(e,"name","twitter:image:alt"),b(e,"content",t=r[4].imageAlt)},m(n,i){x(n,e,i)},p(n,i){i[0]&16&&t!==(t=n[4].imageAlt)&&b(e,"content",t)},d(n){n&&_(e)}}}function fl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","fb:app_id"),b(e,"content",t=r[5].appId)},m(n,i){x(n,e,i)},p(n,i){i[0]&32&&t!==(t=n[5].appId)&&b(e,"content",t)},d(n){n&&_(e)}}}function dl(r){let e,t,n,i,u,l,o,s,a,c=(r[6].url||r[7])&&hl(r),f=r[6].type&&pl(r),d=(r[6].title||r[12])&&Ul(r),h=(r[6].description||r[1])&&Jl(r),p=r[6].images&&r[6].images.length&&Kl(r),m=r[6].videos&&r[6].videos.length&&to(r),g=r[6].audio&&r[6].audio.length&&oo(r),y=r[6].locale&&fo(r),w=r[6].siteName&&ho(r);return{c(){c&&c.c(),e=I(),f&&f.c(),t=I(),d&&d.c(),n=I(),h&&h.c(),i=I(),p&&p.c(),u=I(),m&&m.c(),l=I(),g&&g.c(),o=I(),y&&y.c(),s=I(),w&&w.c(),a=T()},l(k){c&&c.l(k),e=F(k),f&&f.l(k),t=F(k),d&&d.l(k),n=F(k),h&&h.l(k),i=F(k),p&&p.l(k),u=F(k),m&&m.l(k),l=F(k),g&&g.l(k),o=F(k),y&&y.l(k),s=F(k),w&&w.l(k),a=T()},m(k,S){c&&c.m(k,S),x(k,e,S),f&&f.m(k,S),x(k,t,S),d&&d.m(k,S),x(k,n,S),h&&h.m(k,S),x(k,i,S),p&&p.m(k,S),x(k,u,S),m&&m.m(k,S),x(k,l,S),g&&g.m(k,S),x(k,o,S),y&&y.m(k,S),x(k,s,S),w&&w.m(k,S),x(k,a,S)},p(k,S){k[6].url||k[7]?c?c.p(k,S):(c=hl(k),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),k[6].type?f?f.p(k,S):(f=pl(k),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),k[6].title||k[12]?d?d.p(k,S):(d=Ul(k),d.c(),d.m(n.parentNode,n)):d&&(d.d(1),d=null),k[6].description||k[1]?h?h.p(k,S):(h=Jl(k),h.c(),h.m(i.parentNode,i)):h&&(h.d(1),h=null),k[6].images&&k[6].images.length?p?p.p(k,S):(p=Kl(k),p.c(),p.m(u.parentNode,u)):p&&(p.d(1),p=null),k[6].videos&&k[6].videos.length?m?m.p(k,S):(m=to(k),m.c(),m.m(l.parentNode,l)):m&&(m.d(1),m=null),k[6].audio&&k[6].audio.length?g?g.p(k,S):(g=oo(k),g.c(),g.m(o.parentNode,o)):g&&(g.d(1),g=null),k[6].locale?y?y.p(k,S):(y=fo(k),y.c(),y.m(s.parentNode,s)):y&&(y.d(1),y=null),k[6].siteName?w?w.p(k,S):(w=ho(k),w.c(),w.m(a.parentNode,a)):w&&(w.d(1),w=null)},d(k){k&&(_(e),_(t),_(n),_(i),_(u),_(l),_(o),_(s),_(a)),c&&c.d(k),f&&f.d(k),d&&d.d(k),h&&h.d(k),p&&p.d(k),m&&m.d(k),g&&g.d(k),y&&y.d(k),w&&w.d(k)}}}function hl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:url"),b(e,"content",t=r[6].url||r[7])},m(n,i){x(n,e,i)},p(n,i){i[0]&192&&t!==(t=n[6].url||n[7])&&b(e,"content",t)},d(n){n&&_(e)}}}function pl(r){let e,t,n,i,u,l,o,s;function a(d,h){if(h[0]&64&&(i=null),h[0]&64&&(u=null),h[0]&64&&(l=null),h[0]&64&&(o=null),i==null&&(i=!!(d[6].type.toLowerCase()==="profile"&&d[6].profile)),i)return od;if(u==null&&(u=!!(d[6].type.toLowerCase()==="book"&&d[6].book)),u)return ld;if(l==null&&(l=!!(d[6].type.toLowerCase()==="article"&&d[6].article)),l)return ud;if(o==null&&(o=!!(d[6].type.toLowerCase()==="video.movie"||d[6].type.toLowerCase()==="video.episode"||d[6].type.toLowerCase()==="video.tv_show"||d[6].type.toLowerCase()==="video.other"&&d[6].video)),o)return id}let c=a(r,[-1,-1]),f=c&&c(r);return{c(){e=C("meta"),n=I(),f&&f.c(),s=T(),this.h()},l(d){e=v(d,"META",{property:!0,content:!0}),n=F(d),f&&f.l(d),s=T(),this.h()},h(){b(e,"property","og:type"),b(e,"content",t=r[6].type.toLowerCase())},m(d,h){x(d,e,h),x(d,n,h),f&&f.m(d,h),x(d,s,h)},p(d,h){h[0]&64&&t!==(t=d[6].type.toLowerCase())&&b(e,"content",t),c===(c=a(d,h))&&f?f.p(d,h):(f&&f.d(1),f=c&&c(d),f&&(f.c(),f.m(s.parentNode,s)))},d(d){d&&(_(e),_(n),_(s)),f&&f.d(d)}}}function id(r){let e,t,n,i,u,l,o,s=r[6].video?.actors&&r[6].video.actors.length&&ml(r),a=r[6].video?.directors&&r[6].video.directors.length&&kl(r),c=r[6].video?.writers&&r[6].video.writers.length&&xl(r),f=r[6].video?.duration&&Cl(r),d=r[6].video?.releaseDate&&vl(r),h=r[6].video?.tags&&r[6].video.tags.length&&Sl(r),p=r[6].video?.series&&Al(r);return{c(){s&&s.c(),e=I(),a&&a.c(),t=I(),c&&c.c(),n=I(),f&&f.c(),i=I(),d&&d.c(),u=I(),h&&h.c(),l=I(),p&&p.c(),o=T()},l(m){s&&s.l(m),e=F(m),a&&a.l(m),t=F(m),c&&c.l(m),n=F(m),f&&f.l(m),i=F(m),d&&d.l(m),u=F(m),h&&h.l(m),l=F(m),p&&p.l(m),o=T()},m(m,g){s&&s.m(m,g),x(m,e,g),a&&a.m(m,g),x(m,t,g),c&&c.m(m,g),x(m,n,g),f&&f.m(m,g),x(m,i,g),d&&d.m(m,g),x(m,u,g),h&&h.m(m,g),x(m,l,g),p&&p.m(m,g),x(m,o,g)},p(m,g){m[6].video?.actors&&m[6].video.actors.length?s?s.p(m,g):(s=ml(m),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),m[6].video?.directors&&m[6].video.directors.length?a?a.p(m,g):(a=kl(m),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),m[6].video?.writers&&m[6].video.writers.length?c?c.p(m,g):(c=xl(m),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null),m[6].video?.duration?f?f.p(m,g):(f=Cl(m),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null),m[6].video?.releaseDate?d?d.p(m,g):(d=vl(m),d.c(),d.m(u.parentNode,u)):d&&(d.d(1),d=null),m[6].video?.tags&&m[6].video.tags.length?h?h.p(m,g):(h=Sl(m),h.c(),h.m(l.parentNode,l)):h&&(h.d(1),h=null),m[6].video?.series?p?p.p(m,g):(p=Al(m),p.c(),p.m(o.parentNode,o)):p&&(p.d(1),p=null)},d(m){m&&(_(e),_(t),_(n),_(i),_(u),_(l),_(o)),s&&s.d(m),a&&a.d(m),c&&c.d(m),f&&f.d(m),d&&d.d(m),h&&h.d(m),p&&p.d(m)}}}function ud(r){let e,t,n,i,u,l,o=r[6].article.publishedTime&&Ml(r),s=r[6].article.modifiedTime&&Dl(r),a=r[6].article.expirationTime&&Tl(r),c=r[6].article.authors&&r[6].article.authors.length&&Nl(r),f=r[6].article.section&&Il(r),d=r[6].article.tags&&r[6].article.tags.length&&Fl(r);return{c(){o&&o.c(),e=I(),s&&s.c(),t=I(),a&&a.c(),n=I(),c&&c.c(),i=I(),f&&f.c(),u=I(),d&&d.c(),l=T()},l(h){o&&o.l(h),e=F(h),s&&s.l(h),t=F(h),a&&a.l(h),n=F(h),c&&c.l(h),i=F(h),f&&f.l(h),u=F(h),d&&d.l(h),l=T()},m(h,p){o&&o.m(h,p),x(h,e,p),s&&s.m(h,p),x(h,t,p),a&&a.m(h,p),x(h,n,p),c&&c.m(h,p),x(h,i,p),f&&f.m(h,p),x(h,u,p),d&&d.m(h,p),x(h,l,p)},p(h,p){h[6].article.publishedTime?o?o.p(h,p):(o=Ml(h),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),h[6].article.modifiedTime?s?s.p(h,p):(s=Dl(h),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),h[6].article.expirationTime?a?a.p(h,p):(a=Tl(h),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),h[6].article.authors&&h[6].article.authors.length?c?c.p(h,p):(c=Nl(h),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null),h[6].article.section?f?f.p(h,p):(f=Il(h),f.c(),f.m(u.parentNode,u)):f&&(f.d(1),f=null),h[6].article.tags&&h[6].article.tags.length?d?d.p(h,p):(d=Fl(h),d.c(),d.m(l.parentNode,l)):d&&(d.d(1),d=null)},d(h){h&&(_(e),_(t),_(n),_(i),_(u),_(l)),o&&o.d(h),s&&s.d(h),a&&a.d(h),c&&c.d(h),f&&f.d(h),d&&d.d(h)}}}function ld(r){let e,t,n,i,u=r[6].book.authors&&r[6].book.authors.length&&zl(r),l=r[6].book.isbn&&Bl(r),o=r[6].book.releaseDate&&Ll(r),s=r[6].book.tags&&r[6].book.tags.length&&ql(r);return{c(){u&&u.c(),e=I(),l&&l.c(),t=I(),o&&o.c(),n=I(),s&&s.c(),i=T()},l(a){u&&u.l(a),e=F(a),l&&l.l(a),t=F(a),o&&o.l(a),n=F(a),s&&s.l(a),i=T()},m(a,c){u&&u.m(a,c),x(a,e,c),l&&l.m(a,c),x(a,t,c),o&&o.m(a,c),x(a,n,c),s&&s.m(a,c),x(a,i,c)},p(a,c){a[6].book.authors&&a[6].book.authors.length?u?u.p(a,c):(u=zl(a),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null),a[6].book.isbn?l?l.p(a,c):(l=Bl(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),a[6].book.releaseDate?o?o.p(a,c):(o=Ll(a),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null),a[6].book.tags&&a[6].book.tags.length?s?s.p(a,c):(s=ql(a),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(a){a&&(_(e),_(t),_(n),_(i)),u&&u.d(a),l&&l.d(a),o&&o.d(a),s&&s.d(a)}}}function od(r){let e,t,n,i,u=r[6].profile.firstName&&$l(r),l=r[6].profile.lastName&&Hl(r),o=r[6].profile.username&&jl(r),s=r[6].profile.gender&&Wl(r);return{c(){u&&u.c(),e=I(),l&&l.c(),t=I(),o&&o.c(),n=I(),s&&s.c(),i=T()},l(a){u&&u.l(a),e=F(a),l&&l.l(a),t=F(a),o&&o.l(a),n=F(a),s&&s.l(a),i=T()},m(a,c){u&&u.m(a,c),x(a,e,c),l&&l.m(a,c),x(a,t,c),o&&o.m(a,c),x(a,n,c),s&&s.m(a,c),x(a,i,c)},p(a,c){a[6].profile.firstName?u?u.p(a,c):(u=$l(a),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null),a[6].profile.lastName?l?l.p(a,c):(l=Hl(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),a[6].profile.username?o?o.p(a,c):(o=jl(a),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null),a[6].profile.gender?s?s.p(a,c):(s=Wl(a),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(a){a&&(_(e),_(t),_(n),_(i)),u&&u.d(a),l&&l.d(a),o&&o.d(a),s&&s.d(a)}}}function ml(r){let e,t=j(r[6].video.actors),n=[];for(let i=0;i<t.length;i+=1)n[i]=_l(ju(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&64){t=j(i[6].video.actors);let l;for(l=0;l<t.length;l+=1){const o=ju(i,t,l);n[l]?n[l].p(o,u):(n[l]=_l(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function gl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","video:actor"),b(e,"content",t=r[47].profile)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[47].profile)&&b(e,"content",t)},d(n){n&&_(e)}}}function bl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","video:actor:role"),b(e,"content",t=r[47].role)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[47].role)&&b(e,"content",t)},d(n){n&&_(e)}}}function _l(r){let e,t,n=r[47].profile&&gl(r),i=r[47].role&&bl(r);return{c(){n&&n.c(),e=I(),i&&i.c(),t=T()},l(u){n&&n.l(u),e=F(u),i&&i.l(u),t=T()},m(u,l){n&&n.m(u,l),x(u,e,l),i&&i.m(u,l),x(u,t,l)},p(u,l){u[47].profile?n?n.p(u,l):(n=gl(u),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),u[47].role?i?i.p(u,l):(i=bl(u),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(u){u&&(_(e),_(t)),n&&n.d(u),i&&i.d(u)}}}function kl(r){let e,t=j(r[6].video.directors),n=[];for(let i=0;i<t.length;i+=1)n[i]=yl(Hu(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&64){t=j(i[6].video.directors);let l;for(l=0;l<t.length;l+=1){const o=Hu(i,t,l);n[l]?n[l].p(o,u):(n[l]=yl(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function yl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","video:director"),b(e,"content",t=r[44])},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[44])&&b(e,"content",t)},d(n){n&&_(e)}}}function xl(r){let e,t=j(r[6].video.writers),n=[];for(let i=0;i<t.length;i+=1)n[i]=wl($u(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&64){t=j(i[6].video.writers);let l;for(l=0;l<t.length;l+=1){const o=$u(i,t,l);n[l]?n[l].p(o,u):(n[l]=wl(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function wl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","video:writer"),b(e,"content",t=r[41])},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[41])&&b(e,"content",t)},d(n){n&&_(e)}}}function Cl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","video:duration"),b(e,"content",t=r[6].video.duration.toString())},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].video.duration.toString())&&b(e,"content",t)},d(n){n&&_(e)}}}function vl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","video:release_date"),b(e,"content",t=r[6].video.releaseDate)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].video.releaseDate)&&b(e,"content",t)},d(n){n&&_(e)}}}function Sl(r){let e,t=j(r[6].video.tags),n=[];for(let i=0;i<t.length;i+=1)n[i]=El(Vu(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&64){t=j(i[6].video.tags);let l;for(l=0;l<t.length;l+=1){const o=Vu(i,t,l);n[l]?n[l].p(o,u):(n[l]=El(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function El(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","video:tag"),b(e,"content",t=r[16])},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[16])&&b(e,"content",t)},d(n){n&&_(e)}}}function Al(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","video:series"),b(e,"content",t=r[6].video.series)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].video.series)&&b(e,"content",t)},d(n){n&&_(e)}}}function Ml(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","article:published_time"),b(e,"content",t=r[6].article.publishedTime)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].article.publishedTime)&&b(e,"content",t)},d(n){n&&_(e)}}}function Dl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","article:modified_time"),b(e,"content",t=r[6].article.modifiedTime)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].article.modifiedTime)&&b(e,"content",t)},d(n){n&&_(e)}}}function Tl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","article:expiration_time"),b(e,"content",t=r[6].article.expirationTime)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].article.expirationTime)&&b(e,"content",t)},d(n){n&&_(e)}}}function Nl(r){let e,t=j(r[6].article.authors),n=[];for(let i=0;i<t.length;i+=1)n[i]=Ol(Uu(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&64){t=j(i[6].article.authors);let l;for(l=0;l<t.length;l+=1){const o=Uu(i,t,l);n[l]?n[l].p(o,u):(n[l]=Ol(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function Ol(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","article:author"),b(e,"content",t=r[32])},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[32])&&b(e,"content",t)},d(n){n&&_(e)}}}function Il(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","article:section"),b(e,"content",t=r[6].article.section)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].article.section)&&b(e,"content",t)},d(n){n&&_(e)}}}function Fl(r){let e,t=j(r[6].article.tags),n=[];for(let i=0;i<t.length;i+=1)n[i]=Rl(Wu(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&64){t=j(i[6].article.tags);let l;for(l=0;l<t.length;l+=1){const o=Wu(i,t,l);n[l]?n[l].p(o,u):(n[l]=Rl(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function Rl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","article:tag"),b(e,"content",t=r[16])},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[16])&&b(e,"content",t)},d(n){n&&_(e)}}}function zl(r){let e,t=j(r[6].book.authors),n=[];for(let i=0;i<t.length;i+=1)n[i]=Pl(Ku(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&64){t=j(i[6].book.authors);let l;for(l=0;l<t.length;l+=1){const o=Ku(i,t,l);n[l]?n[l].p(o,u):(n[l]=Pl(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function Pl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","book:author"),b(e,"content",t=r[32])},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[32])&&b(e,"content",t)},d(n){n&&_(e)}}}function Bl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","book:isbn"),b(e,"content",t=r[6].book.isbn)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].book.isbn)&&b(e,"content",t)},d(n){n&&_(e)}}}function Ll(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","book:release_date"),b(e,"content",t=r[6].book.releaseDate)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].book.releaseDate)&&b(e,"content",t)},d(n){n&&_(e)}}}function ql(r){let e,t=j(r[6].book.tags),n=[];for(let i=0;i<t.length;i+=1)n[i]=Vl(Ju(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&64){t=j(i[6].book.tags);let l;for(l=0;l<t.length;l+=1){const o=Ju(i,t,l);n[l]?n[l].p(o,u):(n[l]=Vl(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function Vl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","book:tag"),b(e,"content",t=r[16])},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[16])&&b(e,"content",t)},d(n){n&&_(e)}}}function $l(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","profile:first_name"),b(e,"content",t=r[6].profile.firstName)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].profile.firstName)&&b(e,"content",t)},d(n){n&&_(e)}}}function Hl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","profile:last_name"),b(e,"content",t=r[6].profile.lastName)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].profile.lastName)&&b(e,"content",t)},d(n){n&&_(e)}}}function jl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","profile:username"),b(e,"content",t=r[6].profile.username)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].profile.username)&&b(e,"content",t)},d(n){n&&_(e)}}}function Wl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","profile:gender"),b(e,"content",t=r[6].profile.gender)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].profile.gender)&&b(e,"content",t)},d(n){n&&_(e)}}}function Ul(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:title"),b(e,"content",t=r[6].title||r[12])},m(n,i){x(n,e,i)},p(n,i){i[0]&4160&&t!==(t=n[6].title||n[12])&&b(e,"content",t)},d(n){n&&_(e)}}}function Jl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:description"),b(e,"content",t=r[6].description||r[1])},m(n,i){x(n,e,i)},p(n,i){i[0]&66&&t!==(t=n[6].description||n[1])&&b(e,"content",t)},d(n){n&&_(e)}}}function Kl(r){let e,t=j(r[6].images),n=[];for(let i=0;i<t.length;i+=1)n[i]=eo(qu(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&64){t=j(i[6].images);let l;for(l=0;l<t.length;l+=1){const o=qu(i,t,l);n[l]?n[l].p(o,u):(n[l]=eo(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function Gl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:image:alt"),b(e,"content",t=r[27].alt)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[27].alt)&&b(e,"content",t)},d(n){n&&_(e)}}}function Zl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:image:width"),b(e,"content",t=r[27].width.toString())},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[27].width.toString())&&b(e,"content",t)},d(n){n&&_(e)}}}function Ql(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:image:height"),b(e,"content",t=r[27].height.toString())},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[27].height.toString())&&b(e,"content",t)},d(n){n&&_(e)}}}function Yl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:image:secure_url"),b(e,"content",t=r[27].secureUrl.toString())},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[27].secureUrl.toString())&&b(e,"content",t)},d(n){n&&_(e)}}}function Xl(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:image:type"),b(e,"content",t=r[27].type.toString())},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[27].type.toString())&&b(e,"content",t)},d(n){n&&_(e)}}}function eo(r){let e,t,n,i,u,l,o,s,a=r[27].alt&&Gl(r),c=r[27].width&&Zl(r),f=r[27].height&&Ql(r),d=r[27].secureUrl&&Yl(r),h=r[27].type&&Xl(r);return{c(){e=C("meta"),n=I(),a&&a.c(),i=I(),c&&c.c(),u=I(),f&&f.c(),l=I(),d&&d.c(),o=I(),h&&h.c(),s=T(),this.h()},l(p){e=v(p,"META",{property:!0,content:!0}),n=F(p),a&&a.l(p),i=F(p),c&&c.l(p),u=F(p),f&&f.l(p),l=F(p),d&&d.l(p),o=F(p),h&&h.l(p),s=T(),this.h()},h(){b(e,"property","og:image"),b(e,"content",t=r[27].url)},m(p,m){x(p,e,m),x(p,n,m),a&&a.m(p,m),x(p,i,m),c&&c.m(p,m),x(p,u,m),f&&f.m(p,m),x(p,l,m),d&&d.m(p,m),x(p,o,m),h&&h.m(p,m),x(p,s,m)},p(p,m){m[0]&64&&t!==(t=p[27].url)&&b(e,"content",t),p[27].alt?a?a.p(p,m):(a=Gl(p),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null),p[27].width?c?c.p(p,m):(c=Zl(p),c.c(),c.m(u.parentNode,u)):c&&(c.d(1),c=null),p[27].height?f?f.p(p,m):(f=Ql(p),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),p[27].secureUrl?d?d.p(p,m):(d=Yl(p),d.c(),d.m(o.parentNode,o)):d&&(d.d(1),d=null),p[27].type?h?h.p(p,m):(h=Xl(p),h.c(),h.m(s.parentNode,s)):h&&(h.d(1),h=null)},d(p){p&&(_(e),_(n),_(i),_(u),_(l),_(o),_(s)),a&&a.d(p),c&&c.d(p),f&&f.d(p),d&&d.d(p),h&&h.d(p)}}}function to(r){let e,t=j(r[6].videos),n=[];for(let i=0;i<t.length;i+=1)n[i]=lo(Lu(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&64){t=j(i[6].videos);let l;for(l=0;l<t.length;l+=1){const o=Lu(i,t,l);n[l]?n[l].p(o,u):(n[l]=lo(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function no(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:video:width"),b(e,"content",t=r[24].width.toString())},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[24].width.toString())&&b(e,"content",t)},d(n){n&&_(e)}}}function ro(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:video:height"),b(e,"content",t=r[24].height.toString())},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[24].height.toString())&&b(e,"content",t)},d(n){n&&_(e)}}}function io(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:video:secure_url"),b(e,"content",t=r[24].secureUrl.toString())},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[24].secureUrl.toString())&&b(e,"content",t)},d(n){n&&_(e)}}}function uo(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:video:type"),b(e,"content",t=r[24].type.toString())},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[24].type.toString())&&b(e,"content",t)},d(n){n&&_(e)}}}function lo(r){let e,t,n,i,u,l,o,s=r[24].width&&no(r),a=r[24].height&&ro(r),c=r[24].secureUrl&&io(r),f=r[24].type&&uo(r);return{c(){e=C("meta"),n=I(),s&&s.c(),i=I(),a&&a.c(),u=I(),c&&c.c(),l=I(),f&&f.c(),o=T(),this.h()},l(d){e=v(d,"META",{property:!0,content:!0}),n=F(d),s&&s.l(d),i=F(d),a&&a.l(d),u=F(d),c&&c.l(d),l=F(d),f&&f.l(d),o=T(),this.h()},h(){b(e,"property","og:video"),b(e,"content",t=r[24].url)},m(d,h){x(d,e,h),x(d,n,h),s&&s.m(d,h),x(d,i,h),a&&a.m(d,h),x(d,u,h),c&&c.m(d,h),x(d,l,h),f&&f.m(d,h),x(d,o,h)},p(d,h){h[0]&64&&t!==(t=d[24].url)&&b(e,"content",t),d[24].width?s?s.p(d,h):(s=no(d),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null),d[24].height?a?a.p(d,h):(a=ro(d),a.c(),a.m(u.parentNode,u)):a&&(a.d(1),a=null),d[24].secureUrl?c?c.p(d,h):(c=io(d),c.c(),c.m(l.parentNode,l)):c&&(c.d(1),c=null),d[24].type?f?f.p(d,h):(f=uo(d),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},d(d){d&&(_(e),_(n),_(i),_(u),_(l),_(o)),s&&s.d(d),a&&a.d(d),c&&c.d(d),f&&f.d(d)}}}function oo(r){let e,t=j(r[6].audio),n=[];for(let i=0;i<t.length;i+=1)n[i]=co(Bu(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&64){t=j(i[6].audio);let l;for(l=0;l<t.length;l+=1){const o=Bu(i,t,l);n[l]?n[l].p(o,u):(n[l]=co(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function so(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:audio:secure_url"),b(e,"content",t=r[21].secureUrl.toString())},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[21].secureUrl.toString())&&b(e,"content",t)},d(n){n&&_(e)}}}function ao(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:audio:type"),b(e,"content",t=r[21].type.toString())},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[21].type.toString())&&b(e,"content",t)},d(n){n&&_(e)}}}function co(r){let e,t,n,i,u,l=r[21].secureUrl&&so(r),o=r[21].type&&ao(r);return{c(){e=C("meta"),n=I(),l&&l.c(),i=I(),o&&o.c(),u=T(),this.h()},l(s){e=v(s,"META",{property:!0,content:!0}),n=F(s),l&&l.l(s),i=F(s),o&&o.l(s),u=T(),this.h()},h(){b(e,"property","og:audio"),b(e,"content",t=r[21].url)},m(s,a){x(s,e,a),x(s,n,a),l&&l.m(s,a),x(s,i,a),o&&o.m(s,a),x(s,u,a)},p(s,a){a[0]&64&&t!==(t=s[21].url)&&b(e,"content",t),s[21].secureUrl?l?l.p(s,a):(l=so(s),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null),s[21].type?o?o.p(s,a):(o=ao(s),o.c(),o.m(u.parentNode,u)):o&&(o.d(1),o=null)},d(s){s&&(_(e),_(n),_(i),_(u)),l&&l.d(s),o&&o.d(s)}}}function fo(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:locale"),b(e,"content",t=r[6].locale)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].locale)&&b(e,"content",t)},d(n){n&&_(e)}}}function ho(r){let e,t;return{c(){e=C("meta"),this.h()},l(n){e=v(n,"META",{property:!0,content:!0}),this.h()},h(){b(e,"property","og:site_name"),b(e,"content",t=r[6].siteName)},m(n,i){x(n,e,i)},p(n,i){i[0]&64&&t!==(t=n[6].siteName)&&b(e,"content",t)},d(n){n&&_(e)}}}function po(r){let e,t=j(r[9]),n=[];for(let i=0;i<t.length;i+=1)n[i]=mo(Pu(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&512){t=j(i[9]);let l;for(l=0;l<t.length;l+=1){const o=Pu(i,t,l);n[l]?n[l].p(o,u):(n[l]=mo(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function mo(r){let e,t=[r[16]],n={};for(let i=0;i<t.length;i+=1)n=Ra(n,t[i]);return{c(){e=C("meta"),this.h()},l(i){e=v(i,"META",{}),this.h()},h(){lr(e,n)},m(i,u){x(i,e,u)},p(i,u){lr(e,n=Ba(t,[u[0]&512&&i[16]]))},d(i){i&&_(e)}}}function go(r){let e,t=j(r[10]),n=[];for(let i=0;i<t.length;i+=1)n[i]=bo(zu(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=T()},l(i){for(let u=0;u<n.length;u+=1)n[u].l(i);e=T()},m(i,u){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(i,u);x(i,e,u)},p(i,u){if(u[0]&1024){t=j(i[10]);let l;for(l=0;l<t.length;l+=1){const o=zu(i,t,l);n[l]?n[l].p(o,u):(n[l]=bo(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&_(e),se(n,i)}}}function bo(r){let e,t=[r[16]],n={};for(let i=0;i<t.length;i+=1)n=Ra(n,t[i]);return{c(){e=C("link"),this.h()},l(i){e=v(i,"LINK",{}),this.h()},h(){lr(e,n)},m(i,u){x(i,e,u)},p(i,u){lr(e,n=Ba(t,[u[0]&1024&&i[16]]))},d(i){i&&_(e)}}}function sd(r){let e,t,n,i,u,l,o,s,a,c,f=r[9]&&Array.isArray(r[9]),d,h;document.title=e=r[12];let p=r[0]!==!1&&Zu(r),m=r[1]&&Qu(r),g=r[7]&&Yu(r),y=r[8]?.length&&Xu(r),w=r[2]&&el(r),k=r[3]&&r[3].length>0&&tl(r),S=r[4]&&rl(r),E=r[5]&&fl(r),z=r[6]&&dl(r),P=f&&po(r),V=r[10]?.length&&go(r);return{c(){p&&p.c(),t=T(),m&&m.c(),n=T(),g&&g.c(),i=T(),y&&y.c(),u=T(),w&&w.c(),l=T(),k&&k.c(),o=T(),S&&S.c(),s=T(),E&&E.c(),a=T(),z&&z.c(),c=T(),P&&P.c(),d=T(),V&&V.c(),h=T()},l(A){const L=Fa("svelte-1g6k17e",document.head);p&&p.l(L),t=T(),m&&m.l(L),n=T(),g&&g.l(L),i=T(),y&&y.l(L),u=T(),w&&w.l(L),l=T(),k&&k.l(L),o=T(),S&&S.l(L),s=T(),E&&E.l(L),a=T(),z&&z.l(L),c=T(),P&&P.l(L),d=T(),V&&V.l(L),h=T(),L.forEach(_)},m(A,L){p&&p.m(document.head,null),M(document.head,t),m&&m.m(document.head,null),M(document.head,n),g&&g.m(document.head,null),M(document.head,i),y&&y.m(document.head,null),M(document.head,u),w&&w.m(document.head,null),M(document.head,l),k&&k.m(document.head,null),M(document.head,o),S&&S.m(document.head,null),M(document.head,s),E&&E.m(document.head,null),M(document.head,a),z&&z.m(document.head,null),M(document.head,c),P&&P.m(document.head,null),M(document.head,d),V&&V.m(document.head,null),M(document.head,h)},p(A,L){L[0]&4096&&e!==(e=A[12])&&(document.title=e),A[0]!==!1?p?p.p(A,L):(p=Zu(A),p.c(),p.m(t.parentNode,t)):p&&(p.d(1),p=null),A[1]?m?m.p(A,L):(m=Qu(A),m.c(),m.m(n.parentNode,n)):m&&(m.d(1),m=null),A[7]?g?g.p(A,L):(g=Yu(A),g.c(),g.m(i.parentNode,i)):g&&(g.d(1),g=null),A[8]?.length?y?y.p(A,L):(y=Xu(A),y.c(),y.m(u.parentNode,u)):y&&(y.d(1),y=null),A[2]?w?w.p(A,L):(w=el(A),w.c(),w.m(l.parentNode,l)):w&&(w.d(1),w=null),A[3]&&A[3].length>0?k?k.p(A,L):(k=tl(A),k.c(),k.m(o.parentNode,o)):k&&(k.d(1),k=null),A[4]?S?S.p(A,L):(S=rl(A),S.c(),S.m(s.parentNode,s)):S&&(S.d(1),S=null),A[5]?E?E.p(A,L):(E=fl(A),E.c(),E.m(a.parentNode,a)):E&&(E.d(1),E=null),A[6]?z?z.p(A,L):(z=dl(A),z.c(),z.m(c.parentNode,c)):z&&(z.d(1),z=null),L[0]&512&&(f=A[9]&&Array.isArray(A[9])),f?P?P.p(A,L):(P=po(A),P.c(),P.m(d.parentNode,d)):P&&(P.d(1),P=null),A[10]?.length?V?V.p(A,L):(V=go(A),V.c(),V.m(h.parentNode,h)):V&&(V.d(1),V=null)},i:$,o:$,d(A){p&&p.d(A),_(t),m&&m.d(A),_(n),g&&g.d(A),_(i),y&&y.d(A),_(u),w&&w.d(A),_(l),k&&k.d(A),_(o),S&&S.d(A),_(s),E&&E.d(A),_(a),z&&z.d(A),_(c),P&&P.d(A),_(d),V&&V.d(A),_(h)}}}function ad(r,e,t){let n,{title:i=""}=e,{titleTemplate:u=""}=e,{robots:l="index,follow"}=e,{additionalRobotsProps:o=void 0}=e,{description:s=void 0}=e,{mobileAlternate:a=void 0}=e,{languageAlternates:c=void 0}=e,{twitter:f=void 0}=e,{facebook:d=void 0}=e,{openGraph:h=void 0}=e,{canonical:p=void 0}=e,{keywords:m=void 0}=e,{additionalMetaTags:g=void 0}=e,{additionalLinkTags:y=void 0}=e,w="";if(o){const{nosnippet:k,maxSnippet:S,maxImagePreview:E,maxVideoPreview:z,noarchive:P,noimageindex:V,notranslate:A,unavailableAfter:L}=o;w=`${k?",nosnippet":""}${S?`,max-snippet:${S}`:""}${E?`,max-image-preview:${E}`:""}${P?",noarchive":""}${L?`,unavailable_after:${L}`:""}${V?",noimageindex":""}${z?`,max-video-preview:${z}`:""}${A?",notranslate":""}`}return r.$$set=k=>{"title"in k&&t(13,i=k.title),"titleTemplate"in k&&t(14,u=k.titleTemplate),"robots"in k&&t(0,l=k.robots),"additionalRobotsProps"in k&&t(15,o=k.additionalRobotsProps),"description"in k&&t(1,s=k.description),"mobileAlternate"in k&&t(2,a=k.mobileAlternate),"languageAlternates"in k&&t(3,c=k.languageAlternates),"twitter"in k&&t(4,f=k.twitter),"facebook"in k&&t(5,d=k.facebook),"openGraph"in k&&t(6,h=k.openGraph),"canonical"in k&&t(7,p=k.canonical),"keywords"in k&&t(8,m=k.keywords),"additionalMetaTags"in k&&t(9,g=k.additionalMetaTags),"additionalLinkTags"in k&&t(10,y=k.additionalLinkTags)},r.$$.update=()=>{r.$$.dirty[0]&24576&&t(12,n=u?i&&u.replace(/%s/g,i):i),r.$$.dirty[0]&32769&&!l&&o&&console.warn("additionalRobotsProps cannot be used when robots is set to false")},[l,s,a,c,f,d,h,p,m,g,y,w,n,i,u,o]}class cd extends Ee{constructor(e){super(),Ae(this,e,ad,sd,me,{title:13,titleTemplate:14,robots:0,additionalRobotsProps:15,description:1,mobileAlternate:2,languageAlternates:3,twitter:4,facebook:5,openGraph:6,canonical:7,keywords:8,additionalMetaTags:9,additionalLinkTags:10},null,[-1,-1])}}function _o(r,e,t){const n=r.slice();return n[7]=e[t],n}function ko(r){let e,t,n,i,u,l,o,s,a,c,f,d,h,p,m;l=new Va({});let g=r[2].stalls[r[7]].name&&yo(r),y=r[2].stalls[r[7]].description&&xo(r),w=r[3]&&r[4]&&Co(r);return{c(){e=C("a"),t=C("div"),n=C("div"),i=C("div"),u=C("div"),Z(l.$$.fragment),o=I(),s=C("h3"),g&&g.c(),a=I(),c=C("p"),y&&y.c(),h=I(),w&&w.c(),this.h()},l(k){e=v(k,"A",{href:!0});var S=O(e);t=v(S,"DIV",{class:!0});var E=O(t);n=v(E,"DIV",{class:!0});var z=O(n);i=v(z,"DIV",{class:!0});var P=O(i);u=v(P,"DIV",{class:!0});var V=O(u);Q(l.$$.fragment,V),V.forEach(_),o=F(P),s=v(P,"H3",{class:!0});var A=O(s);g&&g.l(A),A.forEach(_),a=F(P),c=v(P,"P",{class:!0,"data-tip":!0});var L=O(c);y&&y.l(L),L.forEach(_),P.forEach(_),h=F(z),w&&w.l(z),z.forEach(_),E.forEach(_),S.forEach(_),this.h()},h(){b(u,"class","float-left h-7 w-7 mr-3"),b(s,"class","text-lg font-semibold"),b(c,"class",f="mt-2 lg:mt-3 text-gray-600 dark:text-gray-400 "+(r[2].stalls[r[7]].description&&r[2].stalls[r[7]].description.length>_t?"tooltip tooltip-primary text-left":"")),b(c,"data-tip",d=r[2].stalls[r[7]].description&&r[2].stalls[r[7]].description.length>_t?r[2].stalls[r[7]].description:""),b(i,"class","cursor-pointer"),b(n,"class","p-4 md:p-8"),je(n,"md:pb-2",r[3]),b(t,"class","h-full bg-white dark:bg-black rounded-lg shadow-md"),b(e,"href",p="/p/"+r[2].stalls[r[7]].merchantPubkey+"/stall/"+r[2].stalls[r[7]].id)},m(k,S){x(k,e,S),M(e,t),M(t,n),M(n,i),M(i,u),Y(l,u,null),M(i,o),M(i,s),g&&g.m(s,null),M(i,a),M(i,c),y&&y.m(c,null),M(n,h),w&&w.m(n,null),m=!0},p(k,S){k[2].stalls[k[7]].name?g?g.p(k,S):(g=yo(k),g.c(),g.m(s,null)):g&&(g.d(1),g=null),k[2].stalls[k[7]].description?y?y.p(k,S):(y=xo(k),y.c(),y.m(c,null)):y&&(y.d(1),y=null),(!m||S&7&&f!==(f="mt-2 lg:mt-3 text-gray-600 dark:text-gray-400 "+(k[2].stalls[k[7]].description&&k[2].stalls[k[7]].description.length>_t?"tooltip tooltip-primary text-left":"")))&&b(c,"class",f),(!m||S&7&&d!==(d=k[2].stalls[k[7]].description&&k[2].stalls[k[7]].description.length>_t?k[2].stalls[k[7]].description:""))&&b(c,"data-tip",d),k[3]&&k[4]?w?(w.p(k,S),S&24&&D(w,1)):(w=Co(k),w.c(),D(w,1),w.m(n,null)):w&&(J(),R(w,1,1,()=>{w=null}),K()),(!m||S&8)&&je(n,"md:pb-2",k[3]),(!m||S&7&&p!==(p="/p/"+k[2].stalls[k[7]].merchantPubkey+"/stall/"+k[2].stalls[k[7]].id))&&b(e,"href",p)},i(k){m||(D(l.$$.fragment,k),D(w),m=!0)},o(k){R(l.$$.fragment,k),R(w),m=!1},d(k){k&&_(e),X(l),g&&g.d(),y&&y.d(),w&&w.d()}}}function yo(r){let e=r[2].stalls[r[7]].name+"",t;return{c(){t=ee(e)},l(n){t=te(n,e)},m(n,i){x(n,t,i)},p(n,i){i&7&&e!==(e=n[2].stalls[n[7]].name+"")&&Le(t,e)},d(n){n&&_(t)}}}function xo(r){let e=r[2].stalls[r[7]].description.substring(0,_t)+"",t,n,i=r[2].stalls[r[7]].description.length>_t&&wo();return{c(){t=ee(e),i&&i.c(),n=T()},l(u){t=te(u,e),i&&i.l(u),n=T()},m(u,l){x(u,t,l),i&&i.m(u,l),x(u,n,l)},p(u,l){l&7&&e!==(e=u[2].stalls[u[7]].description.substring(0,_t)+"")&&Le(t,e),u[2].stalls[u[7]].description.length>_t?i||(i=wo(),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(u){u&&(_(t),_(n)),i&&i.d(u)}}}function wo(r){let e;return{c(){e=ee("...")},l(t){e=te(t,"...")},m(t,n){x(t,e,n)},d(t){t&&_(e)}}}function Co(r){let e,t,n,i,u,l;return n=new ru({props:{itemId:r[7],entityName:"stalls"}}),{c(){e=C("a"),t=C("div"),Z(n.$$.fragment),this.h()},l(o){e=v(o,"A",{href:!0});var s=O(e);t=v(s,"DIV",{class:!0});var a=O(t);Q(n.$$.fragment,a),a.forEach(_),s.forEach(_),this.h()},h(){b(t,"class","p-0 md:p-4 md:pb-0 cursor-default"),b(e,"href",null)},m(o,s){x(o,e,s),M(e,t),Y(n,t,null),i=!0,u||(l=ct(e,"click",tu(r[6])),u=!0)},p(o,s){const a={};s&3&&(a.itemId=o[7]),n.$set(a)},i(o){i||(D(n.$$.fragment,o),i=!0)},o(o){R(n.$$.fragment,o),i=!1},d(o){o&&_(e),X(n),u=!1,l()}}}function vo(r){let e,t,n=r[2].stalls[r[7]]&&ko(r);return{c(){n&&n.c(),e=T()},l(i){n&&n.l(i),e=T()},m(i,u){n&&n.m(i,u),x(i,e,u),t=!0},p(i,u){i[2].stalls[i[7]]?n?(n.p(i,u),u&7&&D(n,1)):(n=ko(i),n.c(),D(n,1),n.m(e.parentNode,e)):n&&(J(),R(n,1,1,()=>{n=null}),K())},i(i){t||(D(n),t=!0)},o(i){R(n),t=!1},d(i){i&&_(e),n&&n.d(i)}}}function So(r){let e,t,n,i,u,l,o,s,a="Create your stall here!",c,f,d="Do you want to sell or auction your own products? Create your stall now!",h;return l=new Va({}),{c(){e=C("div"),t=C("div"),n=C("a"),i=C("div"),u=C("div"),Z(l.$$.fragment),o=I(),s=C("h3"),s.textContent=a,c=I(),f=C("p"),f.textContent=d,this.h()},l(p){e=v(p,"DIV",{class:!0});var m=O(e);t=v(m,"DIV",{class:!0});var g=O(t);n=v(g,"A",{href:!0});var y=O(n);i=v(y,"DIV",{class:!0});var w=O(i);u=v(w,"DIV",{class:!0});var k=O(u);Q(l.$$.fragment,k),k.forEach(_),o=F(w),s=v(w,"H3",{class:!0,"data-svelte-h":!0}),ue(s)!=="svelte-1te500j"&&(s.textContent=a),c=F(w),f=v(w,"P",{class:!0,"data-svelte-h":!0}),ue(f)!=="svelte-6lwzrw"&&(f.textContent=d),w.forEach(_),y.forEach(_),g.forEach(_),m.forEach(_),this.h()},h(){b(u,"class","float-left h-7 w-7 mr-3"),b(s,"class","text-lg font-semibold"),b(f,"class","mt-2 lg:mt-3 text-gray-600 dark:text-gray-400"),b(i,"class","cursor-pointer"),b(n,"href","/admin"),b(t,"class","p-4 md:p-8"),b(e,"class","bg-white dark:bg-black rounded-lg shadow-md")},m(p,m){x(p,e,m),M(e,t),M(t,n),M(n,i),M(i,u),Y(l,u,null),M(i,o),M(i,s),M(i,c),M(i,f),h=!0},i(p){h||(D(l.$$.fragment,p),h=!0)},o(p){R(l.$$.fragment,p),h=!1},d(p){p&&_(e),X(l)}}}function fd(r){let e,t,n,i,u=j(cr(r[0],r[1],"stalls")),l=[];for(let a=0;a<u.length;a+=1)l[a]=vo(_o(r,u,a));const o=a=>R(l[a],1,1,()=>{l[a]=null});let s=r[5].backend_present&&So();return{c(){e=C("main"),t=C("div");for(let a=0;a<l.length;a+=1)l[a].c();n=I(),s&&s.c(),this.h()},l(a){e=v(a,"MAIN",{class:!0});var c=O(e);t=v(c,"DIV",{class:!0});var f=O(t);for(let d=0;d<l.length;d+=1)l[d].l(f);n=F(f),s&&s.l(f),f.forEach(_),c.forEach(_),this.h()},h(){b(t,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-8 lg:gap-8 z-[300] mt-2 mb-2"),b(e,"class","p-4 md:container mx-auto pt-0")},m(a,c){x(a,e,c),M(e,t);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(t,null);M(t,n),s&&s.m(t,null),i=!0},p(a,[c]){if(c&31){u=j(cr(a[0],a[1],"stalls"));let f;for(f=0;f<u.length;f+=1){const d=_o(a,u,f);l[f]?(l[f].p(d,c),D(l[f],1)):(l[f]=vo(d),l[f].c(),D(l[f],1),l[f].m(t,n))}for(J(),f=u.length;f<l.length;f+=1)o(f);K()}a[5].backend_present?s?c&32&&D(s,1):(s=So(),s.c(),D(s,1),s.m(t,null)):s&&(J(),R(s,1,1,()=>{s=null}),K())},i(a){if(!i){for(let c=0;c<u.length;c+=1)D(l[c]);D(s),i=!0}},o(a){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)R(l[c]);R(s),i=!1},d(a){a&&_(e),se(l,a),s&&s.d()}}}let _t=225;function dd(r,e,t){let n,i,u,l;we(r,Qf,c=>t(2,n=c)),we(r,Ir,c=>t(3,i=c)),we(r,Fr,c=>t(4,u=c)),we(r,Vn,c=>t(5,l=c));let{pageId:o}=e,{sectionId:s}=e;qn(async()=>{td()});function a(c){za.call(this,r,c)}return r.$$set=c=>{"pageId"in c&&t(0,o=c.pageId),"sectionId"in c&&t(1,s=c.sectionId)},[o,s,n,i,u,l,a]}class hd extends Ee{constructor(e){super(),Ae(this,e,dd,fd,me,{pageId:0,sectionId:1})}}function pd(r){let e,t=r[0].price&&Eo(r);return{c(){e=C("p"),t&&t.c(),this.h()},l(n){e=v(n,"P",{class:!0});var i=O(e);t&&t.l(i),i.forEach(_),this.h()},h(){b(e,"class","mt-1 md:mt-2 text-xs md:text-lg")},m(n,i){x(n,e,i),t&&t.m(e,null)},p(n,i){n[0].price?t?t.p(n,i):(t=Eo(n),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:$,o:$,d(n){n&&_(e),t&&t.d()}}}function md(r){let e,t;return e=new nd({props:{amount:r[0].price,sourceCurrency:r[0].currency}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},p(n,i){const u={};i&1&&(u.amount=n[0].price),i&1&&(u.sourceCurrency=n[0].currency),e.$set(u)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function gd(r){let e,t,n,i;function u(o){r[8](o)}let l={totalSeconds:r[5]-r[4]};return r[1]!==void 0&&(l.ended=r[1]),t=new La({props:l}),Dr.push(()=>Or(t,"ended",u)),{c(){e=C("div"),Z(t.$$.fragment),this.h()},l(o){e=v(o,"DIV",{class:!0});var s=O(e);Q(t.$$.fragment,s),s.forEach(_),this.h()},h(){b(e,"class","p-5")},m(o,s){x(o,e,s),Y(t,e,null),i=!0},p(o,s){const a={};!n&&s&2&&(n=!0,a.ended=o[1],Tr(()=>n=!1)),t.$set(a)},i(o){i||(D(t.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),i=!1},d(o){o&&_(e),X(t)}}}function Eo(r){let e=r[0].price.toString().trim()+"",t,n,i,u=r[0].currency&&Ao(r);return{c(){t=ee(e),n=I(),u&&u.c(),i=T()},l(l){t=te(l,e),n=F(l),u&&u.l(l),i=T()},m(l,o){x(l,t,o),x(l,n,o),u&&u.m(l,o),x(l,i,o)},p(l,o){o&1&&e!==(e=l[0].price.toString().trim()+"")&&Le(t,e),l[0].currency?u?u.p(l,o):(u=Ao(l),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},d(l){l&&(_(t),_(n),_(i)),u&&u.d(l)}}}function Ao(r){let e=r[0].currency.trim()+"",t;return{c(){t=ee(e)},l(n){t=te(n,e)},m(n,i){x(n,t,i)},p(n,i){i&1&&e!==(e=n[0].currency.trim()+"")&&Le(t,e)},d(n){n&&_(t)}}}function Mo(r){let e,t,n,i,u,l;return n=new ru({props:{itemId:r[0].id,entityName:"products",classOverride:"text-white",showAddActions:!1}}),{c(){e=C("a"),t=C("div"),Z(n.$$.fragment),this.h()},l(o){e=v(o,"A",{href:!0});var s=O(e);t=v(s,"DIV",{class:!0});var a=O(t);Q(n.$$.fragment,a),a.forEach(_),s.forEach(_),this.h()},h(){b(t,"class","p-0 md:p-4 md:pb-0 cursor-default"),b(e,"href",null)},m(o,s){x(o,e,s),M(e,t),Y(n,t,null),i=!0,u||(l=ct(e,"click",tu(r[7])),u=!0)},p(o,s){const a={};s&1&&(a.itemId=o[0].id),n.$set(a)},i(o){i||(D(n.$$.fragment,o),i=!0)},o(o){R(n.$$.fragment,o),i=!1},d(o){o&&_(e),X(n),u=!1,l()}}}function bd(r){let e,t,n,i,u,l=r[0].name+"",o,s,a,c,f,d,h;const p=[gd,md,pd],m=[];function g(w,k){return w[0].event.kind===$t?0:w[0].price&&w[0].currency?1:2}a=g(r),c=m[a]=p[a](r);let y=r[2]&&r[3]&&Mo(r);return{c(){e=C("div"),t=C("a"),n=C("div"),i=C("div"),u=C("h1"),o=ee(l),s=I(),c.c(),f=I(),y&&y.c(),this.h()},l(w){e=v(w,"DIV",{class:!0});var k=O(e);t=v(k,"A",{class:!0,href:!0});var S=O(t);n=v(S,"DIV",{class:!0,style:!0});var E=O(n);i=v(E,"DIV",{class:!0});var z=O(i);u=v(z,"H1",{class:!0});var P=O(u);o=te(P,l),P.forEach(_),s=F(z),c.l(z),f=F(z),y&&y.l(z),z.forEach(_),E.forEach(_),S.forEach(_),k.forEach(_),this.h()},h(){b(u,"class","text-md md:text-2xl leading-4"),b(i,"class","absolute p-2 pt-1 md:p-4 bottom-0 left-0 right-0 h-30 bg-black bg-opacity-30 backdrop-blur text-white rounded-b-lg"),je(i,"pb-0",r[2]),b(n,"class","absolute inset-0 m-0 h-full w-full overflow-hidden rounded-none bg-transparent bg-cover bg-clip-border bg-center text-gray-700 shadow-none"),Sn(n,"background-image","url('"+(r[0].images?r[0].images[0]:r[0].image??rn)+"')"),b(t,"class","cursor-pointer hover:underline"),b(t,"href",d="/product/"+r[0].id),b(e,"class","relative grid h-[40rem] max-h-48 md:max-h-[32rem] w-full max-w-[28rem] flex-col items-end justify-center overflow-hidden rounded-md md:rounded-xl bg-white bg-clip-border text-center text-gray-700")},m(w,k){x(w,e,k),M(e,t),M(t,n),M(n,i),M(i,u),M(u,o),M(i,s),m[a].m(i,null),M(i,f),y&&y.m(i,null),h=!0},p(w,[k]){(!h||k&1)&&l!==(l=w[0].name+"")&&Le(o,l);let S=a;a=g(w),a===S?m[a].p(w,k):(J(),R(m[S],1,1,()=>{m[S]=null}),K(),c=m[a],c?c.p(w,k):(c=m[a]=p[a](w),c.c()),D(c,1),c.m(i,f)),w[2]&&w[3]?y?(y.p(w,k),k&12&&D(y,1)):(y=Mo(w),y.c(),D(y,1),y.m(i,null)):y&&(J(),R(y,1,1,()=>{y=null}),K()),(!h||k&4)&&je(i,"pb-0",w[2]),(!h||k&1)&&Sn(n,"background-image","url('"+(w[0].images?w[0].images[0]:w[0].image??rn)+"')"),(!h||k&1&&d!==(d="/product/"+w[0].id))&&b(t,"href",d)},i(w){h||(D(c),D(y),h=!0)},o(w){R(c),R(y),h=!1},d(w){w&&_(e),m[a].d(),y&&y.d()}}}function _d(r,e,t){let n,i;we(r,Ir,d=>t(2,n=d)),we(r,Fr,d=>t(3,i=d));let{product:u}=e,{onImgError:l=()=>{}}=e,o=Math.floor(Date.now()/1e3),s=u.start_date+u.duration,a=o>s;function c(d){za.call(this,r,d)}function f(d){a=d,t(1,a)}return r.$$set=d=>{"product"in d&&t(0,u=d.product),"onImgError"in d&&t(6,l=d.onImgError)},[u,a,n,i,o,s,l,c,f]}class kd extends Ee{constructor(e){super(),Ae(this,e,_d,bd,me,{product:0,onImgError:6})}}function yd(r){let e,t,n,i,u,l,o,s='<h1 class="text-md md:text-2xl leading-4">Add your own product!</h1> <p class="mt-1 md:mt-2 text-xs md:text-lg">Do you want to sell or auction your own products? Click here!</p>',a;return u=new iu({}),{c(){e=C("div"),t=C("a"),n=C("div"),i=C("span"),Z(u.$$.fragment),l=I(),o=C("div"),o.innerHTML=s,this.h()},l(c){e=v(c,"DIV",{class:!0});var f=O(e);t=v(f,"A",{class:!0,href:!0});var d=O(t);n=v(d,"DIV",{class:!0});var h=O(n);i=v(h,"SPAN",{class:!0});var p=O(i);Q(u.$$.fragment,p),p.forEach(_),l=F(h),o=v(h,"DIV",{class:!0,"data-svelte-h":!0}),ue(o)!=="svelte-1ufi6qh"&&(o.innerHTML=s),h.forEach(_),d.forEach(_),f.forEach(_),this.h()},h(){b(i,"class","w-7/12 mt-4 md:mt-20 text-green-500 cursor-pointer tooltip"),b(o,"class","absolute p-2 pt-1 md:p-4 bottom-0 left-0 right-0 h-30 bg-black bg-opacity-30 backdrop-blur text-white rounded-b-lg"),b(n,"class","absolute inset-0 m-0 h-full w-full overflow-hidden rounded-none bg-transparent bg-cover bg-clip-border bg-center text-gray-700 shadow-none"),b(t,"class","cursor-pointer hover:underline"),b(t,"href","/admin"),b(e,"class","relative grid h-[40rem] max-h-48 md:max-h-[32rem] w-full max-w-[28rem] flex-col items-end justify-center overflow-hidden rounded-md md:rounded-xl bg-white bg-clip-border text-center text-gray-700")},m(c,f){x(c,e,f),M(e,t),M(t,n),M(n,i),Y(u,i,null),M(n,l),M(n,o),a=!0},p:$,i(c){a||(D(u.$$.fragment,c),a=!0)},o(c){R(u.$$.fragment,c),a=!1},d(c){c&&_(e),X(u)}}}class xd extends Ee{constructor(e){super(),Ae(this,e,null,yd,me,{})}}function Do(r,e,t){const n=r.slice();return n[5]=e[t][0],n[6]=e[t][1],n}function wd(r){let e,t,n,i=j(Object.entries(r[0])),u=[];for(let s=0;s<i.length;s+=1)u[s]=No(Do(r,i,s));const l=s=>R(u[s],1,1,()=>{u[s]=null});let o=r[2].backend_present&&Oo();return{c(){e=C("div");for(let s=0;s<u.length;s+=1)u[s].c();t=I(),o&&o.c(),this.h()},l(s){e=v(s,"DIV",{class:!0});var a=O(e);for(let c=0;c<u.length;c+=1)u[c].l(a);t=F(a),o&&o.l(a),a.forEach(_),this.h()},h(){b(e,"class","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-8 z-[300] mt-2 mb-2")},m(s,a){x(s,e,a);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(e,null);M(e,t),o&&o.m(e,null),n=!0},p(s,a){if(a&1){i=j(Object.entries(s[0]));let c;for(c=0;c<i.length;c+=1){const f=Do(s,i,c);u[c]?(u[c].p(f,a),D(u[c],1)):(u[c]=No(f),u[c].c(),D(u[c],1),u[c].m(e,t))}for(J(),c=i.length;c<u.length;c+=1)l(c);K()}s[2].backend_present?o?a&4&&D(o,1):(o=Oo(),o.c(),D(o,1),o.m(e,null)):o&&(J(),R(o,1,1,()=>{o=null}),K())},i(s){if(!n){for(let a=0;a<i.length;a+=1)D(u[a]);D(o),n=!0}},o(s){u=u.filter(Boolean);for(let a=0;a<u.length;a+=1)R(u[a]);R(o),n=!1},d(s){s&&_(e),se(u,s),o&&o.d()}}}function Cd(r){let e,t='<span class="loading loading-bars w-24"></span>';return{c(){e=C("div"),e.innerHTML=t,this.h()},l(n){e=v(n,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-15qzqwz"&&(e.innerHTML=t),this.h()},h(){b(e,"class","p-12 flex flex-wrap items-center justify-center")},m(n,i){x(n,e,i)},p:$,i:$,o:$,d(n){n&&_(e)}}}function To(r){let e,t;return e=new kd({props:{product:r[6]}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},p(n,i){const u={};i&1&&(u.product=n[6]),e.$set(u)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function No(r){let e,t,n=(r[6].event.kind===Ru||r[6].event.kind===$t&&r[6].ended===!1)&&To(r);return{c(){n&&n.c(),e=T()},l(i){n&&n.l(i),e=T()},m(i,u){n&&n.m(i,u),x(i,e,u),t=!0},p(i,u){i[6].event.kind===Ru||i[6].event.kind===$t&&i[6].ended===!1?n?(n.p(i,u),u&1&&D(n,1)):(n=To(i),n.c(),D(n,1),n.m(e.parentNode,e)):n&&(J(),R(n,1,1,()=>{n=null}),K())},i(i){t||(D(n),t=!0)},o(i){R(n),t=!1},d(i){i&&_(e),n&&n.d(i)}}}function Oo(r){let e,t;return e=new xd({}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function vd(r){let e,t,n,i;const u=[Cd,wd],l=[];function o(s,a){return s[1]?1:0}return t=o(r),n=l[t]=u[t](r),{c(){e=C("main"),n.c(),this.h()},l(s){e=v(s,"MAIN",{class:!0});var a=O(e);n.l(a),a.forEach(_),this.h()},h(){b(e,"class","p-4 md:container mx-auto")},m(s,a){x(s,e,a),l[t].m(e,null),i=!0},p(s,[a]){let c=t;t=o(s),t===c?l[t].p(s,a):(J(),R(l[c],1,1,()=>{l[c]=null}),K(),n=l[t],n?n.p(s,a):(n=l[t]=u[t](s),n.c()),D(n,1),n.m(e,null))},i(s){i||(D(n),i=!0)},o(s){R(n),i=!1},d(s){s&&_(e),l[t].d()}}}function Sd(r,e,t){let n;we(r,Vn,s=>t(2,n=s));let{pageId:i}=e,{sectionId:u}=e,l={},o=!1;return qn(async()=>{let s=cr(i,u,"products");Pa(null,s,a=>{if(a.event.kind===$t){let f=Math.floor(Date.now()/1e3),d=a.start_date+a.duration;a.ended=f>d}let c=a.id;(!(c in l)||c in l&&l[c].event.created_at<a.event.created_at)&&t(0,l[c]=a,l)},()=>{t(1,o=!0)})}),r.$$set=s=>{"pageId"in s&&t(3,i=s.pageId),"sectionId"in s&&t(4,u=s.sectionId)},[l,o,n,i,u]}class Ed extends Ee{constructor(e){super(),Ae(this,e,Sd,vd,me,{pageId:3,sectionId:4})}}function Ad(r){let e,t,n;return t=new Rr({props:{source:r[0]}}),{c(){e=C("div"),Z(t.$$.fragment),this.h()},l(i){e=v(i,"DIV",{class:!0});var u=O(e);Q(t.$$.fragment,u),u.forEach(_),this.h()},h(){b(e,"class","z-[300] prose lg:prose-xl")},m(i,u){x(i,e,u),Y(t,e,null),n=!0},p(i,u){const l={};u&1&&(l.source=i[0]),t.$set(l)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){R(t.$$.fragment,i),n=!1},d(i){i&&_(e),X(t)}}}function Md(r){let e,t='<span class="loading loading-bars w-24"></span>';return{c(){e=C("div"),e.innerHTML=t,this.h()},l(n){e=v(n,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-15qzqwz"&&(e.innerHTML=t),this.h()},h(){b(e,"class","p-12 flex flex-wrap items-center justify-center")},m(n,i){x(n,e,i)},p:$,i:$,o:$,d(n){n&&_(e)}}}function Dd(r){let e,t,n,i;const u=[Md,Ad],l=[];function o(s,a){return s[0]?1:0}return t=o(r),n=l[t]=u[t](r),{c(){e=C("main"),n.c(),this.h()},l(s){e=v(s,"MAIN",{class:!0});var a=O(e);n.l(a),a.forEach(_),this.h()},h(){b(e,"class","mx-auto px-8 md:container")},m(s,a){x(s,e,a),l[t].m(e,null),i=!0},p(s,[a]){let c=t;t=o(s),t===c?l[t].p(s,a):(J(),R(l[c],1,1,()=>{l[c]=null}),K(),n=l[t],n?n.p(s,a):(n=l[t]=u[t](s),n.c()),D(n,1),n.m(e,null))},i(s){i||(D(n),i=!0)},o(s){R(n),i=!1},d(s){s&&_(e),l[t].d()}}}function Td(r,e,t){let n;we(r,Vn,o=>t(3,n=o));let{pageId:i}=e,{sectionId:u}=e,l=null;return qn(async()=>{if(n&&n.admin_pubkeys.length>0){let o=0;sr(n.admin_pubkeys,[ar("sectionText_"+i+"_"+u)],(s,a)=>{a>o&&(o=a,t(0,l=s))})}}),r.$$set=o=>{"pageId"in o&&t(1,i=o.pageId),"sectionId"in o&&t(2,u=o.sectionId)},[l,i,u]}class Nd extends Ee{constructor(e){super(),Ae(this,e,Td,Dd,me,{pageId:1,sectionId:2})}}function Io(r,e,t){const n=r.slice();return n[10]=e[t][0],n[11]=e[t][1],n[13]=t,n}function Fo(r,e,t){const n=r.slice();return n[10]=e[t][0],n[11]=e[t][1],n[14]=e,n[13]=t,n}function Ro(r){let e,t='<span class="loading loading-bars w-24"></span>';return{c(){e=C("div"),e.innerHTML=t,this.h()},l(n){e=v(n,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-15qzqwz"&&(e.innerHTML=t),this.h()},h(){b(e,"class","p-12 flex flex-wrap items-center justify-center")},m(n,i){x(n,e,i)},d(n){n&&_(e)}}}function Od(r){let e,t,n,i=r[11].name&&zo(r),u=r[11].description&&Po(r);return{c(){i&&i.c(),e=I(),u&&u.c(),t=T()},l(l){i&&i.l(l),e=F(l),u&&u.l(l),t=T()},m(l,o){i&&i.m(l,o),x(l,e,o),u&&u.m(l,o),x(l,t,o),n=!0},p(l,o){l[11].name?i?i.p(l,o):(i=zo(l),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),l[11].description?u?(u.p(l,o),o&16&&D(u,1)):(u=Po(l),u.c(),D(u,1),u.m(t.parentNode,t)):u&&(J(),R(u,1,1,()=>{u=null}),K())},i(l){n||(D(u),n=!0)},o(l){R(u),n=!1},d(l){l&&(_(e),_(t)),i&&i.d(l),u&&u.d(l)}}}function Id(r){let e,t;return e=new Rr({props:{source:r[11].markdownText}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},p(n,i){const u={};i&16&&(u.source=n[11].markdownText),e.$set(u)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function zo(r){let e,t=r[11].name+"",n;return{c(){e=C("h2"),n=ee(t),this.h()},l(i){e=v(i,"H2",{class:!0});var u=O(e);n=te(u,t),u.forEach(_),this.h()},h(){b(e,"class","md:text-3xl mb-1 md:mb-2")},m(i,u){x(i,e,u),M(e,n)},p(i,u){u&16&&t!==(t=i[11].name+"")&&Le(n,t)},d(i){i&&_(e)}}}function Po(r){let e,t;return e=new Rr({props:{source:r[11].description}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},p(n,i){const u={};i&16&&(u.source=n[11].description),e.$set(u)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Bo(r){let e,t,n,i;const u=[Rd,Fd],l=[];function o(s,a){return s[11].ended?0:1}return e=o(r),t=l[e]=u[e](r),{c(){t.c(),n=T()},l(s){t.l(s),n=T()},m(s,a){l[e].m(s,a),x(s,n,a),i=!0},p(s,a){let c=e;e=o(s),e===c?l[e].p(s,a):(J(),R(l[c],1,1,()=>{l[c]=null}),K(),t=l[e],t?t.p(s,a):(t=l[e]=u[e](s),t.c()),D(t,1),t.m(n.parentNode,n))},i(s){i||(D(t),i=!0)},o(s){R(t),i=!1},d(s){s&&_(n),l[e].d(s)}}}function Fd(r){let e,t,n,i;function u(o){r[8](o,r[11])}let l={totalSeconds:r[11].endsAt-r[3]};return r[11].ended!==void 0&&(l.ended=r[11].ended),t=new La({props:l}),Dr.push(()=>Or(t,"ended",u)),{c(){e=C("div"),Z(t.$$.fragment),this.h()},l(o){e=v(o,"DIV",{class:!0});var s=O(e);Q(t.$$.fragment,s),s.forEach(_),this.h()},h(){b(e,"class","pt-4 pb-2")},m(o,s){x(o,e,s),Y(t,e,null),i=!0},p(o,s){r=o;const a={};s&24&&(a.totalSeconds=r[11].endsAt-r[3]),!n&&s&16&&(n=!0,a.ended=r[11].ended,Tr(()=>n=!1)),t.$set(a)},i(o){i||(D(t.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),i=!1},d(o){o&&_(e),X(t)}}}function Rd(r){let e,t='<p class="pt-5 text-xl font-bold mx-auto">Auction Ended</p>';return{c(){e=C("div"),e.innerHTML=t,this.h()},l(n){e=v(n,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-4w83cx"&&(e.innerHTML=t),this.h()},h(){b(e,"class","flex")},m(n,i){x(n,e,i)},p:$,i:$,o:$,d(n){n&&_(e)}}}function Lo(r){let e,t="Edit text",n,i,u,l,o,s;function a(){return r[9](r[11])}return u=new ru({props:{itemId:r[11].id,entityName:"products"}}),{c(){e=C("button"),e.textContent=t,n=I(),i=C("div"),Z(u.$$.fragment),this.h()},l(c){e=v(c,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-y5dk10"&&(e.textContent=t),n=F(c),i=v(c,"DIV",{class:!0});var f=O(i);Q(u.$$.fragment,f),f.forEach(_),this.h()},h(){b(e,"class","btn btn-outline btn-primary mt-6 ml-4"),b(i,"class","p-0 md:p-4 md:pb-0")},m(c,f){x(c,e,f),x(c,n,f),x(c,i,f),Y(u,i,null),l=!0,o||(s=ct(e,"click",a),o=!0)},p(c,f){r=c;const d={};f&16&&(d.itemId=r[11].id),u.$set(d)},i(c){l||(D(u.$$.fragment,c),l=!0)},o(c){R(u.$$.fragment,c),l=!1},d(c){c&&(_(e),_(n),_(i)),X(u),o=!1,s()}}}function qo(r){let e,t,n,i,u,l,o,s,a,c,f,d,h,p,m,g,y,w,k,S,E;const z=[Id,Od],P=[];function V(H,re){return H[11].markdownText?0:1}d=V(r),h=P[d]=z[d](r);let A=r[11].event.kind===$t&&Bo(r),L=r[7]&&Lo(r);return{c(){e=C("div"),t=C("div"),n=C("div"),i=C("a"),u=C("img"),a=I(),c=C("div"),f=C("div"),h.c(),p=I(),A&&A.c(),m=I(),g=C("a"),y=ee("View product"),k=I(),L&&L.c(),S=I(),this.h()},l(H){e=v(H,"DIV",{class:!0,"data-te-carousel-fade":!0,"data-te-carousel-item":!0,"data-te-carousel-active":!0});var re=O(e);t=v(re,"DIV",{class:!0});var ge=O(t);n=v(ge,"DIV",{class:!0});var dn=O(n);i=v(dn,"A",{href:!0});var it=O(i);u=v(it,"IMG",{class:!0,alt:!0,src:!0}),it.forEach(_),dn.forEach(_),a=F(ge),c=v(ge,"DIV",{class:!0});var Ke=O(c);f=v(Ke,"DIV",{class:!0});var Tu=O(f);h.l(Tu),Tu.forEach(_),p=F(Ke),A&&A.l(Ke),m=F(Ke),g=v(Ke,"A",{class:!0,href:!0});var Nu=O(g);y=te(Nu,"View product"),Nu.forEach(_),k=F(Ke),L&&L.l(Ke),Ke.forEach(_),ge.forEach(_),S=F(re),re.forEach(_),this.h()},h(){b(u,"class","h-full w-auto mx-auto p-4 md:p-6"),b(u,"alt",l=r[11].name??"Product #"+r[13]),or(u.src,o=r[11].images?r[11].images[0]:r[11].image??rn)||b(u,"src",o),b(i,"href",s="/product/"+r[11].id),b(n,"class","h-full max-h-[20rem] md:max-h-[36rem] w-auto md:w-6/12 overflow-hidden"),b(f,"class","z-[300] prose lg:prose-xl prose-p:my-2 md:prose-p:my-3"),b(g,"class","btn btn-outline btn-accent mt-6"),b(g,"href",w="/product/"+r[11].id),b(c,"class","w-full md:w-6/12 overflow-hidden p-4 pt-0 md:p-16 md:pt-4 md:pl-12 md:text-lg"),b(t,"class","relative h-full w-auto md:flex overflow-hidden"),b(e,"class","h-[36rem] max-h-full w-full relative float-left -mr-[100%] bg-base-200/40 rounded-xl !transform-none opacity-0 transition-opacity duration-[600ms] ease-in-out motion-reduce:transition-none"),b(e,"data-te-carousel-fade",""),b(e,"data-te-carousel-item",""),b(e,"data-te-carousel-active",r[13]===0?!0:null),je(e,"hidden",r[13]>0)},m(H,re){x(H,e,re),M(e,t),M(t,n),M(n,i),M(i,u),M(t,a),M(t,c),M(c,f),P[d].m(f,null),M(c,p),A&&A.m(c,null),M(c,m),M(c,g),M(g,y),M(c,k),L&&L.m(c,null),M(e,S),E=!0},p(H,re){(!E||re&16&&l!==(l=H[11].name??"Product #"+H[13]))&&b(u,"alt",l),(!E||re&16&&!or(u.src,o=H[11].images?H[11].images[0]:H[11].image??rn))&&b(u,"src",o),(!E||re&16&&s!==(s="/product/"+H[11].id))&&b(i,"href",s);let ge=d;d=V(H),d===ge?P[d].p(H,re):(J(),R(P[ge],1,1,()=>{P[ge]=null}),K(),h=P[d],h?h.p(H,re):(h=P[d]=z[d](H),h.c()),D(h,1),h.m(f,null)),H[11].event.kind===$t?A?(A.p(H,re),re&16&&D(A,1)):(A=Bo(H),A.c(),D(A,1),A.m(c,m)):A&&(J(),R(A,1,1,()=>{A=null}),K()),(!E||re&16&&w!==(w="/product/"+H[11].id))&&b(g,"href",w),H[7]?L?(L.p(H,re),re&128&&D(L,1)):(L=Lo(H),L.c(),D(L,1),L.m(c,null)):L&&(J(),R(L,1,1,()=>{L=null}),K())},i(H){E||(D(h),D(A),D(L),E=!0)},o(H){R(h),R(A),R(L),E=!1},d(H){H&&_(e),P[d].d(),A&&A.d(),L&&L.d()}}}function Vo(r){let e,t,n,i,u,l,o,s,a,c,f="Sell or auction your product here!",d,h,p,m,g="Sell your products",y;return l=new iu({}),h=new Rr({props:{source:"Create your stall and start selling or auctioning your products in 5 minutes!"}}),{c(){e=C("div"),t=C("div"),n=C("div"),i=C("a"),u=C("span"),Z(l.$$.fragment),o=I(),s=C("div"),a=C("div"),c=C("h2"),c.textContent=f,d=I(),Z(h.$$.fragment),p=I(),m=C("a"),m.textContent=g,this.h()},l(w){e=v(w,"DIV",{class:!0,"data-te-carousel-fade":!0,"data-te-carousel-item":!0});var k=O(e);t=v(k,"DIV",{class:!0});var S=O(t);n=v(S,"DIV",{class:!0});var E=O(n);i=v(E,"A",{class:!0,href:!0});var z=O(i);u=v(z,"SPAN",{class:!0});var P=O(u);Q(l.$$.fragment,P),P.forEach(_),z.forEach(_),E.forEach(_),o=F(S),s=v(S,"DIV",{class:!0});var V=O(s);a=v(V,"DIV",{class:!0});var A=O(a);c=v(A,"H2",{class:!0,"data-svelte-h":!0}),ue(c)!=="svelte-1ci9dxk"&&(c.textContent=f),d=F(A),Q(h.$$.fragment,A),A.forEach(_),p=F(V),m=v(V,"A",{class:!0,href:!0,"data-svelte-h":!0}),ue(m)!=="svelte-1a1v4no"&&(m.textContent=g),V.forEach(_),S.forEach(_),k.forEach(_),this.h()},h(){b(u,"class","w-7/12 max-h-20 mt-6 md:mt-12 mx-auto text-green-500 tooltip"),b(i,"class","flex"),b(i,"href","/admin"),b(n,"class","h-full max-h-[20rem] md:max-h-[36rem] w-auto md:w-6/12 overflow-hidden"),b(c,"class","md:text-3xl mb-1 md:mb-2"),b(a,"class","z-[300] prose lg:prose-xl prose-p:my-2 md:prose-p:my-3"),b(m,"class","btn btn-outline btn-accent mt-6"),b(m,"href","/admin"),b(s,"class","w-full md:w-6/12 overflow-hidden p-4 pt-0 md:p-16 md:pt-4 md:pl-12 md:text-lg"),b(t,"class","relative h-full w-auto md:flex qaaaoverflow-hidden"),b(e,"class","h-[36rem] max-h-full w-full relative float-left -mr-[100%] bg-base-200/40 rounded-xl !transform-none opacity-0 transition-opacity duration-[600ms] ease-in-out motion-reduce:transition-none"),b(e,"data-te-carousel-fade",""),b(e,"data-te-carousel-item","")},m(w,k){x(w,e,k),M(e,t),M(t,n),M(n,i),M(i,u),Y(l,u,null),M(t,o),M(t,s),M(s,a),M(a,c),M(a,d),Y(h,a,null),M(s,p),M(s,m),y=!0},i(w){y||(D(l.$$.fragment,w),D(h.$$.fragment,w),y=!0)},o(w){R(l.$$.fragment,w),R(h.$$.fragment,w),y=!1},d(w){w&&_(e),X(l),X(h)}}}function $o(r){let e,t,n,i="",u,l,o,s,a,c,f,d,h,p=Object.entries(r[4]).length>1&&r[6].backend_present,m,g=j(Object.entries(r[4])),y=[];for(let k=0;k<g.length;k+=1)y[k]=Ho(Io(r,g,k));let w=p&&jo(r);return{c(){e=C("div"),t=C("span"),n=C("span"),n.textContent=i,l=I(),o=C("div"),s=C("span"),a=ee(""),f=I(),d=C("div");for(let k=0;k<y.length;k+=1)y[k].c();h=I(),w&&w.c(),this.h()},l(k){e=v(k,"DIV",{class:!0});var S=O(e);t=v(S,"SPAN",{class:!0,"data-te-target":!0,"data-te-slide":!0});var E=O(t);n=v(E,"SPAN",{style:!0,"data-svelte-h":!0}),ue(n)!=="svelte-zdurpv"&&(n.textContent=i),E.forEach(_),S.forEach(_),l=F(k),o=v(k,"DIV",{class:!0});var z=O(o);s=v(z,"SPAN",{class:!0,style:!0,"data-te-target":!0,"data-te-slide":!0});var P=O(s);a=te(P,""),P.forEach(_),z.forEach(_),f=F(k),d=v(k,"DIV",{class:!0,"data-te-carousel-indicators":!0});var V=O(d);for(let A=0;A<y.length;A+=1)y[A].l(V);h=F(V),w&&w.l(V),V.forEach(_),this.h()},h(){Sn(n,"transform","scale(-1)"),b(t,"class","absolute -mr-6 bg-white rounded-full shadow-gray-500 shadow-md hover:shadow-lg h-12 w-12 text-3xl flex items-center justify-center border-0 opacity-70 transition-opacity duration-150 ease-[cubic-bezier(0.25,0.1,0.25,1.0)] hover:no-underline hover:opacity-90 hover:outline-none focus:no-underline focus:opacity-90 motion-reduce:transition-none text-indigo-600 hover:text-indigo-400 focus:text-indigo-400 focus:outline-none focus:shadow-outline cursor-pointer"),b(t,"data-te-target",u="#slider_"+r[0]+"_"+r[1]),b(t,"data-te-slide","prev"),b(e,"class","absolute bottom-0 left-0 top-0 z-[1] flex w-[3%] items-center justify-center"),b(s,"class","absolute -ml-6 bg-white rounded-full shadow-gray-500 shadow-md hover:shadow-lg h-12 w-12 text-3xl flex items-center justify-center border-0 opacity-70 transition-opacity duration-150 ease-[cubic-bezier(0.25,0.1,0.25,1.0)] hover:no-underline hover:opacity-90 hover:outline-none focus:no-underline focus:opacity-90 motion-reduce:transition-none text-indigo-600 hover:text-indigo-400 focus:text-indigo-400 focus:outline-none focus:shadow-outline cursor-pointer"),Sn(s,"transform","scale(1)"),b(s,"data-te-target",c="#slider_"+r[0]+"_"+r[1]),b(s,"data-te-slide","next"),b(o,"class","absolute bottom-0 right-0 top-0 z-[1] flex w-[3%] items-center justify-center"),b(d,"class","inset-x-0 p-0 mt-3 mx-[5%] md:mx-[15%] md:mt-6 mb-4 z-[2] flex list-none justify-center"),b(d,"data-te-carousel-indicators","")},m(k,S){x(k,e,S),M(e,t),M(t,n),x(k,l,S),x(k,o,S),M(o,s),M(s,a),x(k,f,S),x(k,d,S);for(let E=0;E<y.length;E+=1)y[E]&&y[E].m(d,null);M(d,h),w&&w.m(d,null),m=!0},p(k,S){if((!m||S&3&&u!==(u="#slider_"+k[0]+"_"+k[1]))&&b(t,"data-te-target",u),(!m||S&3&&c!==(c="#slider_"+k[0]+"_"+k[1]))&&b(s,"data-te-target",c),S&19){g=j(Object.entries(k[4]));let E;for(E=0;E<g.length;E+=1){const z=Io(k,g,E);y[E]?y[E].p(z,S):(y[E]=Ho(z),y[E].c(),y[E].m(d,h))}for(;E<y.length;E+=1)y[E].d(1);y.length=g.length}S&80&&(p=Object.entries(k[4]).length>1&&k[6].backend_present),p?w?(w.p(k,S),S&80&&D(w,1)):(w=jo(k),w.c(),D(w,1),w.m(d,null)):w&&(J(),R(w,1,1,()=>{w=null}),K())},i(k){m||(D(w),m=!0)},o(k){R(w),m=!1},d(k){k&&(_(e),_(l),_(o),_(f),_(d)),se(y,k),w&&w.d()}}}function Ho(r){let e,t,n,i,u;return{c(){e=C("button"),t=C("img"),i=I(),this.h()},l(l){e=v(l,"BUTTON",{"data-te-target":!0,"data-te-slide-to":!0,"data-te-carousel-active":!0,class:!0});var o=O(e);t=v(o,"IMG",{class:!0,src:!0,alt:!0}),i=F(o),o.forEach(_),this.h()},h(){b(t,"class","w-full max-h-16"),or(t.src,n=r[11].images?r[11].images[0]:r[11].image??rn)||b(t,"src",n),b(t,"alt",""),b(e,"data-te-target",u="#slider_"+r[0]+"_"+r[1]),b(e,"data-te-slide-to",r[13]),b(e,"data-te-carousel-active",r[13]===0?!0:null),b(e,"class","px-2 md:px-12 opacity-50 hover:opacity-100")},m(l,o){x(l,e,o),M(e,t),M(e,i)},p(l,o){o&16&&!or(t.src,n=l[11].images?l[11].images[0]:l[11].image??rn)&&b(t,"src",n),o&3&&u!==(u="#slider_"+l[0]+"_"+l[1])&&b(e,"data-te-target",u)},d(l){l&&_(e)}}}function jo(r){let e,t,n,i,u;return t=new iu({}),{c(){e=C("button"),Z(t.$$.fragment),this.h()},l(l){e=v(l,"BUTTON",{"data-te-target":!0,"data-te-slide-to":!0,class:!0});var o=O(e);Q(t.$$.fragment,o),o.forEach(_),this.h()},h(){b(e,"data-te-target",n="#slider_"+r[0]+"_"+r[1]),b(e,"data-te-slide-to",i=Object.entries(r[4]).length),b(e,"class","pl-2 w-16 opacity-50 hover:opacity-100 text-green-500 tooltip")},m(l,o){x(l,e,o),Y(t,e,null),u=!0},p(l,o){(!u||o&3&&n!==(n="#slider_"+l[0]+"_"+l[1]))&&b(e,"data-te-target",n),(!u||o&16&&i!==(i=Object.entries(l[4]).length))&&b(e,"data-te-slide-to",i)},i(l){u||(D(t.$$.fragment,l),u=!0)},o(l){R(t.$$.fragment,l),u=!1},d(l){l&&_(e),X(t)}}}function zd(r){let e,t,n,i,u,l=Object.entries(r[4]).length>1&&r[6].backend_present,o,s=Object.entries(r[4]).length>1,a,c,f=!r[5]&&Ro(),d=j(Object.entries(r[4])),h=[];for(let y=0;y<d.length;y+=1)h[y]=qo(Fo(r,d,y));const p=y=>R(h[y],1,1,()=>{h[y]=null});let m=l&&Vo(),g=s&&$o(r);return{c(){e=C("main"),f&&f.c(),t=I(),n=C("div"),i=C("div");for(let y=0;y<h.length;y+=1)h[y].c();u=I(),m&&m.c(),o=I(),g&&g.c(),this.h()},l(y){e=v(y,"MAIN",{class:!0});var w=O(e);f&&f.l(w),t=F(w),n=v(w,"DIV",{id:!0,class:!0,"data-te-carousel-init":!0,"data-te-ride":!0});var k=O(n);i=v(k,"DIV",{class:!0});var S=O(i);for(let E=0;E<h.length;E+=1)h[E].l(S);u=F(S),m&&m.l(S),S.forEach(_),o=F(k),g&&g.l(k),k.forEach(_),w.forEach(_),this.h()},h(){b(i,"class","w-full h-[36rem] overflow-hidden"),b(n,"id",a="slider_"+r[0]+"_"+r[1]),b(n,"class","w-full"),b(n,"data-te-carousel-init",""),b(n,"data-te-ride","carousel"),je(n,"hidden",!r[5]),b(e,"class","p-4 md:container mx-auto")},m(y,w){x(y,e,w),f&&f.m(e,null),M(e,t),M(e,n),M(n,i);for(let k=0;k<h.length;k+=1)h[k]&&h[k].m(i,null);M(i,u),m&&m.m(i,null),M(n,o),g&&g.m(n,null),c=!0},p(y,[w]){if(y[5]?f&&(f.d(1),f=null):f||(f=Ro(),f.c(),f.m(e,t)),w&159){d=j(Object.entries(y[4]));let k;for(k=0;k<d.length;k+=1){const S=Fo(y,d,k);h[k]?(h[k].p(S,w),D(h[k],1)):(h[k]=qo(S),h[k].c(),D(h[k],1),h[k].m(i,u))}for(J(),k=d.length;k<h.length;k+=1)p(k);K()}w&80&&(l=Object.entries(y[4]).length>1&&y[6].backend_present),l?m?w&80&&D(m,1):(m=Vo(),m.c(),D(m,1),m.m(i,null)):m&&(J(),R(m,1,1,()=>{m=null}),K()),w&16&&(s=Object.entries(y[4]).length>1),s?g?(g.p(y,w),w&16&&D(g,1)):(g=$o(y),g.c(),D(g,1),g.m(n,null)):g&&(J(),R(g,1,1,()=>{g=null}),K()),(!c||w&3&&a!==(a="slider_"+y[0]+"_"+y[1]))&&b(n,"id",a),(!c||w&32)&&je(n,"hidden",!y[5])},i(y){if(!c){for(let w=0;w<d.length;w+=1)D(h[w]);D(m),D(g),c=!0}},o(y){h=h.filter(Boolean);for(let w=0;w<h.length;w+=1)R(h[w]);R(m),R(g),c=!1},d(y){y&&_(e),f&&f.d(),se(h,y),m&&m.d(),g&&g.d()}}}function Pd(r,e,t){let n,i;we(r,Vn,h=>t(6,n=h)),we(r,Ir,h=>t(7,i=h));let{pageId:u}=e,{sectionId:l}=e,{setupSection:o}=e,s=Math.floor(Date.now()/1e3),a={},c=!1;qn(async()=>{let h=cr(u,l,"products");Pa(null,h,p=>{let m=p.id;if(!(m in a)||m in a&&a[m].event.created_at<p.event.created_at){if(p.event.kind===$t){t(3,s=Math.floor(Date.now()/1e3));let g=p.start_date+p.duration;p.endsAt=g,p.ended=s>g}t(4,a[m]=p,a)}},async()=>{{const{Carousel:p,initTE:m}=await rd(()=>import("../chunks/tw-elements.es.min.hbzFXnQ4.js"),__vite__mapDeps([0,1]),import.meta.url);m({Carousel:p}),t(5,c=!0)}if(n&&n.admin_pubkeys.length>0){let p=[];Object.keys(a).forEach(m=>{p.push(ar("section_products_with_slider_"+u+"_"+l+"_"+m))}),sr(n.admin_pubkeys,p,(m,g,y)=>{let k=Yf(y.tags,"d").join().split("_").at(-1);k&&(!a[k].markdownReceivedAt||a[k].markdownReceivedAt&&g>a[k].markdownReceivedAt)&&(t(4,a[k].markdownReceivedAt=g,a),t(4,a[k].markdownText=m,a))})}})});function f(h,p){r.$$.not_equal(p.ended,h)&&(p.ended=h)}const d=h=>o(u,l,h,!0);return r.$$set=h=>{"pageId"in h&&t(0,u=h.pageId),"sectionId"in h&&t(1,l=h.sectionId),"setupSection"in h&&t(2,o=h.setupSection)},[u,l,o,s,a,c,n,i,f,d]}class Bd extends Ee{constructor(e){super(),Ae(this,e,Pd,zd,me,{pageId:0,sectionId:1,setupSection:2})}}function Ld(r){let e,t;return{c(){e=Ou("svg"),t=Ou("path"),this.h()},l(n){e=Iu(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0});var i=O(e);t=Iu(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),O(t).forEach(_),i.forEach(_),this.h()},h(){b(t,"stroke-linecap","round"),b(t,"stroke-linejoin","round"),b(t,"d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"fill","none"),b(e,"viewBox","0 0 24 24"),b(e,"stroke-width","1.5"),b(e,"stroke","currentColor")},m(n,i){x(n,e,i),M(e,t)},p:$,i:$,o:$,d(n){n&&_(e)}}}class qd extends Ee{constructor(e){super(),Ae(this,e,null,Ld,me,{})}}var Vd=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},$a=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Si=(r,e,t)=>(Vd(r,e,"access private method"),t),nr,Ei;let $d=class{constructor({node:e,view:t,getPos:n,decorations:i,innerDecorations:u,options:l}){$a(this,nr),this.selected=!1,this.selectNode=()=>{var o,s;this.selected=!0,(s=(o=this.options).selectNode)==null||s.call(o)},this.deselectNode=()=>{var o,s;this.selected=!1,(s=(o=this.options).deselectNode)==null||s.call(o)},this.shouldUpdate=o=>!(o.type!==this.node.type||o.sameMarkup(this.node)&&o.content.eq(this.node.content)),this.update=(o,s,a)=>{var c,f;const d=this.options.update;let h;return d&&(h=d(o,s,a)),typeof h!="boolean"&&(h=this.shouldUpdate(o)),this.node=o,this.decorations=s,this.innerDecorations=a,h&&((f=(c=this.options).onUpdate)==null||f.call(c)),h},this.shouldIgnoreMutation=o=>!this.dom||!this.contentDOM||this.node.isLeaf||this.node.isAtom?!0:o.type==="selection"?!1:this.contentDOM===o.target&&o.type==="attributes"?!0:!this.contentDOM.contains(o.target),this.ignoreMutation=o=>{if(!this.dom||!this.contentDOM)return!0;let s;const a=this.options.ignoreMutation;return a&&(s=a(o)),typeof s!="boolean"&&(s=this.shouldIgnoreMutation(o)),s},this.destroy=()=>{var o,s,a;(s=(o=this.options).destroy)==null||s.call(o),this.dom.remove(),(a=this.contentDOM)==null||a.remove()},this.setAttrs=o=>{const{dispatch:s,state:a}=this.view,c=this.getPos();if(typeof c=="number")return s(a.tr.setNodeMarkup(c,void 0,{...this.node.attrs,...o}))},this.node=e,this.view=t,this.getPos=n,this.decorations=i,this.innerDecorations=u,this.options=l,this.dom=this.createDOM(l.as),this.contentDOM=e.isLeaf?null:this.createContentDOM(l.contentAs),this.dom.setAttribute("data-node-view-root","true"),this.contentDOM&&(this.contentDOM.setAttribute("data-node-view-content","true"),this.contentDOM.style.whiteSpace="inherit"),this.setSelection=l.setSelection,this.stopEvent=l.stopEvent}createDOM(e){return Si(this,nr,Ei).call(this,e)}createContentDOM(e){return Si(this,nr,Ei).call(this,e)}get component(){return this.options.component}};nr=new WeakSet,Ei=function(r){const{node:e}=this;return r==null?document.createElement(e.isInline?"span":"div"):r instanceof HTMLElement?r:r instanceof Function?r(e):document.createElement(r)};let Hd=class{constructor(e){this.view=e.view,this.options=e.options}get component(){return this.options.component}get root(){var e,t;let n=(t=(e=this.options).root)==null?void 0:t.call(e,this.view.dom);return n||(n=this.view.dom.parentElement??document.body),n}update(e,t){var n,i;this.view=e,this.prevState=t,(i=(n=this.options).update)==null||i.call(n,e,t)}destroy(){var e,t;(t=(e=this.options).destroy)==null||t.call(e)}};var Ai,Ha;let jd=class{constructor({pos:e,spec:t,options:n}){$a(this,Ai),this.pos=e,this.options=n,this.spec=t,this.dom=Si(this,Ai,Ha).call(this,n.as),this.dom.setAttribute("data-widget-view-root","true")}bind(e,t){this.view=e,this.getPos=t}get component(){return this.options.component}};Ai=new WeakSet,Ha=function(r){return r instanceof HTMLElement?r:document.createElement(r)};let uu=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");function de(r){this.content=r}de.prototype={constructor:de,find:function(r){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===r)return e;return-1},get:function(r){var e=this.find(r);return e==-1?void 0:this.content[e+1]},update:function(r,e,t){var n=t&&t!=r?this.remove(t):this,i=n.find(r),u=n.content.slice();return i==-1?u.push(t||r,e):(u[i+1]=e,t&&(u[i]=t)),new de(u)},remove:function(r){var e=this.find(r);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new de(t)},addToStart:function(r,e){return new de([r,e].concat(this.remove(r).content))},addToEnd:function(r,e){var t=this.remove(r).content.slice();return t.push(r,e),new de(t)},addBefore:function(r,e,t){var n=this.remove(e),i=n.content.slice(),u=n.find(r);return i.splice(u==-1?i.length:u,0,e,t),new de(i)},forEach:function(r){for(var e=0;e<this.content.length;e+=2)r(this.content[e],this.content[e+1])},prepend:function(r){return r=de.from(r),r.size?new de(r.content.concat(this.subtract(r).content)):this},append:function(r){return r=de.from(r),r.size?new de(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var e=this;r=de.from(r);for(var t=0;t<r.content.length;t+=2)e=e.remove(r.content[t]);return e},toObject:function(){var r={};return this.forEach(function(e,t){r[e]=t}),r},get size(){return this.content.length>>1}};de.from=function(r){if(r instanceof de)return r;var e=[];if(r)for(var t in r)e.push(t,r[t]);return new de(e)};function ja(r,e,t){for(let n=0;;n++){if(n==r.childCount||n==e.childCount)return r.childCount==e.childCount?null:t;let i=r.child(n),u=e.child(n);if(i==u){t+=i.nodeSize;continue}if(!i.sameMarkup(u))return t;if(i.isText&&i.text!=u.text){for(let l=0;i.text[l]==u.text[l];l++)t++;return t}if(i.content.size||u.content.size){let l=ja(i.content,u.content,t+1);if(l!=null)return l}t+=i.nodeSize}}function Wa(r,e,t,n){for(let i=r.childCount,u=e.childCount;;){if(i==0||u==0)return i==u?null:{a:t,b:n};let l=r.child(--i),o=e.child(--u),s=l.nodeSize;if(l==o){t-=s,n-=s;continue}if(!l.sameMarkup(o))return{a:t,b:n};if(l.isText&&l.text!=o.text){let a=0,c=Math.min(l.text.length,o.text.length);for(;a<c&&l.text[l.text.length-a-1]==o.text[o.text.length-a-1];)a++,t--,n--;return{a:t,b:n}}if(l.content.size||o.content.size){let a=Wa(l.content,o.content,t-1,n-1);if(a)return a}t-=s,n-=s}}class N{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,i=0,u){for(let l=0,o=0;o<t;l++){let s=this.content[l],a=o+s.nodeSize;if(a>e&&n(s,i+o,u||null,l)!==!1&&s.content.size){let c=o+1;s.nodesBetween(Math.max(0,e-c),Math.min(s.content.size,t-c),n,i+c)}o=a}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,i){let u="",l=!0;return this.nodesBetween(e,t,(o,s)=>{o.isText?(u+=o.text.slice(Math.max(e,s)-s,t-s),l=!n):o.isLeaf?(i?u+=typeof i=="function"?i(o):i:o.type.spec.leafText&&(u+=o.type.spec.leafText(o)),l=!n):!l&&o.isBlock&&(u+=n,l=!0)},0),u}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,i=this.content.slice(),u=0;for(t.isText&&t.sameMarkup(n)&&(i[i.length-1]=t.withText(t.text+n.text),u=1);u<e.content.length;u++)i.push(e.content[u]);return new N(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let n=[],i=0;if(t>e)for(let u=0,l=0;l<t;u++){let o=this.content[u],s=l+o.nodeSize;s>e&&((l<e||s>t)&&(o.isText?o=o.cut(Math.max(0,e-l),Math.min(o.text.length,t-l)):o=o.cut(Math.max(0,e-l-1),Math.min(o.content.size,t-l-1))),n.push(o),i+=o.nodeSize),l=s}return new N(n,i)}cutByIndex(e,t){return e==t?N.empty:e==0&&t==this.content.length?this:new N(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let i=this.content.slice(),u=this.size+t.nodeSize-n.nodeSize;return i[e]=t,new N(i,u)}addToStart(e){return new N([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new N(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let i=this.content[t];e(i,n,t),n+=i.nodeSize}}findDiffStart(e,t=0){return ja(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return Wa(this,e,t,n)}findIndex(e,t=-1){if(e==0)return Kn(0,e);if(e==this.size)return Kn(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,i=0;;n++){let u=this.child(n),l=i+u.nodeSize;if(l>=e)return l==e||t>0?Kn(n+1,l):Kn(n,i);i=l}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return N.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new N(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return N.empty;let t,n=0;for(let i=0;i<e.length;i++){let u=e[i];n+=u.nodeSize,i&&u.isText&&e[i-1].sameMarkup(u)?(t||(t=e.slice(0,i)),t[t.length-1]=u.withText(t[t.length-1].text+u.text)):t&&t.push(u)}return new N(t||e,n)}static from(e){if(!e)return N.empty;if(e instanceof N)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new N([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}N.empty=new N([],0);const Kr={index:0,offset:0};function Kn(r,e){return Kr.index=r,Kr.offset=e,Kr}function fr(r,e){if(r===e)return!0;if(!(r&&typeof r=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(r);if(Array.isArray(e)!=t)return!1;if(t){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!fr(r[n],e[n]))return!1}else{for(let n in r)if(!(n in e)||!fr(r[n],e[n]))return!1;for(let n in e)if(!(n in r))return!1}return!0}class U{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let i=0;i<e.length;i++){let u=e[i];if(this.eq(u))return e;if(this.type.excludes(u.type))t||(t=e.slice(0,i));else{if(u.type.excludes(this.type))return e;!n&&u.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),n=!0),t&&t.push(u)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&fr(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return U.none;if(e instanceof U)return[e];let t=e.slice();return t.sort((n,i)=>n.type.rank-i.type.rank),t}}U.none=[];class dr extends Error{}class B{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=Ja(this.content,e+this.openStart,t);return n&&new B(n,this.openStart,this.openEnd)}removeBetween(e,t){return new B(Ua(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return B.empty;let n=t.openStart||0,i=t.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new B(N.fromJSON(e,t.content),n,i)}static maxOpen(e,t=!0){let n=0,i=0;for(let u=e.firstChild;u&&!u.isLeaf&&(t||!u.type.spec.isolating);u=u.firstChild)n++;for(let u=e.lastChild;u&&!u.isLeaf&&(t||!u.type.spec.isolating);u=u.lastChild)i++;return new B(e,n,i)}}B.empty=new B(N.empty,0,0);function Ua(r,e,t){let{index:n,offset:i}=r.findIndex(e),u=r.maybeChild(n),{index:l,offset:o}=r.findIndex(t);if(i==e||u.isText){if(o!=t&&!r.child(l).isText)throw new RangeError("Removing non-flat range");return r.cut(0,e).append(r.cut(t))}if(n!=l)throw new RangeError("Removing non-flat range");return r.replaceChild(n,u.copy(Ua(u.content,e-i-1,t-i-1)))}function Ja(r,e,t,n){let{index:i,offset:u}=r.findIndex(e),l=r.maybeChild(i);if(u==e||l.isText)return n&&!n.canReplace(i,i,t)?null:r.cut(0,e).append(t).append(r.cut(e));let o=Ja(l.content,e-u-1,t);return o&&r.replaceChild(i,l.copy(o))}function Wd(r,e,t){if(t.openStart>r.depth)throw new dr("Inserted content deeper than insertion position");if(r.depth-t.openStart!=e.depth-t.openEnd)throw new dr("Inconsistent open depths");return Ka(r,e,t,0)}function Ka(r,e,t,n){let i=r.index(n),u=r.node(n);if(i==e.index(n)&&n<r.depth-t.openStart){let l=Ka(r,e,t,n+1);return u.copy(u.content.replaceChild(i,l))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&r.depth==n&&e.depth==n){let l=r.parent,o=l.content;return Bt(l,o.cut(0,r.parentOffset).append(t.content).append(o.cut(e.parentOffset)))}else{let{start:l,end:o}=Ud(t,r);return Bt(u,Za(r,l,o,e,n))}else return Bt(u,hr(r,e,n))}function Ga(r,e){if(!e.type.compatibleContent(r.type))throw new dr("Cannot join "+e.type.name+" onto "+r.type.name)}function Mi(r,e,t){let n=r.node(t);return Ga(n,e.node(t)),n}function Pt(r,e){let t=e.length-1;t>=0&&r.isText&&r.sameMarkup(e[t])?e[t]=r.withText(e[t].text+r.text):e.push(r)}function _n(r,e,t,n){let i=(e||r).node(t),u=0,l=e?e.index(t):i.childCount;r&&(u=r.index(t),r.depth>t?u++:r.textOffset&&(Pt(r.nodeAfter,n),u++));for(let o=u;o<l;o++)Pt(i.child(o),n);e&&e.depth==t&&e.textOffset&&Pt(e.nodeBefore,n)}function Bt(r,e){return r.type.checkContent(e),r.copy(e)}function Za(r,e,t,n,i){let u=r.depth>i&&Mi(r,e,i+1),l=n.depth>i&&Mi(t,n,i+1),o=[];return _n(null,r,i,o),u&&l&&e.index(i)==t.index(i)?(Ga(u,l),Pt(Bt(u,Za(r,e,t,n,i+1)),o)):(u&&Pt(Bt(u,hr(r,e,i+1)),o),_n(e,t,i,o),l&&Pt(Bt(l,hr(t,n,i+1)),o)),_n(n,null,i,o),new N(o)}function hr(r,e,t){let n=[];if(_n(null,r,t,n),r.depth>t){let i=Mi(r,e,t+1);Pt(Bt(i,hr(r,e,t+1)),n)}return _n(e,null,t,n),new N(n)}function Ud(r,e){let t=e.depth-r.openStart,i=e.node(t).copy(r.content);for(let u=t-1;u>=0;u--)i=e.node(u).copy(N.from(i));return{start:i.resolveNoCache(r.openStart+t),end:i.resolveNoCache(i.content.size-r.openEnd-t)}}class En{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(t);return n?e.child(t).cut(n):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let u=0;u<e;u++)i+=n.child(u).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return U.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),i=e.maybeChild(t);if(!n){let o=n;n=i,i=o}let u=n.marks;for(var l=0;l<u.length;l++)u[l].type.spec.inclusive===!1&&(!i||!u[l].isInSet(i.marks))&&(u=u[l--].removeFromSet(u));return u}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,i=e.parent.maybeChild(e.index());for(var u=0;u<n.length;u++)n[u].type.spec.inclusive===!1&&(!i||!n[u].isInSet(i.marks))&&(n=n[u--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new pr(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],i=0,u=t;for(let l=e;;){let{index:o,offset:s}=l.content.findIndex(u),a=u-s;if(n.push(l,o,i+s),!a||(l=l.child(o),l.isText))break;u=a-1,i+=s+1}return new En(t,n,u)}static resolveCached(e,t){for(let i=0;i<Gr.length;i++){let u=Gr[i];if(u.pos==t&&u.doc==e)return u}let n=Gr[Zr]=En.resolve(e,t);return Zr=(Zr+1)%Jd,n}}let Gr=[],Zr=0,Jd=12;class pr{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Kd=Object.create(null);let Lt=class Di{constructor(e,t,n,i=U.none){this.type=e,this.attrs=t,this.marks=i,this.content=n||N.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,i=0){this.content.nodesBetween(e,t,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,i){return this.content.textBetween(e,t,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&fr(this.attrs,t||e.defaultAttrs||Kd)&&U.sameSet(this.marks,n||U.none)}copy(e=null){return e==this.content?this:new Di(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Di(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return B.empty;let i=this.resolve(e),u=this.resolve(t),l=n?0:i.sharedDepth(t),o=i.start(l),a=i.node(l).content.cut(i.pos-o,u.pos-o);return new B(a,i.depth-l,u.depth-l)}replace(e,t,n){return Wd(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let i=this.content.child(t-1);return{node:i,index:t-1,offset:n-i.nodeSize}}resolve(e){return En.resolveCached(this,e)}resolveNoCache(e){return En.resolve(this,e)}rangeHasMark(e,t,n){let i=!1;return t>e&&this.nodesBetween(e,t,u=>(n.isInSet(u.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Qa(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=N.empty,i=0,u=n.childCount){let l=this.contentMatchAt(e).matchFragment(n,i,u),o=l&&l.matchFragment(this.content,t);if(!o||!o.validEnd)return!1;for(let s=i;s<u;s++)if(!this.type.allowsMarks(n.child(s).marks))return!1;return!0}canReplaceWith(e,t,n,i){if(i&&!this.type.allowsMarks(i))return!1;let u=this.contentMatchAt(e).matchType(n),l=u&&u.matchFragment(this.content,t);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=U.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!U.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let i=N.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,n)}};Lt.prototype.text=void 0;class mr extends Lt{constructor(e,t,n,i){if(super(e,t,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Qa(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new mr(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new mr(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Qa(r,e){for(let t=r.length-1;t>=0;t--)e=r[t].type.name+"("+e+")";return e}class Ht{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new Gd(e,t);if(n.next==null)return Ht.empty;let i=Ya(n);n.next&&n.err("Unexpected trailing text");let u=n0(t0(i));return r0(u,n),u}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let i=this;for(let u=t;i&&u<n;u++)i=i.matchType(e.child(u).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let i=[this];function u(l,o){let s=l.matchFragment(e,n);if(s&&(!t||s.validEnd))return N.from(o.map(a=>a.createAndFill()));for(let a=0;a<l.next.length;a++){let{type:c,next:f}=l.next[a];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=u(f,o.concat(c));if(d)return d}}return null}return u(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),u=i.match;if(u.matchType(e)){let l=[];for(let o=i;o.type;o=o.via)l.push(o.type);return l.reverse()}for(let l=0;l<u.next.length;l++){let{type:o,next:s}=u.next[l];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in t)&&(!i.type||s.validEnd)&&(n.push({match:o.contentMatch,type:o,via:i}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&t(n.next[i].next)}return t(this),e.map((n,i)=>{let u=i+(n.validEnd?"*":" ")+" ";for(let l=0;l<n.next.length;l++)u+=(l?", ":"")+n.next[l].type.name+"->"+e.indexOf(n.next[l].next);return u}).join(`
`)}}Ht.empty=new Ht(!0);class Gd{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Ya(r){let e=[];do e.push(Zd(r));while(r.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Zd(r){let e=[];do e.push(Qd(r));while(r.next&&r.next!=")"&&r.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Qd(r){let e=e0(r);for(;;)if(r.eat("+"))e={type:"plus",expr:e};else if(r.eat("*"))e={type:"star",expr:e};else if(r.eat("?"))e={type:"opt",expr:e};else if(r.eat("{"))e=Yd(r,e);else break;return e}function Wo(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");let e=Number(r.next);return r.pos++,e}function Yd(r,e){let t=Wo(r),n=t;return r.eat(",")&&(r.next!="}"?n=Wo(r):n=-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:t,max:n,expr:e}}function Xd(r,e){let t=r.nodeTypes,n=t[e];if(n)return[n];let i=[];for(let u in t){let l=t[u];l.groups.indexOf(e)>-1&&i.push(l)}return i.length==0&&r.err("No node type or group '"+e+"' found"),i}function e0(r){if(r.eat("(")){let e=Ya(r);return r.eat(")")||r.err("Missing closing paren"),e}else if(/\W/.test(r.next))r.err("Unexpected token '"+r.next+"'");else{let e=Xd(r,r.next).map(t=>(r.inline==null?r.inline=t.isInline:r.inline!=t.isInline&&r.err("Mixing inline and block content"),{type:"name",value:t}));return r.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function t0(r){let e=[[]];return i(u(r,0),t()),e;function t(){return e.push([])-1}function n(l,o,s){let a={term:s,to:o};return e[l].push(a),a}function i(l,o){l.forEach(s=>s.to=o)}function u(l,o){if(l.type=="choice")return l.exprs.reduce((s,a)=>s.concat(u(a,o)),[]);if(l.type=="seq")for(let s=0;;s++){let a=u(l.exprs[s],o);if(s==l.exprs.length-1)return a;i(a,o=t())}else if(l.type=="star"){let s=t();return n(o,s),i(u(l.expr,s),s),[n(s)]}else if(l.type=="plus"){let s=t();return i(u(l.expr,o),s),i(u(l.expr,s),s),[n(s)]}else{if(l.type=="opt")return[n(o)].concat(u(l.expr,o));if(l.type=="range"){let s=o;for(let a=0;a<l.min;a++){let c=t();i(u(l.expr,s),c),s=c}if(l.max==-1)i(u(l.expr,s),s);else for(let a=l.min;a<l.max;a++){let c=t();n(s,c),i(u(l.expr,s),c),s=c}return[n(s)]}else{if(l.type=="name")return[n(o,void 0,l.value)];throw new Error("Unknown expr type")}}}}function Xa(r,e){return e-r}function Uo(r,e){let t=[];return n(e),t.sort(Xa);function n(i){let u=r[i];if(u.length==1&&!u[0].term)return n(u[0].to);t.push(i);for(let l=0;l<u.length;l++){let{term:o,to:s}=u[l];!o&&t.indexOf(s)==-1&&n(s)}}}function n0(r){let e=Object.create(null);return t(Uo(r,0));function t(n){let i=[];n.forEach(l=>{r[l].forEach(({term:o,to:s})=>{if(!o)return;let a;for(let c=0;c<i.length;c++)i[c][0]==o&&(a=i[c][1]);Uo(r,s).forEach(c=>{a||i.push([o,a=[]]),a.indexOf(c)==-1&&a.push(c)})})});let u=e[n.join(",")]=new Ht(n.indexOf(r.length-1)>-1);for(let l=0;l<i.length;l++){let o=i[l][1].sort(Xa);u.next.push({type:i[l][0],next:e[o.join(",")]||t(o)})}return u}}function r0(r,e){for(let t=0,n=[r];t<n.length;t++){let i=n[t],u=!i.validEnd,l=[];for(let o=0;o<i.next.length;o++){let{type:s,next:a}=i.next[o];l.push(s.name),u&&!(s.isText||s.hasRequiredAttrs())&&(u=!1),n.indexOf(a)==-1&&n.push(a)}u&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function ec(r){let e=Object.create(null);for(let t in r){let n=r[t];if(!n.hasDefault)return null;e[t]=n.default}return e}function tc(r,e){let t=Object.create(null);for(let n in r){let i=e&&e[n];if(i===void 0){let u=r[n];if(u.hasDefault)i=u.default;else throw new RangeError("No value supplied for attribute "+n)}t[n]=i}return t}function nc(r){let e=Object.create(null);if(r)for(let t in r)e[t]=new i0(r[t]);return e}let Jo=class rc{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=nc(n.attrs),this.defaultAttrs=ec(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ht.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:tc(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Lt(this,this.computeAttrs(e),N.from(t),U.setFrom(n))}createChecked(e=null,t,n){return t=N.from(t),this.checkContent(t),new Lt(this,this.computeAttrs(e),t,U.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),t=N.from(t),t.size){let l=this.contentMatch.fillBefore(t);if(!l)return null;t=l.append(t)}let i=this.contentMatch.matchFragment(t),u=i&&i.fillBefore(N.empty,!0);return u?new Lt(this,e,t.append(u),U.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:U.none:e}static compile(e,t){let n=Object.create(null);e.forEach((u,l)=>n[u]=new rc(u,t,l));let i=t.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let u in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};class i0{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class zr{constructor(e,t,n,i){this.name=e,this.rank=t,this.schema=n,this.spec=i,this.attrs=nc(i.attrs),this.excluded=null;let u=ec(this.attrs);this.instance=u?new U(this,u):null}create(e=null){return!e&&this.instance?this.instance:new U(this,tc(this.attrs,e))}static compile(e,t){let n=Object.create(null),i=0;return e.forEach((u,l)=>n[u]=new zr(u,i++,t,l)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class u0{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=de.from(e.nodes),t.marks=de.from(e.marks||{}),this.nodes=Jo.compile(this.spec.nodes,this),this.marks=zr.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let u=this.nodes[i],l=u.spec.content||"",o=u.spec.marks;u.contentMatch=n[l]||(n[l]=Ht.parse(l,this.nodes)),u.inlineContent=u.contentMatch.inlineContent,u.markSet=o=="_"?null:o?Ko(this,o.split(" ")):o==""||!u.inlineContent?[]:null}for(let i in this.marks){let u=this.marks[i],l=u.spec.excludes;u.excluded=l==null?[u]:l==""?[]:Ko(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Jo){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,n,i)}text(e,t){let n=this.nodes.text;return new mr(n,n.defaultAttrs,e,U.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Lt.fromJSON(this,e)}markFromJSON(e){return U.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Ko(r,e){let t=[];for(let n=0;n<e.length;n++){let i=e[n],u=r.marks[i],l=u;if(u)t.push(u);else for(let o in r.marks){let s=r.marks[o];(i=="_"||s.spec.group&&s.spec.group.split(" ").indexOf(i)>-1)&&t.push(l=s)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return t}class An{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(n=>{n.tag?this.tags.push(n):n.style&&this.styles.push(n)}),this.normalizeLists=!this.tags.some(n=>{if(!/^(ul|ol)\b/.test(n.tag)||!n.node)return!1;let i=e.nodes[n.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let n=new Zo(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new Zo(this,t,!0);return n.addAll(e,t.from,t.to),B.maxOpen(n.finish())}matchTag(e,t,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let u=this.tags[i];if(s0(e,u.tag)&&(u.namespace===void 0||e.namespaceURI==u.namespace)&&(!u.context||t.matchesContext(u.context))){if(u.getAttrs){let l=u.getAttrs(e);if(l===!1)continue;u.attrs=l||void 0}return u}}}matchStyle(e,t,n,i){for(let u=i?this.styles.indexOf(i)+1:0;u<this.styles.length;u++){let l=this.styles[u],o=l.style;if(!(o.indexOf(e)!=0||l.context&&!n.matchesContext(l.context)||o.length>e.length&&(o.charCodeAt(e.length)!=61||o.slice(e.length+1)!=t))){if(l.getAttrs){let s=l.getAttrs(t);if(s===!1)continue;l.attrs=s||void 0}return l}}}static schemaRules(e){let t=[];function n(i){let u=i.priority==null?50:i.priority,l=0;for(;l<t.length;l++){let o=t[l];if((o.priority==null?50:o.priority)<u)break}t.splice(l,0,i)}for(let i in e.marks){let u=e.marks[i].spec.parseDOM;u&&u.forEach(l=>{n(l=Qo(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let u=e.nodes[i].spec.parseDOM;u&&u.forEach(l=>{n(l=Qo(l)),l.node||l.ignore||l.mark||(l.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new An(e,An.schemaRules(e)))}}const ic={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},l0={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},uc={ol:!0,ul:!0},gr=1,br=2,kn=4;function Go(r,e,t){return e!=null?(e?gr:0)|(e==="full"?br:0):r&&r.whitespace=="pre"?gr|br:t&~kn}class Gn{constructor(e,t,n,i,u,l,o){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=i,this.solid=u,this.options=o,this.content=[],this.activeMarks=U.none,this.stashMarks=[],this.match=l||(o&kn?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(N.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&gr)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let u=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=u.withText(u.text.slice(0,u.text.length-i[0].length))}}let t=N.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(N.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let i=n[t];(this.type?this.type.allowsMarkType(i.type):c0(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ic.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Zo{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let i=t.topNode,u,l=Go(null,t.preserveWhitespace,0)|(n?kn:0);i?u=new Gn(i.type,i.attrs,U.none,U.none,!0,t.topMatch||i.type.contentMatch,l):n?u=new Gn(null,null,U.none,U.none,!0,null,l):u=new Gn(e.schema.topNodeType,null,U.none,U.none,!0,null,l),this.nodes=[u],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let n=e.getAttribute("style");if(!n)return t();let i=this.readStyles(a0(n));if(!i)return;let[u,l]=i,o=this.top;for(let s=0;s<l.length;s++)this.removePendingMark(l[s],o);for(let s=0;s<u.length;s++)this.addPendingMark(u[s]);t();for(let s=0;s<u.length;s++)this.removePendingMark(u[s],o);for(let s=0;s<l.length;s++)this.addPendingMark(l[s])}addTextNode(e){let t=e.nodeValue,n=this.top;if(n.options&br||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(n.options&gr)n.options&br?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=n.content[n.content.length-1],u=e.previousSibling;(!i||u&&u.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n=e.nodeName.toLowerCase(),i;uc.hasOwnProperty(n)&&this.parser.normalizeLists&&o0(e);let u=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(u?u.ignore:l0.hasOwnProperty(n))this.findInside(e),this.ignoreFallback(e);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(e=u.skip);let l,o=this.top,s=this.needsBlock;if(ic.hasOwnProperty(n))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),l=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}u&&u.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),l&&this.sync(o),this.needsBlock=s}else this.withStyleRules(e,()=>{this.addElementByRule(e,u,u.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=U.none,n=U.none;for(let i=0;i<e.length;i+=2)for(let u=void 0;;){let l=this.parser.matchStyle(e[i],e[i+1],this,u);if(!l)break;if(l.ignore)return null;if(l.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(o=>{l.clearMark(o)&&(n=o.addToSet(n))}):t=this.parser.schema.marks[l.mark].create(l.attrs).addToSet(t),l.consuming===!1)u=l;else break}return[t,n]}addElementByRule(e,t,n){let i,u,l;t.node?(u=this.parser.schema.nodes[t.node],u.isLeaf?this.insertNode(u.create(t.attrs))||this.leafFallback(e):i=this.enter(u,t.attrs||null,t.preserveWhitespace)):(l=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(l));let o=this.top;if(u&&u.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(s=>this.insertNode(s));else{let s=e;typeof t.contentElement=="string"?s=e.querySelector(t.contentElement):typeof t.contentElement=="function"?s=t.contentElement(e):t.contentElement&&(s=t.contentElement),this.findAround(e,s,!0),this.addAll(s)}i&&this.sync(o)&&this.open--,l&&this.removePendingMark(l,o)}addAll(e,t,n){let i=t||0;for(let u=t?e.childNodes[t]:e.firstChild,l=n==null?null:e.childNodes[n];u!=l;u=u.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(u);this.findAtPoint(e,i)}findPlace(e){let t,n;for(let i=this.open;i>=0;i--){let u=this.nodes[i],l=u.findWrapping(e);if(l&&(!t||t.length>l.length)&&(t=l,n=u,!l.length)||u.solid)break}if(!t)return!1;this.sync(n);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(n=e.marks[i].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,n),i}enterInner(e,t=null,n=!1,i){this.closeExtra();let u=this.top;u.applyPending(e),u.match=u.match&&u.match.matchType(e);let l=Go(e,i,u.options);u.options&kn&&u.content.length==0&&(l|=kn),this.nodes.push(new Gn(e,t,u.activeMarks,u.pendingMarks,n,null,l)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),u=-(n?n.depth+1:0)+(i?0:1),l=(o,s)=>{for(;o>=0;o--){let a=t[o];if(a==""){if(o==t.length-1||o==0)continue;for(;s>=u;s--)if(l(o-1,s))return!0;return!1}else{let c=s>0||s==0&&i?this.nodes[s].type:n&&s>=u?n.node(s-u).type:null;if(!c||c.name!=a&&c.groups.indexOf(a)==-1)return!1;s--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let n=this.parser.schema.nodes[t];if(n.isTextblock&&n.defaultAttrs)return n}}addPendingMark(e){let t=f0(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let i=this.nodes[n];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let l=i.popFromStashMark(e);l&&i.type&&i.type.allowsMarkType(l.type)&&(i.activeMarks=l.addToSet(i.activeMarks))}if(i==t)break}}}function o0(r){for(let e=r.firstChild,t=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&uc.hasOwnProperty(n)&&t?(t.appendChild(e),e=t):n=="li"?t=e:n&&(t=null)}}function s0(r,e){return(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,e)}function a0(r){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,n=[];for(;t=e.exec(r);)n.push(t[1],t[2].trim());return n}function Qo(r){let e={};for(let t in r)e[t]=r[t];return e}function c0(r,e){let t=e.schema.nodes;for(let n in t){let i=t[n];if(!i.allowsMarkType(r))continue;let u=[],l=o=>{u.push(o);for(let s=0;s<o.edgeCount;s++){let{type:a,next:c}=o.edge(s);if(a==e||u.indexOf(c)<0&&l(c))return!0}};if(l(i.contentMatch))return!0}}function f0(r,e){for(let t=0;t<e.length;t++)if(r.eq(e[t]))return e[t]}class st{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=Qr(t).createDocumentFragment());let i=n,u=[];return e.forEach(l=>{if(u.length||l.marks.length){let o=0,s=0;for(;o<u.length&&s<l.marks.length;){let a=l.marks[s];if(!this.marks[a.type.name]){s++;continue}if(!a.eq(u[o][0])||a.type.spec.spanning===!1)break;o++,s++}for(;o<u.length;)i=u.pop()[1];for(;s<l.marks.length;){let a=l.marks[s++],c=this.serializeMark(a,l.isInline,t);c&&(u.push([a,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(l,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:i}=st.renderSpec(Qr(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let u=this.serializeMark(e.marks[i],e.isInline,t);u&&((u.contentDOM||u.dom).appendChild(n),n=u.dom)}return n}serializeMark(e,t,n={}){let i=this.marks[e.type.name];return i&&st.renderSpec(Qr(n),i(e,t))}static renderSpec(e,t,n=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],u=i.indexOf(" ");u>0&&(n=i.slice(0,u),i=i.slice(u+1));let l,o=n?e.createElementNS(n,i):e.createElement(i),s=t[1],a=1;if(s&&typeof s=="object"&&s.nodeType==null&&!Array.isArray(s)){a=2;for(let c in s)if(s[c]!=null){let f=c.indexOf(" ");f>0?o.setAttributeNS(c.slice(0,f),c.slice(f+1),s[c]):o.setAttribute(c,s[c])}}for(let c=a;c<t.length;c++){let f=t[c];if(f===0){if(c<t.length-1||c>a)throw new RangeError("Content hole must be the only child of its parent node");return{dom:o,contentDOM:o}}else{let{dom:d,contentDOM:h}=st.renderSpec(e,f,n);if(o.appendChild(d),h){if(l)throw new RangeError("Multiple content holes");l=h}}}return{dom:o,contentDOM:l}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new st(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Yo(e.nodes);return t.text||(t.text=n=>n.text),t}static marksFromSchema(e){return Yo(e.marks)}}function Yo(r){let e={};for(let t in r){let n=r[t].spec.toDOM;n&&(e[t]=n)}return e}function Qr(r){return r.document||window.document}const lc=65535,oc=Math.pow(2,16);function d0(r,e){return r+e*oc}function Xo(r){return r&lc}function h0(r){return(r-(r&lc))/oc}const sc=1,ac=2,rr=4,cc=8;class Ti{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(this.delInfo&cc)>0}get deletedBefore(){return(this.delInfo&(sc|rr))>0}get deletedAfter(){return(this.delInfo&(ac|rr))>0}get deletedAcross(){return(this.delInfo&rr)>0}}class Ne{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Ne.empty)return Ne.empty}recover(e){let t=0,n=Xo(e);if(!this.inverted)for(let i=0;i<n;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+t+h0(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let i=0,u=this.inverted?2:1,l=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let s=this.ranges[o]-(this.inverted?i:0);if(s>e)break;let a=this.ranges[o+u],c=this.ranges[o+l],f=s+a;if(e<=f){let d=a?e==s?-1:e==f?1:t:t,h=s+i+(d<0?0:c);if(n)return h;let p=e==(t<0?s:f)?null:d0(o/3,e-s),m=e==s?ac:e==f?sc:rr;return(t<0?e!=s:e!=f)&&(m|=cc),new Ti(h,m,p)}i+=c-a}return n?e+i:new Ti(e+i,0,null)}touches(e,t){let n=0,i=Xo(t),u=this.inverted?2:1,l=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let s=this.ranges[o]-(this.inverted?n:0);if(s>e)break;let a=this.ranges[o+u],c=s+a;if(e<=c&&o==i*3)return!0;n+=this.ranges[o+l]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,u=0;i<this.ranges.length;i+=3){let l=this.ranges[i],o=l-(this.inverted?u:0),s=l+(this.inverted?0:u),a=this.ranges[i+t],c=this.ranges[i+n];e(o,o+a,s,s+c),u+=c-a}}invert(){return new Ne(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ne.empty:new Ne(e<0?[0,-e,0]:[0,0,e])}}Ne.empty=new Ne([]);class Yt{constructor(e=[],t,n=0,i=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=i}slice(e=0,t=this.maps.length){return new Yt(this.maps,this.mirror,e,t)}copy(){return new Yt(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?n+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?n-i-1:void 0)}}invert(){let e=new Yt;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let i=0;for(let u=this.from;u<this.to;u++){let l=this.maps[u],o=l.mapResult(e,t);if(o.recover!=null){let s=this.getMirror(u);if(s!=null&&s>u&&s<this.to){u=s,e=this.maps[s].recover(o.recover);continue}}i|=o.delInfo,e=o.pos}return n?e:new Ti(e,i,null)}}const Yr=Object.create(null);class ye{getMap(){return Ne.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Yr[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Yr)throw new RangeError("Duplicate use of step JSON ID "+e);return Yr[e]=t,t.prototype.jsonID=e,t}}class oe{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new oe(e,null)}static fail(e){return new oe(null,e)}static fromReplace(e,t,n,i){try{return oe.ok(e.replace(t,n,i))}catch(u){if(u instanceof dr)return oe.fail(u.message);throw u}}}function lu(r,e,t){let n=[];for(let i=0;i<r.childCount;i++){let u=r.child(i);u.content.size&&(u=u.copy(lu(u.content,e,u))),u.isInline&&(u=e(u,t,i)),n.push(u)}return N.fromArray(n)}class kt extends ye{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),u=new B(lu(t.content,(l,o)=>!l.isAtom||!o.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),t.openStart,t.openEnd);return oe.fromReplace(e,this.from,this.to,u)}invert(){return new Qe(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new kt(t.pos,n.pos,this.mark)}merge(e){return e instanceof kt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new kt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new kt(t.from,t.to,e.markFromJSON(t.mark))}}ye.jsonID("addMark",kt);class Qe extends ye{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new B(lu(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return oe.fromReplace(e,this.from,this.to,n)}invert(){return new kt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Qe(t.pos,n.pos,this.mark)}merge(e){return e instanceof Qe&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Qe(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Qe(t.from,t.to,e.markFromJSON(t.mark))}}ye.jsonID("removeMark",Qe);class yt extends ye{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return oe.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return oe.fromReplace(e,this.pos,this.pos+1,new B(N.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let n=this.mark.addToSet(t.marks);if(n.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(n))return new yt(this.pos,t.marks[i]);return new yt(this.pos,this.mark)}}return new un(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new yt(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new yt(t.pos,e.markFromJSON(t.mark))}}ye.jsonID("addNodeMark",yt);class un extends ye{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return oe.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return oe.fromReplace(e,this.pos,this.pos+1,new B(N.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new yt(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new un(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new un(t.pos,e.markFromJSON(t.mark))}}ye.jsonID("removeNodeMark",un);class _e extends ye{constructor(e,t,n,i=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=i}apply(e){return this.structure&&Ni(e,this.from,this.to)?oe.fail("Structure replace would overwrite content"):oe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ne([this.from,this.to-this.from,this.slice.size])}invert(e){return new _e(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new _e(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof _e)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?B.empty:new B(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new _e(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?B.empty:new B(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new _e(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new _e(t.from,t.to,B.fromJSON(e,t.slice),!!t.structure)}}ye.jsonID("replace",_e);class pe extends ye{constructor(e,t,n,i,u,l,o=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=i,this.slice=u,this.insert=l,this.structure=o}apply(e){if(this.structure&&(Ni(e,this.from,this.gapFrom)||Ni(e,this.gapTo,this.to)))return oe.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return oe.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?oe.fromReplace(e,this.from,this.to,n):oe.fail("Content does not fit in gap")}getMap(){return new Ne([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new pe(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),u=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||i<t.pos||u>n.pos?null:new pe(t.pos,n.pos,i,u,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new pe(t.from,t.to,t.gapFrom,t.gapTo,B.fromJSON(e,t.slice),t.insert,!!t.structure)}}ye.jsonID("replaceAround",pe);function Ni(r,e,t){let n=r.resolve(e),i=t-e,u=n.depth;for(;i>0&&u>0&&n.indexAfter(u)==n.node(u).childCount;)u--,i--;if(i>0){let l=n.node(u).maybeChild(n.indexAfter(u));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function p0(r,e,t,n){let i=[],u=[],l,o;r.doc.nodesBetween(e,t,(s,a,c)=>{if(!s.isInline)return;let f=s.marks;if(!n.isInSet(f)&&c.type.allowsMarkType(n.type)){let d=Math.max(a,e),h=Math.min(a+s.nodeSize,t),p=n.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(p)||(l&&l.to==d&&l.mark.eq(f[m])?l.to=h:i.push(l=new Qe(d,h,f[m])));o&&o.to==d?o.to=h:u.push(o=new kt(d,h,n))}}),i.forEach(s=>r.step(s)),u.forEach(s=>r.step(s))}function m0(r,e,t,n){let i=[],u=0;r.doc.nodesBetween(e,t,(l,o)=>{if(!l.isInline)return;u++;let s=null;if(n instanceof zr){let a=l.marks,c;for(;c=n.isInSet(a);)(s||(s=[])).push(c),a=c.removeFromSet(a)}else n?n.isInSet(l.marks)&&(s=[n]):s=l.marks;if(s&&s.length){let a=Math.min(o+l.nodeSize,t);for(let c=0;c<s.length;c++){let f=s[c],d;for(let h=0;h<i.length;h++){let p=i[h];p.step==u-1&&f.eq(i[h].style)&&(d=p)}d?(d.to=a,d.step=u):i.push({style:f,from:Math.max(o,e),to:a,step:u})}}}),i.forEach(l=>r.step(new Qe(l.from,l.to,l.style)))}function g0(r,e,t,n=t.contentMatch){let i=r.doc.nodeAt(e),u=[],l=e+1;for(let o=0;o<i.childCount;o++){let s=i.child(o),a=l+s.nodeSize,c=n.matchType(s.type);if(!c)u.push(new _e(l,a,B.empty));else{n=c;for(let f=0;f<s.marks.length;f++)t.allowsMarkType(s.marks[f].type)||r.step(new Qe(l,a,s.marks[f]));if(s.isText&&!t.spec.code){let f,d=/\r?\n|\r/g,h;for(;f=d.exec(s.text);)h||(h=new B(N.from(t.schema.text(" ",t.allowedMarks(s.marks))),0,0)),u.push(new _e(l+f.index,l+f.index+f[0].length,h))}}l=a}if(!n.validEnd){let o=n.fillBefore(N.empty,!0);r.replace(l,l,new B(o,0,0))}for(let o=u.length-1;o>=0;o--)r.step(u[o])}function b0(r,e,t){return(e==0||r.canReplace(e,r.childCount))&&(t==r.childCount||r.canReplace(0,t))}function $n(r){let t=r.parent.content.cutByIndex(r.startIndex,r.endIndex);for(let n=r.depth;;--n){let i=r.$from.node(n),u=r.$from.index(n),l=r.$to.indexAfter(n);if(n<r.depth&&i.canReplace(u,l,t))return n;if(n==0||i.type.spec.isolating||!b0(i,u,l))break}return null}function _0(r,e,t){let{$from:n,$to:i,depth:u}=e,l=n.before(u+1),o=i.after(u+1),s=l,a=o,c=N.empty,f=0;for(let p=u,m=!1;p>t;p--)m||n.index(p)>0?(m=!0,c=N.from(n.node(p).copy(c)),f++):s--;let d=N.empty,h=0;for(let p=u,m=!1;p>t;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=N.from(i.node(p).copy(d)),h++):a++;r.step(new pe(s,a,l,o,new B(c.append(d),f,h),c.size-f,!0))}function ou(r,e,t=null,n=r){let i=k0(r,e),u=i&&y0(n,e);return u?i.map(es).concat({type:e,attrs:t}).concat(u.map(es)):null}function es(r){return{type:r,attrs:null}}function k0(r,e){let{parent:t,startIndex:n,endIndex:i}=r,u=t.contentMatchAt(n).findWrapping(e);if(!u)return null;let l=u.length?u[0]:e;return t.canReplaceWith(n,i,l)?u:null}function y0(r,e){let{parent:t,startIndex:n,endIndex:i}=r,u=t.child(n),l=e.contentMatch.findWrapping(u.type);if(!l)return null;let s=(l.length?l[l.length-1]:e).contentMatch;for(let a=n;s&&a<i;a++)s=s.matchType(t.child(a).type);return!s||!s.validEnd?null:l}function x0(r,e,t){let n=N.empty;for(let l=t.length-1;l>=0;l--){if(n.size){let o=t[l].type.contentMatch.matchFragment(n);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=N.from(t[l].type.create(t[l].attrs,n))}let i=e.start,u=e.end;r.step(new pe(i,u,i,u,new B(n,0,0),t.length,!0))}function w0(r,e,t,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let u=r.steps.length;r.doc.nodesBetween(e,t,(l,o)=>{if(l.isTextblock&&!l.hasMarkup(n,i)&&C0(r.doc,r.mapping.slice(u).map(o),n)){r.clearIncompatible(r.mapping.slice(u).map(o,1),n);let s=r.mapping.slice(u),a=s.map(o,1),c=s.map(o+l.nodeSize,1);return r.step(new pe(a,c,a+1,c-1,new B(N.from(n.create(i,null,l.marks)),0,0),1,!0)),!1}})}function C0(r,e,t){let n=r.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,t)}function v0(r,e,t,n,i){let u=r.doc.nodeAt(e);if(!u)throw new RangeError("No node at given position");t||(t=u.type);let l=t.create(n,null,i||u.marks);if(u.isLeaf)return r.replaceWith(e,e+u.nodeSize,l);if(!t.validContent(u.content))throw new RangeError("Invalid content for node type "+t.name);r.step(new pe(e,e+u.nodeSize,e+1,e+u.nodeSize-1,new B(N.from(l),0,0),1,!0))}function Xt(r,e,t=1,n){let i=r.resolve(e),u=i.depth-t,l=n&&n[n.length-1]||i.parent;if(u<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let a=i.depth-1,c=t-2;a>u;a--,c--){let f=i.node(a),d=i.index(a);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=n&&n[c+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=n&&n[c]||f;if(!f.canReplace(d+1,f.childCount)||!m.type.validContent(h))return!1}let o=i.indexAfter(u),s=n&&n[0];return i.node(u).canReplaceWith(o,o,s?s.type:i.node(u+1).type)}function S0(r,e,t=1,n){let i=r.doc.resolve(e),u=N.empty,l=N.empty;for(let o=i.depth,s=i.depth-t,a=t-1;o>s;o--,a--){u=N.from(i.node(o).copy(u));let c=n&&n[a];l=N.from(c?c.type.create(c.attrs,l):i.node(o).copy(l))}r.step(new _e(e,e,new B(u.append(l),t,t),!0))}function cn(r,e){let t=r.resolve(e),n=t.index();return fc(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(n,n+1)}function fc(r,e){return!!(r&&e&&!r.isLeaf&&r.canAppend(e))}function dc(r,e,t=-1){let n=r.resolve(e);for(let i=n.depth;;i--){let u,l,o=n.index(i);if(i==n.depth?(u=n.nodeBefore,l=n.nodeAfter):t>0?(u=n.node(i+1),o++,l=n.node(i).maybeChild(o)):(u=n.node(i).maybeChild(o-1),l=n.node(i+1)),u&&!u.isTextblock&&fc(u,l)&&n.node(i).canReplace(o,o+1))return e;if(i==0)break;e=t<0?n.before(i):n.after(i)}}function E0(r,e,t){let n=new _e(e-t,e+t,B.empty,!0);r.step(n)}function A0(r,e,t){let n=r.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),t))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let u=n.index(i);if(n.node(i).canReplaceWith(u,u,t))return n.before(i+1);if(u>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let u=n.indexAfter(i);if(n.node(i).canReplaceWith(u,u,t))return n.after(i+1);if(u<n.node(i).childCount)return null}return null}function hc(r,e,t){let n=r.resolve(e);if(!t.content.size)return e;let i=t.content;for(let u=0;u<t.openStart;u++)i=i.firstChild.content;for(let u=1;u<=(t.openStart==0&&t.size?2:1);u++)for(let l=n.depth;l>=0;l--){let o=l==n.depth?0:n.pos<=(n.start(l+1)+n.end(l+1))/2?-1:1,s=n.index(l)+(o>0?1:0),a=n.node(l),c=!1;if(u==1)c=a.canReplace(s,s,i);else{let f=a.contentMatchAt(s).findWrapping(i.firstChild.type);c=f&&a.canReplaceWith(s,s,f[0])}if(c)return o==0?n.pos:o<0?n.before(l+1):n.after(l+1)}return null}function su(r,e,t=e,n=B.empty){if(e==t&&!n.size)return null;let i=r.resolve(e),u=r.resolve(t);return pc(i,u,n)?new _e(e,t,n):new M0(i,u,n).fit()}function pc(r,e,t){return!t.openStart&&!t.openEnd&&r.start()==e.start()&&r.parent.canReplace(r.index(),e.index(),t.content)}class M0{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=N.empty;for(let i=0;i<=e.depth;i++){let u=e.node(i);this.frontier.push({type:u.type,match:u.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=N.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let a=this.findFittable();a?this.placeNodes(a):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let u=this.placed,l=n.depth,o=i.depth;for(;l&&o&&u.childCount==1;)u=u.firstChild.content,l--,o--;let s=new B(u,l,o);return e>-1?new pe(n.pos,e,this.$to.pos,this.$to.end(),s,t):s.size||n.pos!=this.$to.pos?new _e(n.pos,i.pos,s):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let u=t.firstChild;if(t.childCount>1&&(i=0),u.type.spec.isolating&&i<=n){e=n;break}t=u.content}for(let t=1;t<=2;t++)for(let n=t==1?e:this.unplaced.openStart;n>=0;n--){let i,u=null;n?(u=Xr(this.unplaced.content,n-1).firstChild,i=u.content):i=this.unplaced.content;let l=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:s,match:a}=this.frontier[o],c,f=null;if(t==1&&(l?a.matchType(l.type)||(f=a.fillBefore(N.from(l),!1)):u&&s.compatibleContent(u.type)))return{sliceDepth:n,frontierDepth:o,parent:u,inject:f};if(t==2&&l&&(c=a.findWrapping(l.type)))return{sliceDepth:n,frontierDepth:o,parent:u,wrap:c};if(u&&a.matchType(u.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,i=Xr(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new B(e,t+1,Math.max(n,i.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,i=Xr(e,t);if(i.childCount<=1&&t>0){let u=e.size-t<=t+i.size;this.unplaced=new B(mn(e,t-1,1),t-1,u?t-1:n)}else this.unplaced=new B(mn(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:i,wrap:u}){for(;this.depth>t;)this.closeFrontierNode();if(u)for(let m=0;m<u.length;m++)this.openFrontierNode(u[m]);let l=this.unplaced,o=n?n.content:l.content,s=l.openStart-e,a=0,c=[],{match:f,type:d}=this.frontier[t];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));f=f.matchFragment(i)}let h=o.size+e-(l.content.size-l.openEnd);for(;a<o.childCount;){let m=o.child(a),g=f.matchType(m.type);if(!g)break;a++,(a>1||s==0||m.content.size)&&(f=g,c.push(mc(m.mark(d.allowedMarks(m.marks)),a==1?s:0,a==o.childCount?h:-1)))}let p=a==o.childCount;p||(h=-1),this.placed=gn(this.placed,t,N.from(c)),this.frontier[t].match=f,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=o;m<h;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?e==0?B.empty:new B(mn(l.content,e-1,1),e-1,h<0?l.openEnd:e-1):new B(mn(l.content,e,a),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!ei(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:i}=this.frontier[t],u=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=ei(e,t,i,n,u);if(l){for(let o=t-1;o>=0;o--){let{match:s,type:a}=this.frontier[o],c=ei(e,o,a,s,!0);if(!c||c.childCount)continue e}return{depth:t,fit:l,move:u?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=gn(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let i=e.node(n),u=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,u)}return e}openFrontierNode(e,t=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=gn(this.placed,this.depth,N.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(N.empty,!0);t.childCount&&(this.placed=gn(this.placed,this.frontier.length,t))}}function mn(r,e,t){return e==0?r.cutByIndex(t,r.childCount):r.replaceChild(0,r.firstChild.copy(mn(r.firstChild.content,e-1,t)))}function gn(r,e,t){return e==0?r.append(t):r.replaceChild(r.childCount-1,r.lastChild.copy(gn(r.lastChild.content,e-1,t)))}function Xr(r,e){for(let t=0;t<e;t++)r=r.firstChild.content;return r}function mc(r,e,t){if(e<=0)return r;let n=r.content;return e>1&&(n=n.replaceChild(0,mc(n.firstChild,e-1,n.childCount==1?t-1:0))),e>0&&(n=r.type.contentMatch.fillBefore(n).append(n),t<=0&&(n=n.append(r.type.contentMatch.matchFragment(n).fillBefore(N.empty,!0)))),r.copy(n)}function ei(r,e,t,n,i){let u=r.node(e),l=i?r.indexAfter(e):r.index(e);if(l==u.childCount&&!t.compatibleContent(u.type))return null;let o=n.fillBefore(u.content,!0,l);return o&&!D0(t,u.content,l)?o:null}function D0(r,e,t){for(let n=t;n<e.childCount;n++)if(!r.allowsMarks(e.child(n).marks))return!0;return!1}function T0(r){return r.spec.defining||r.spec.definingForContent}function N0(r,e,t,n){if(!n.size)return r.deleteRange(e,t);let i=r.doc.resolve(e),u=r.doc.resolve(t);if(pc(i,u,n))return r.step(new _e(e,t,n));let l=bc(i,r.doc.resolve(t));l[l.length-1]==0&&l.pop();let o=-(i.depth+1);l.unshift(o);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;l.indexOf(d)>-1?o=d:i.before(d)==h&&l.splice(1,0,-d)}let s=l.indexOf(o),a=[],c=n.openStart;for(let d=n.content,h=0;;h++){let p=d.firstChild;if(a.push(p),h==n.openStart)break;d=p.content}for(let d=c-1;d>=0;d--){let h=a[d],p=T0(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(o)-1)))c=d;else if(p||!h.type.isTextblock)break}for(let d=n.openStart;d>=0;d--){let h=(d+c+1)%(n.openStart+1),p=a[h];if(p)for(let m=0;m<l.length;m++){let g=l[(m+s)%l.length],y=!0;g<0&&(y=!1,g=-g);let w=i.node(g-1),k=i.index(g-1);if(w.canReplaceWith(k,k,p.type,p.marks))return r.replace(i.before(g),y?u.after(g):t,new B(gc(n.content,0,n.openStart,h),h,n.openEnd))}}let f=r.steps.length;for(let d=l.length-1;d>=0&&(r.replace(e,t,n),!(r.steps.length>f));d--){let h=l[d];h<0||(e=i.before(h),t=u.after(h))}}function gc(r,e,t,n,i){if(e<t){let u=r.firstChild;r=r.replaceChild(0,u.copy(gc(u.content,e+1,t,n,u)))}if(e>n){let u=i.contentMatchAt(0),l=u.fillBefore(r).append(r);r=l.append(u.matchFragment(l).fillBefore(N.empty,!0))}return r}function O0(r,e,t,n){if(!n.isInline&&e==t&&r.doc.resolve(e).parent.content.size){let i=A0(r.doc,e,n.type);i!=null&&(e=t=i)}r.replaceRange(e,t,new B(N.from(n),0,0))}function I0(r,e,t){let n=r.doc.resolve(e),i=r.doc.resolve(t),u=bc(n,i);for(let l=0;l<u.length;l++){let o=u[l],s=l==u.length-1;if(s&&o==0||n.node(o).type.contentMatch.validEnd)return r.delete(n.start(o),i.end(o));if(o>0&&(s||n.node(o-1).canReplace(n.index(o-1),i.indexAfter(o-1))))return r.delete(n.before(o),i.after(o))}for(let l=1;l<=n.depth&&l<=i.depth;l++)if(e-n.start(l)==n.depth-l&&t>n.end(l)&&i.end(l)-t!=i.depth-l)return r.delete(n.before(l),t);r.delete(e,t)}function bc(r,e){let t=[],n=Math.min(r.depth,e.depth);for(let i=n;i>=0;i--){let u=r.start(i);if(u<r.pos-(r.depth-i)||e.end(i)>e.pos+(e.depth-i)||r.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(u==e.start(i)||i==r.depth&&i==e.depth&&r.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==u-1)&&t.push(i)}return t}class en extends ye{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return oe.fail("No node at attribute step's position");let n=Object.create(null);for(let u in t.attrs)n[u]=t.attrs[u];n[this.attr]=this.value;let i=t.type.create(n,null,t.marks);return oe.fromReplace(e,this.pos,this.pos+1,new B(N.from(i),0,t.isLeaf?0:1))}getMap(){return Ne.empty}invert(e){return new en(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new en(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new en(t.pos,t.attr,t.value)}}ye.jsonID("attr",en);class Mn extends ye{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return oe.ok(n)}getMap(){return Ne.empty}invert(e){return new Mn(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Mn(t.attr,t.value)}}ye.jsonID("docAttr",Mn);let ln=class extends Error{};ln=function r(e){let t=Error.call(this,e);return t.__proto__=r.prototype,t};ln.prototype=Object.create(Error.prototype);ln.prototype.constructor=ln;ln.prototype.name="TransformError";class F0{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Yt}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new ln(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=B.empty){let i=su(this.doc,e,t,n);return i&&this.step(i),this}replaceWith(e,t,n){return this.replace(e,t,new B(N.from(n),0,0))}delete(e,t){return this.replace(e,t,B.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return N0(this,e,t,n),this}replaceRangeWith(e,t,n){return O0(this,e,t,n),this}deleteRange(e,t){return I0(this,e,t),this}lift(e,t){return _0(this,e,t),this}join(e,t=1){return E0(this,e,t),this}wrap(e,t){return x0(this,e,t),this}setBlockType(e,t=e,n,i=null){return w0(this,e,t,n,i),this}setNodeMarkup(e,t,n=null,i){return v0(this,e,t,n,i),this}setNodeAttribute(e,t,n){return this.step(new en(e,t,n)),this}setDocAttribute(e,t){return this.step(new Mn(e,t)),this}addNodeMark(e,t){return this.step(new yt(e,t)),this}removeNodeMark(e,t){if(!(t instanceof U)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t=t.isInSet(n.marks),!t)return this}return this.step(new un(e,t)),this}split(e,t=1,n){return S0(this,e,t,n),this}addMark(e,t,n){return p0(this,e,t,n),this}removeMark(e,t,n){return m0(this,e,t,n),this}clearIncompatible(e,t,n){return g0(this,e,t,n),this}}const ti=Object.create(null);class W{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new R0(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=B.empty){let n=t.content.lastChild,i=null;for(let o=0;o<t.openEnd;o++)i=n,n=n.lastChild;let u=e.steps.length,l=this.ranges;for(let o=0;o<l.length;o++){let{$from:s,$to:a}=l[o],c=e.mapping.slice(u);e.replaceRange(c.map(s.pos),c.map(a.pos),o?B.empty:t),o==0&&rs(e,u,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,i=this.ranges;for(let u=0;u<i.length;u++){let{$from:l,$to:o}=i[u],s=e.mapping.slice(n),a=s.map(l.pos),c=s.map(o.pos);u?e.deleteRange(a,c):(e.replaceRangeWith(a,c,t),rs(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let i=e.parent.inlineContent?new G(e):Gt(e.node(0),e.parent,e.pos,e.index(),t,n);if(i)return i;for(let u=e.depth-1;u>=0;u--){let l=t<0?Gt(e.node(0),e.node(u),e.before(u+1),e.index(u),t,n):Gt(e.node(0),e.node(u),e.after(u+1),e.index(u)+1,t,n);if(l)return l}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Ie(e.node(0))}static atStart(e){return Gt(e,e,0,0,1)||new Ie(e)}static atEnd(e){return Gt(e,e,e.content.size,e.childCount,-1)||new Ie(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=ti[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in ti)throw new RangeError("Duplicate use of selection JSON ID "+e);return ti[e]=t,t.prototype.jsonID=e,t}getBookmark(){return G.between(this.$anchor,this.$head).getBookmark()}}W.prototype.visible=!0;class R0{constructor(e,t){this.$from=e,this.$to=t}}let ts=!1;function ns(r){!ts&&!r.parent.inlineContent&&(ts=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}class G extends W{constructor(e,t=e){ns(e),ns(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return W.near(n);let i=e.resolve(t.map(this.anchor));return new G(i.parent.inlineContent?i:n,n)}replace(e,t=B.empty){if(super.replace(e,t),t==B.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof G&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Pr(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new G(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let i=e.resolve(t);return new this(i,n==t?i:e.resolve(n))}static between(e,t,n){let i=e.pos-t.pos;if((!n||i)&&(n=i>=0?1:-1),!t.parent.inlineContent){let u=W.findFrom(t,n,!0)||W.findFrom(t,-n,!0);if(u)t=u.$head;else return W.near(t,n)}return e.parent.inlineContent||(i==0?e=t:(e=(W.findFrom(e,-n,!0)||W.findFrom(e,n,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new G(e,t)}}W.jsonID("text",G);class Pr{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Pr(e.map(this.anchor),e.map(this.head))}resolve(e){return G.between(e.resolve(this.anchor),e.resolve(this.head))}}class q extends W{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:i}=t.mapResult(this.anchor),u=e.resolve(i);return n?W.near(u):new q(u)}content(){return new B(N.from(this.node),0,0)}eq(e){return e instanceof q&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new au(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new q(e.resolve(t.anchor))}static create(e,t){return new q(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}q.prototype.visible=!1;W.jsonID("node",q);class au{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new Pr(n,n):new au(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&q.isSelectable(n)?new q(t):W.near(t)}}class Ie extends W{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=B.empty){if(t==B.empty){e.delete(0,e.doc.content.size);let n=W.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ie(e)}map(e){return new Ie(e)}eq(e){return e instanceof Ie}getBookmark(){return z0}}W.jsonID("all",Ie);const z0={map(){return this},resolve(r){return new Ie(r)}};function Gt(r,e,t,n,i,u=!1){if(e.inlineContent)return G.create(r,t);for(let l=n-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let o=e.child(l);if(o.isAtom){if(!u&&q.isSelectable(o))return q.create(r,t-(i<0?o.nodeSize:0))}else{let s=Gt(r,o,t+i,i<0?o.childCount:0,i,u);if(s)return s}t+=o.nodeSize*i}return null}function rs(r,e,t){let n=r.steps.length-1;if(n<e)return;let i=r.steps[n];if(!(i instanceof _e||i instanceof pe))return;let u=r.mapping.maps[n],l;u.forEach((o,s,a,c)=>{l==null&&(l=c)}),r.setSelection(W.near(r.doc.resolve(l),t))}const is=1,Zn=2,us=4;class P0 extends F0{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|is)&~Zn,this.storedMarks=null,this}get selectionSet(){return(this.updated&is)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Zn,this}ensureMarks(e){return U.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Zn)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Zn,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||U.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=t),n=n??t,!e)return this.deleteRange(t,n);let u=this.storedMarks;if(!u){let l=this.doc.resolve(t);u=n==t?l.marks():l.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,i.text(e,u)),this.selection.empty||this.setSelection(W.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=us,this}get scrolledIntoView(){return(this.updated&us)>0}}function ls(r,e){return!e||!r?r:r.bind(e)}class bn{constructor(e,t,n){this.name=e,this.init=ls(t.init,n),this.apply=ls(t.apply,n)}}const B0=[new bn("doc",{init(r){return r.doc||r.schema.topNodeType.createAndFill()},apply(r){return r.doc}}),new bn("selection",{init(r,e){return r.selection||W.atStart(e.doc)},apply(r){return r.selection}}),new bn("storedMarks",{init(r){return r.storedMarks||null},apply(r,e,t,n){return n.selection.$cursor?r.storedMarks:null}}),new bn("scrollToSelection",{init(){return 0},apply(r,e){return r.scrolledIntoView?e+1:e}})];class ni{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=B0.slice(),t&&t.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new bn(n.key,n.spec.state,n))})}}class Qt{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),i=null;for(;;){let u=!1;for(let l=0;l<this.config.plugins.length;l++){let o=this.config.plugins[l];if(o.spec.appendTransaction){let s=i?i[l].n:0,a=i?i[l].state:this,c=s<t.length&&o.spec.appendTransaction.call(o,s?t.slice(s):t,a,n);if(c&&n.filterTransaction(c,l)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<l?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),u=!0}i&&(i[l]={state:n,n:t.length})}}if(!u)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Qt(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let u=n[i];t[u.name]=u.apply(e,this[u.name],this,t)}return t}get tr(){return new P0(this)}static create(e){let t=new ni(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Qt(t);for(let i=0;i<t.fields.length;i++)n[t.fields[i].name]=t.fields[i].init(e,n);return n}reconfigure(e){let t=new ni(this.schema,e.plugins),n=t.fields,i=new Qt(t);for(let u=0;u<n.length;u++){let l=n[u].name;i[l]=this.hasOwnProperty(l)?this[l]:n[u].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],u=i.spec.state;u&&u.toJSON&&(t[n]=u.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new ni(e.schema,e.plugins),u=new Qt(i);return i.fields.forEach(l=>{if(l.name=="doc")u.doc=Lt.fromJSON(e.schema,t.doc);else if(l.name=="selection")u.selection=W.fromJSON(u.doc,t.selection);else if(l.name=="storedMarks")t.storedMarks&&(u.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let o in n){let s=n[o],a=s.spec.state;if(s.key==l.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,o)){u[l.name]=a.fromJSON.call(s,e,t[o],u);return}}u[l.name]=l.init(e,u)}}),u}}function _c(r,e,t){for(let n in r){let i=r[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=_c(i,e,{})),t[n]=i}return t}class Tt{constructor(e){this.spec=e,this.props={},e.props&&_c(e.props,this,this.props),this.key=e.key?e.key.key:kc("plugin")}getState(e){return e[this.key]}}const ri=Object.create(null);function kc(r){return r in ri?r+"$"+ ++ri[r]:(ri[r]=0,r+"$")}class yc{constructor(e="key"){this.key=kc(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const xe=function(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e},Dn=function(r){let e=r.assignedSlot||r.parentNode;return e&&e.nodeType==11?e.host:e};let ss=null;const lt=function(r,e,t){let n=ss||(ss=document.createRange());return n.setEnd(r,t??r.nodeValue.length),n.setStart(r,e||0),n},jt=function(r,e,t,n){return t&&(as(r,e,t,n,-1)||as(r,e,t,n,1))},L0=/^(img|br|input|textarea|hr)$/i;function as(r,e,t,n,i){for(;;){if(r==t&&e==n)return!0;if(e==(i<0?0:Ze(r))){let u=r.parentNode;if(!u||u.nodeType!=1||cu(r)||L0.test(r.nodeName)||r.contentEditable=="false")return!1;e=xe(r)+(i<0?0:1),r=u}else if(r.nodeType==1){if(r=r.childNodes[e+(i<0?-1:0)],r.contentEditable=="false")return!1;e=i<0?Ze(r):0}else return!1}}function Ze(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function q0(r,e,t){for(let n=e==0,i=e==Ze(r);n||i;){if(r==t)return!0;let u=xe(r);if(r=r.parentNode,!r)return!1;n=n&&u==0,i=i&&u==Ze(r)}}function cu(r){let e;for(let t=r;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==r||e.contentDOM==r)}const Br=function(r){return r.focusNode&&jt(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)};function It(r,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=r,t.key=t.code=e,t}function V0(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function $0(r,e,t){if(r.caretPositionFromPoint)try{let n=r.caretPositionFromPoint(e,t);if(n)return{node:n.offsetNode,offset:n.offset}}catch{}if(r.caretRangeFromPoint){let n=r.caretRangeFromPoint(e,t);if(n)return{node:n.startContainer,offset:n.startOffset}}}const et=typeof navigator<"u"?navigator:null,cs=typeof document<"u"?document:null,Nt=et&&et.userAgent||"",Oi=/Edge\/(\d+)/.exec(Nt),xc=/MSIE \d/.exec(Nt),Ii=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Nt),De=!!(xc||Ii||Oi),vt=xc?document.documentMode:Ii?+Ii[1]:Oi?+Oi[1]:0,We=!De&&/gecko\/(\d+)/i.test(Nt);We&&+(/Firefox\/(\d+)/.exec(Nt)||[0,0])[1];const Fi=!De&&/Chrome\/(\d+)/.exec(Nt),ke=!!Fi,H0=Fi?+Fi[1]:0,Ce=!De&&!!et&&/Apple Computer/.test(et.vendor),on=Ce&&(/Mobile\/\w+/.test(Nt)||!!et&&et.maxTouchPoints>2),ze=on||(et?/Mac/.test(et.platform):!1),j0=et?/Win/.test(et.platform):!1,Ve=/Android \d/.test(Nt),Hn=!!cs&&"webkitFontSmoothing"in cs.documentElement.style,W0=Hn?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function U0(r){return{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function ut(r,e){return typeof r=="number"?r:r[e]}function J0(r){let e=r.getBoundingClientRect(),t=e.width/r.offsetWidth||1,n=e.height/r.offsetHeight||1;return{left:e.left,right:e.left+r.clientWidth*t,top:e.top,bottom:e.top+r.clientHeight*n}}function fs(r,e,t){let n=r.someProp("scrollThreshold")||0,i=r.someProp("scrollMargin")||5,u=r.dom.ownerDocument;for(let l=t||r.dom;l;l=Dn(l)){if(l.nodeType!=1)continue;let o=l,s=o==u.body,a=s?U0(u):J0(o),c=0,f=0;if(e.top<a.top+ut(n,"top")?f=-(a.top-e.top+ut(i,"top")):e.bottom>a.bottom-ut(n,"bottom")&&(f=e.bottom-e.top>a.bottom-a.top?e.top+ut(i,"top")-a.top:e.bottom-a.bottom+ut(i,"bottom")),e.left<a.left+ut(n,"left")?c=-(a.left-e.left+ut(i,"left")):e.right>a.right-ut(n,"right")&&(c=e.right-a.right+ut(i,"right")),c||f)if(s)u.defaultView.scrollBy(c,f);else{let d=o.scrollLeft,h=o.scrollTop;f&&(o.scrollTop+=f),c&&(o.scrollLeft+=c);let p=o.scrollLeft-d,m=o.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(s||/^(fixed|sticky)$/.test(getComputedStyle(l).position))break}}function K0(r){let e=r.dom.getBoundingClientRect(),t=Math.max(0,e.top),n,i;for(let u=(e.left+e.right)/2,l=t+1;l<Math.min(innerHeight,e.bottom);l+=5){let o=r.root.elementFromPoint(u,l);if(!o||o==r.dom||!r.dom.contains(o))continue;let s=o.getBoundingClientRect();if(s.top>=t-20){n=o,i=s.top;break}}return{refDOM:n,refTop:i,stack:wc(r.dom)}}function wc(r){let e=[],t=r.ownerDocument;for(let n=r;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),r!=t);n=Dn(n));return e}function G0({refDOM:r,refTop:e,stack:t}){let n=r?r.getBoundingClientRect().top:0;Cc(t,n==0?0:n-e)}function Cc(r,e){for(let t=0;t<r.length;t++){let{dom:n,top:i,left:u}=r[t];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=u&&(n.scrollLeft=u)}}let Ut=null;function Z0(r){if(r.setActive)return r.setActive();if(Ut)return r.focus(Ut);let e=wc(r);r.focus(Ut==null?{get preventScroll(){return Ut={preventScroll:!0},!0}}:void 0),Ut||(Ut=!1,Cc(e,0))}function vc(r,e){let t,n=2e8,i,u=0,l=e.top,o=e.top,s,a;for(let c=r.firstChild,f=0;c;c=c.nextSibling,f++){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=lt(c).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.top<=l&&p.bottom>=o){l=Math.max(p.bottom,l),o=Math.min(p.top,o);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<n){t=c,n=m,i=m&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,c.nodeType==1&&m&&(u=f+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!s&&p.left<=e.left&&p.right>=e.left&&(s=c,a={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(u=f+1)}}return!t&&s&&(t=s,i=a,n=0),t&&t.nodeType==3?Q0(t,i):!t||n&&t.nodeType==1?{node:r,offset:u}:vc(t,i)}function Q0(r,e){let t=r.nodeValue.length,n=document.createRange();for(let i=0;i<t;i++){n.setEnd(r,i+1),n.setStart(r,i);let u=ft(n,1);if(u.top!=u.bottom&&fu(e,u))return{node:r,offset:i+(e.left>=(u.left+u.right)/2?1:0)}}return{node:r,offset:0}}function fu(r,e){return r.left>=e.left-1&&r.left<=e.right+1&&r.top>=e.top-1&&r.top<=e.bottom+1}function Y0(r,e){let t=r.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<r.getBoundingClientRect().left?t:r}function X0(r,e,t){let{node:n,offset:i}=vc(e,t),u=-1;if(n.nodeType==1&&!n.firstChild){let l=n.getBoundingClientRect();u=l.left!=l.right&&t.left>(l.left+l.right)/2?1:-1}return r.docView.posFromDOM(n,i,u)}function eh(r,e,t,n){let i=-1;for(let u=e,l=!1;u!=r.dom;){let o=r.docView.nearestDesc(u,!0);if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent&&!l||!o.contentDOM)){let s=o.dom.getBoundingClientRect();if(o.node.isBlock&&o.parent&&!l&&(l=!0,s.left>n.left||s.top>n.top?i=o.posBefore:(s.right<n.left||s.bottom<n.top)&&(i=o.posAfter)),!o.contentDOM&&i<0&&!o.node.isText)return(o.node.isBlock?n.top<(s.top+s.bottom)/2:n.left<(s.left+s.right)/2)?o.posBefore:o.posAfter}u=o.dom.parentNode}return i>-1?i:r.docView.posFromDOM(e,t,-1)}function Sc(r,e,t){let n=r.childNodes.length;if(n&&t.top<t.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-t.top)/(t.bottom-t.top))-2)),u=i;;){let l=r.childNodes[u];if(l.nodeType==1){let o=l.getClientRects();for(let s=0;s<o.length;s++){let a=o[s];if(fu(e,a))return Sc(l,e,a)}}if((u=(u+1)%n)==i)break}return r}function th(r,e){let t=r.dom.ownerDocument,n,i=0,u=$0(t,e.left,e.top);u&&({node:n,offset:i}=u);let l=(r.root.elementFromPoint?r.root:t).elementFromPoint(e.left,e.top),o;if(!l||!r.dom.contains(l.nodeType!=1?l.parentNode:l)){let a=r.dom.getBoundingClientRect();if(!fu(e,a)||(l=Sc(r.dom,e,a),!l))return null}if(Ce)for(let a=l;n&&a;a=Dn(a))a.draggable&&(n=void 0);if(l=Y0(l,e),n){if(We&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let c=n.childNodes[i],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let a;Hn&&i&&n.nodeType==1&&(a=n.childNodes[i-1]).nodeType==1&&a.contentEditable=="false"&&a.getBoundingClientRect().top>=e.top&&i--,n==r.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?o=r.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(o=eh(r,n,i,e))}o==null&&(o=X0(r,l,e));let s=r.docView.nearestDesc(l,!0);return{pos:o,inside:s?s.posAtStart-s.border:-1}}function ds(r){return r.top<r.bottom||r.left<r.right}function ft(r,e){let t=r.getClientRects();if(t.length){let n=t[e<0?0:t.length-1];if(ds(n))return n}return Array.prototype.find.call(t,ds)||r.getBoundingClientRect()}const nh=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ec(r,e,t){let{node:n,offset:i,atom:u}=r.docView.domFromPos(e,t<0?-1:1),l=Hn||We;if(n.nodeType==3)if(l&&(nh.test(n.nodeValue)||(t<0?!i:i==n.nodeValue.length))){let s=ft(lt(n,i,i),t);if(We&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let a=ft(lt(n,i-1,i-1),-1);if(a.top==s.top){let c=ft(lt(n,i,i+1),-1);if(c.top!=s.top)return hn(c,c.left<a.left)}}return s}else{let s=i,a=i,c=t<0?1:-1;return t<0&&!i?(a++,c=-1):t>=0&&i==n.nodeValue.length?(s--,c=1):t<0?s--:a++,hn(ft(lt(n,s,a),c),c<0)}if(!r.state.doc.resolve(e-(u||0)).parent.inlineContent){if(u==null&&i&&(t<0||i==Ze(n))){let s=n.childNodes[i-1];if(s.nodeType==1)return ii(s.getBoundingClientRect(),!1)}if(u==null&&i<Ze(n)){let s=n.childNodes[i];if(s.nodeType==1)return ii(s.getBoundingClientRect(),!0)}return ii(n.getBoundingClientRect(),t>=0)}if(u==null&&i&&(t<0||i==Ze(n))){let s=n.childNodes[i-1],a=s.nodeType==3?lt(s,Ze(s)-(l?0:1)):s.nodeType==1&&(s.nodeName!="BR"||!s.nextSibling)?s:null;if(a)return hn(ft(a,1),!1)}if(u==null&&i<Ze(n)){let s=n.childNodes[i];for(;s.pmViewDesc&&s.pmViewDesc.ignoreForCoords;)s=s.nextSibling;let a=s?s.nodeType==3?lt(s,0,l?0:1):s.nodeType==1?s:null:null;if(a)return hn(ft(a,-1),!0)}return hn(ft(n.nodeType==3?lt(n):n,-t),t>=0)}function hn(r,e){if(r.width==0)return r;let t=e?r.left:r.right;return{top:r.top,bottom:r.bottom,left:t,right:t}}function ii(r,e){if(r.height==0)return r;let t=e?r.top:r.bottom;return{top:t,bottom:t,left:r.left,right:r.right}}function Ac(r,e,t){let n=r.state,i=r.root.activeElement;n!=e&&r.updateState(e),i!=r.dom&&r.focus();try{return t()}finally{n!=e&&r.updateState(n),i!=r.dom&&i&&i.focus()}}function rh(r,e,t){let n=e.selection,i=t=="up"?n.$from:n.$to;return Ac(r,e,()=>{let{node:u}=r.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let o=r.docView.nearestDesc(u,!0);if(!o)break;if(o.node.isBlock){u=o.contentDOM||o.dom;break}u=o.dom.parentNode}let l=Ec(r,i.pos,1);for(let o=u.firstChild;o;o=o.nextSibling){let s;if(o.nodeType==1)s=o.getClientRects();else if(o.nodeType==3)s=lt(o,0,o.nodeValue.length).getClientRects();else continue;for(let a=0;a<s.length;a++){let c=s[a];if(c.bottom>c.top+1&&(t=="up"?l.top-c.top>(c.bottom-l.top)*2:c.bottom-l.bottom>(l.bottom-c.top)*2))return!1}}return!0})}const ih=/[\u0590-\u08ac]/;function uh(r,e,t){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,u=!i,l=i==n.parent.content.size,o=r.domSelection();return!ih.test(n.parent.textContent)||!o.modify?t=="left"||t=="backward"?u:l:Ac(r,e,()=>{let{focusNode:s,focusOffset:a,anchorNode:c,anchorOffset:f}=r.domSelectionRange(),d=o.caretBidiLevel;o.modify("move",t,"character");let h=n.depth?r.docView.domAfterPos(n.before()):r.dom,{focusNode:p,focusOffset:m}=r.domSelectionRange(),g=p&&!h.contains(p.nodeType==1?p:p.parentNode)||s==p&&a==m;try{o.collapse(c,f),s&&(s!=c||a!=f)&&o.extend&&o.extend(s,a)}catch{}return d!=null&&(o.caretBidiLevel=d),g})}let hs=null,ps=null,ms=!1;function lh(r,e,t){return hs==e&&ps==t?ms:(hs=e,ps=t,ms=t=="up"||t=="down"?rh(r,e,t):uh(r,e,t))}const Be=0,gs=1,Rt=2,tt=3;class jn{constructor(e,t,n,i){this.parent=e,this.children=t,this.dom=n,this.contentDOM=i,this.dirty=Be,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let i=this.children[t];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let u,l;if(e==this.contentDOM)u=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;u=e.previousSibling}for(;u&&!((l=u.pmViewDesc)&&l.parent==this);)u=u.previousSibling;return u?this.posBeforeChild(l)+l.size:this.posAtStart}else{let u,l;if(e==this.contentDOM)u=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;u=e.nextSibling}for(;u&&!((l=u.pmViewDesc)&&l.parent==this);)u=u.nextSibling;return u?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>xe(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let u=e;;u=u.parentNode){if(u==this.dom){i=!1;break}if(u.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let u=e;;u=u.parentNode){if(u==this.dom){i=!0;break}if(u.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,i=e;i;i=i.parentNode){let u=this.getDesc(i),l;if(u&&(!t||u.node))if(n&&(l=u.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))n=!1;else return u}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let i=e;i;i=i.parentNode){let u=this.getDesc(i);if(u)return u.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let i=this.children[t],u=n+i.size;if(n==e&&u!=n){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<u)return i.descAt(e-n-i.border);n=u}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let u=0;n<this.children.length;n++){let l=this.children[n],o=u+l.size;if(o>e||l instanceof Dc){i=e-u;break}u=o}if(i)return this.children[n].domFromPos(i-this.children[n].border,t);for(let u;n&&!(u=this.children[n-1]).size&&u instanceof Mc&&u.side>=0;n--);if(t<=0){let u,l=!0;for(;u=n?this.children[n-1]:null,!(!u||u.dom.parentNode==this.contentDOM);n--,l=!1);return u&&t&&l&&!u.border&&!u.domAtom?u.domFromPos(u.size,t):{node:this.contentDOM,offset:u?xe(u.dom)+1:0}}else{let u,l=!0;for(;u=n<this.children.length?this.children[n]:null,!(!u||u.dom.parentNode==this.contentDOM);n++,l=!1);return u&&l&&!u.border&&!u.domAtom?u.domFromPos(0,t):{node:this.contentDOM,offset:u?xe(u.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,u=-1;for(let l=n,o=0;;o++){let s=this.children[o],a=l+s.size;if(i==-1&&e<=a){let c=l+s.border;if(e>=c&&t<=a-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,c);e=l;for(let f=o;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=xe(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(a>t||o==this.children.length-1)){t=a;for(let c=o+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){u=xe(f.dom);break}t+=f.size}u==-1&&(u=this.contentDOM.childNodes.length);break}l=a}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:u}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(t.nodeType!=1||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,i=!1){let u=Math.min(e,t),l=Math.max(e,t);for(let d=0,h=0;d<this.children.length;d++){let p=this.children[d],m=h+p.size;if(u>h&&l<m)return p.setSelection(e-h-p.border,t-h-p.border,n,i);h=m}let o=this.domFromPos(e,e?-1:1),s=t==e?o:this.domFromPos(t,t?-1:1),a=n.getSelection(),c=!1;if((We||Ce)&&e==t){let{node:d,offset:h}=o;if(d.nodeType==3){if(c=!!(h&&d.nodeValue[h-1]==`
`),c&&h==d.nodeValue.length)for(let p=d,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(o=s={node:m.parentNode,offset:xe(m)+1});break}let g=p.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let p=d.childNodes[h-1];c=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(We&&a.focusNode&&a.focusNode!=s.node&&a.focusNode.nodeType==1){let d=a.focusNode.childNodes[a.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||c&&Ce)&&jt(o.node,o.offset,a.anchorNode,a.anchorOffset)&&jt(s.node,s.offset,a.focusNode,a.focusOffset))return;let f=!1;if((a.extend||e==t)&&!c){a.collapse(o.node,o.offset);try{e!=t&&a.extend(s.node,s.offset),f=!0}catch{}}if(!f){if(e>t){let h=o;o=s,s=h}let d=document.createRange();d.setEnd(s.node,s.offset),d.setStart(o.node,o.offset),a.removeAllRanges(),a.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,i=0;i<this.children.length;i++){let u=this.children[i],l=n+u.size;if(n==l?e<=l&&t>=n:e<l&&t>n){let o=n+u.border,s=l-u.border;if(e>=o&&t<=s){this.dirty=e==n||t==l?Rt:gs,e==o&&t==s&&(u.contentLost||u.dom.parentNode!=this.contentDOM)?u.dirty=tt:u.markDirty(e-o,t-o);return}else u.dirty=u.dom==u.contentDOM&&u.dom.parentNode==this.contentDOM&&!u.children.length?Rt:tt}n=l}this.dirty=Rt}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=e==1?Rt:gs;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class Mc extends jn{constructor(e,t,n,i){let u,l=t.type.toDOM;if(typeof l=="function"&&(l=l(n,()=>{if(!u)return i;if(u.parent)return u.parent.posBeforeChild(u)})),!t.type.spec.raw){if(l.nodeType!=1){let o=document.createElement("span");o.appendChild(l),l=o}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,u=this}matchesWidget(e){return this.dirty==Be&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class oh extends jn{constructor(e,t,n,i){super(e,[],t,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Wt extends jn{constructor(e,t,n,i){super(e,[],n,i),this.mark=t}static create(e,t,n,i){let u=i.nodeViews[t.type.name],l=u&&u(t,i,n);return(!l||!l.dom)&&(l=st.renderSpec(document,t.type.spec.toDOM(t,n))),new Wt(e,t,l.dom,l.contentDOM||l.dom)}parseRule(){return this.dirty&tt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=tt&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Be){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Be}}slice(e,t,n){let i=Wt.create(this.parent,this.mark,!0,n),u=this.children,l=this.size;t<l&&(u=Pi(u,t,l,n)),e>0&&(u=Pi(u,0,e,n));for(let o=0;o<u.length;o++)u[o].parent=i;return i.children=u,i}}class St extends jn{constructor(e,t,n,i,u,l,o,s,a){super(e,[],u,l),this.node=t,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=o}static create(e,t,n,i,u,l){let o=u.nodeViews[t.type.name],s,a=o&&o(t,u,()=>{if(!s)return l;if(s.parent)return s.parent.posBeforeChild(s)},n,i),c=a&&a.dom,f=a&&a.contentDOM;if(t.isText){if(!c)c=document.createTextNode(t.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=st.renderSpec(document,t.type.spec.toDOM(t)));!f&&!t.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=Oc(c,n,t),a?s=new sh(e,t,n,i,c,f||null,d,a,u,l+1):t.isText?new Lr(e,t,n,i,c,d,u):new St(e,t,n,i,c,f||null,d,u,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>N.empty)}return e}matchesNode(e,t,n){return this.dirty==Be&&e.eq(this.node)&&zi(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,i=t,u=e.composing?this.localCompositionInfo(e,t):null,l=u&&u.pos>-1?u:null,o=u&&u.pos<0,s=new ch(this,l&&l.node,e);hh(this.node,this.innerDeco,(a,c,f)=>{a.spec.marks?s.syncToMarks(a.spec.marks,n,e):a.type.side>=0&&!f&&s.syncToMarks(c==this.node.childCount?U.none:this.node.child(c).marks,n,e),s.placeWidget(a,e,i)},(a,c,f,d)=>{s.syncToMarks(a.marks,n,e);let h;s.findNodeMatch(a,c,f,d)||o&&e.state.selection.from>i&&e.state.selection.to<i+a.nodeSize&&(h=s.findIndexWithChild(u.node))>-1&&s.updateNodeAt(a,c,f,h,e)||s.updateNextNode(a,c,f,e,d,i)||s.addNode(a,c,f,e,i),i+=a.nodeSize}),s.syncToMarks([],n,e),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||this.dirty==Rt)&&(l&&this.protectLocalComposition(e,l),Tc(this.contentDOM,this.children,e),on&&ph(this.dom))}localCompositionInfo(e,t){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof G)||n<t||i>t+this.node.content.size)return null;let u=e.domSelectionRange(),l=mh(u.focusNode,u.focusOffset);if(!l||!this.dom.contains(l.parentNode))return null;if(this.node.inlineContent){let o=l.nodeValue,s=gh(this.node.content,o,n-t,i-t);return s<0?null:{node:l,pos:s,text:o}}else return{node:l,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:i}){if(this.getDesc(t))return;let u=t;for(;u.parentNode!=this.contentDOM;u=u.parentNode){for(;u.previousSibling;)u.parentNode.removeChild(u.previousSibling);for(;u.nextSibling;)u.parentNode.removeChild(u.nextSibling);u.pmViewDesc&&(u.pmViewDesc=void 0)}let l=new oh(this,u,t,i);e.input.compositionNodes.push(l),this.children=Pi(this.children,n,n+i.length,e,l)}update(e,t,n,i){return this.dirty==tt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,n,i),!0)}updateInner(e,t,n,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Be}updateOuterDeco(e){if(zi(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=Nc(this.dom,this.nodeDOM,Ri(this.outerDeco,this.node,t),Ri(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function bs(r,e,t,n,i){Oc(n,e,r);let u=new St(void 0,r,e,t,n,n,n,i,0);return u.contentDOM&&u.updateChildren(i,0),u}class Lr extends St{constructor(e,t,n,i,u,l,o){super(e,t,n,i,u,null,l,o,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,i){return this.dirty==tt||this.dirty!=Be&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Be||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Be,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,n){let i=this.node.cut(e,t),u=document.createTextNode(i.text);return new Lr(this.parent,i,this.outerDeco,this.innerDeco,u,u,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=tt)}get domAtom(){return!1}}class Dc extends jn{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Be&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class sh extends St{constructor(e,t,n,i,u,l,o,s,a,c){super(e,t,n,i,u,l,o,a,c),this.spec=s}update(e,t,n,i){if(this.dirty==tt)return!1;if(this.spec.update){let u=this.spec.update(e,t,n);return u&&this.updateInner(e,t,n,i),u}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,i){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Tc(r,e,t){let n=r.firstChild,i=!1;for(let u=0;u<e.length;u++){let l=e[u],o=l.dom;if(o.parentNode==r){for(;o!=n;)n=_s(n),i=!0;n=n.nextSibling}else i=!0,r.insertBefore(o,n);if(l instanceof Wt){let s=n?n.previousSibling:r.lastChild;Tc(l.contentDOM,l.children,t),n=s?s.nextSibling:r.firstChild}}for(;n;)n=_s(n),i=!0;i&&t.trackWrites==r&&(t.trackWrites=null)}const yn=function(r){r&&(this.nodeName=r)};yn.prototype=Object.create(null);const zt=[new yn];function Ri(r,e,t){if(r.length==0)return zt;let n=t?zt[0]:new yn,i=[n];for(let u=0;u<r.length;u++){let l=r[u].type.attrs;if(l){l.nodeName&&i.push(n=new yn(l.nodeName));for(let o in l){let s=l[o];s!=null&&(t&&i.length==1&&i.push(n=new yn(e.isInline?"span":"div")),o=="class"?n.class=(n.class?n.class+" ":"")+s:o=="style"?n.style=(n.style?n.style+";":"")+s:o!="nodeName"&&(n[o]=s))}}}return i}function Nc(r,e,t,n){if(t==zt&&n==zt)return e;let i=e;for(let u=0;u<n.length;u++){let l=n[u],o=t[u];if(u){let s;o&&o.nodeName==l.nodeName&&i!=r&&(s=i.parentNode)&&s.nodeName.toLowerCase()==l.nodeName||(s=document.createElement(l.nodeName),s.pmIsDeco=!0,s.appendChild(i),o=zt[0]),i=s}ah(i,o||zt[0],l)}return i}function ah(r,e,t){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in t)&&r.removeAttribute(n);for(let n in t)n!="class"&&n!="style"&&n!="nodeName"&&t[n]!=e[n]&&r.setAttribute(n,t[n]);if(e.class!=t.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let u=0;u<n.length;u++)i.indexOf(n[u])==-1&&r.classList.remove(n[u]);for(let u=0;u<i.length;u++)n.indexOf(i[u])==-1&&r.classList.add(i[u]);r.classList.length==0&&r.removeAttribute("class")}if(e.style!=t.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)r.style.removeProperty(i[1])}t.style&&(r.style.cssText+=t.style)}}function Oc(r,e,t){return Nc(r,r,zt,Ri(e,t,r.nodeType!=1))}function zi(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].type.eq(e[t].type))return!1;return!0}function _s(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class ch{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=fh(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let i=0,u=this.stack.length>>1,l=Math.min(u,e.length);for(;i<l&&(i==u-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<u;)this.destroyRest(),this.top.dirty=Be,this.index=this.stack.pop(),this.top=this.stack.pop(),u--;for(;u<e.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let s=this.index;s<Math.min(this.index+3,this.top.children.length);s++){let a=this.top.children[s];if(a.matchesMark(e[u])&&!this.isLocked(a.dom)){o=s;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let s=Wt.create(this.top,e[u],t,n);this.top.children.splice(this.index,0,s),this.top=s,this.changed=!0}this.index=0,u++}}findNodeMatch(e,t,n,i){let u=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,n))u=this.top.children.indexOf(l,this.index);else for(let o=this.index,s=Math.min(this.top.children.length,o+5);o<s;o++){let a=this.top.children[o];if(a.matchesNode(e,t,n)&&!this.preMatch.matched.has(a)){u=o;break}}return u<0?!1:(this.destroyBetween(this.index,u),this.index++,!0)}updateNodeAt(e,t,n,i,u){let l=this.top.children[i];return l.dirty==tt&&l.dom==l.contentDOM&&(l.dirty=Rt),l.update(e,t,n,u)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=t}}updateNextNode(e,t,n,i,u,l){for(let o=this.index;o<this.top.children.length;o++){let s=this.top.children[o];if(s instanceof St){let a=this.preMatch.matched.get(s);if(a!=null&&a!=u)return!1;let c=s.dom,f,d=this.isLocked(c)&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&s.dirty!=tt&&zi(t,s.outerDeco));if(!d&&s.update(e,t,n,i))return this.destroyBetween(this.index,o),s.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(s,e,t,n,i,l)))return this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Rt,f.updateChildren(i,l+1),f.dirty=Be),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,i,u,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let o=St.create(this.top,t,n,i,u,l);if(o.contentDOM){o.children=e.children,e.children=[];for(let s of o.children)s.parent=o}return e.destroy(),o}addNode(e,t,n,i,u){let l=St.create(this.top,e,t,n,i,u);l.contentDOM&&l.updateChildren(i,u+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let u=new Mc(this.top,e,t,n);this.top.children.splice(this.index++,0,u),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Wt;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Lr)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ce||ke)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new Dc(this.top,[],n,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function fh(r,e){let t=e,n=t.children.length,i=r.childCount,u=new Map,l=[];e:for(;i>0;){let o;for(;;)if(n){let a=t.children[n-1];if(a instanceof Wt)t=a,n=a.children.length;else{o=a,n--;break}}else{if(t==e)break e;n=t.parent.children.indexOf(t),t=t.parent}let s=o.node;if(s){if(s!=r.child(i-1))break;--i,u.set(o,i),l.push(o)}}return{index:i,matched:u,matches:l.reverse()}}function dh(r,e){return r.type.side-e.type.side}function hh(r,e,t,n){let i=e.locals(r),u=0;if(i.length==0){for(let a=0;a<r.childCount;a++){let c=r.child(a);n(c,i,e.forChild(u,c),a),u+=c.nodeSize}return}let l=0,o=[],s=null;for(let a=0;;){let c,f;for(;l<i.length&&i[l].to==u;){let g=i[l++];g.widget&&(c?(f||(f=[c])).push(g):c=g)}if(c)if(f){f.sort(dh);for(let g=0;g<f.length;g++)t(f[g],a,!!s)}else t(c,a,!!s);let d,h;if(s)h=-1,d=s,s=null;else if(a<r.childCount)h=a,d=r.child(a++);else break;for(let g=0;g<o.length;g++)o[g].to<=u&&o.splice(g--,1);for(;l<i.length&&i[l].from<=u&&i[l].to>u;)o.push(i[l++]);let p=u+d.nodeSize;if(d.isText){let g=p;l<i.length&&i[l].from<g&&(g=i[l].from);for(let y=0;y<o.length;y++)o[y].to<g&&(g=o[y].to);g<p&&(s=d.cut(g-u),d=d.cut(0,g-u),p=g,h=-1)}else for(;l<i.length&&i[l].to<p;)l++;let m=d.isInline&&!d.isLeaf?o.filter(g=>!g.inline):o.slice();n(d,m,e.forChild(u,d),h),u=p}}function ph(r){if(r.nodeName=="UL"||r.nodeName=="OL"){let e=r.style.cssText;r.style.cssText=e+"; list-style: square !important",window.getComputedStyle(r).listStyle,r.style.cssText=e}}function mh(r,e){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&e>0){if(r.childNodes.length>e&&r.childNodes[e].nodeType==3)return r.childNodes[e];r=r.childNodes[e-1],e=Ze(r)}else if(r.nodeType==1&&e<r.childNodes.length)r=r.childNodes[e],e=0;else return null}}function gh(r,e,t,n){for(let i=0,u=0;i<r.childCount&&u<=n;){let l=r.child(i++),o=u;if(u+=l.nodeSize,!l.isText)continue;let s=l.text;for(;i<r.childCount;){let a=r.child(i++);if(u+=a.nodeSize,!a.isText)break;s+=a.text}if(u>=t){if(u>=n&&s.slice(n-e.length-o,n-o)==e)return n-e.length;let a=o<n?s.lastIndexOf(e,n-o-1):-1;if(a>=0&&a+e.length+o>=t)return o+a;if(t==n&&s.length>=n+e.length-o&&s.slice(n-o,n-o+e.length)==e)return n}}return-1}function Pi(r,e,t,n,i){let u=[];for(let l=0,o=0;l<r.length;l++){let s=r[l],a=o,c=o+=s.size;a>=t||c<=e?u.push(s):(a<e&&u.push(s.slice(0,e-a,n)),i&&(u.push(i),i=void 0),c>t&&u.push(s.slice(t-a,s.size,n)))}return u}function du(r,e=null){let t=r.domSelectionRange(),n=r.state.doc;if(!t.focusNode)return null;let i=r.docView.nearestDesc(t.focusNode),u=i&&i.size==0,l=r.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(l<0)return null;let o=n.resolve(l),s,a;if(Br(t)){for(s=o;i&&!i.node;)i=i.parent;let c=i.node;if(i&&c.isAtom&&q.isSelectable(c)&&i.parent&&!(c.isInline&&q0(t.focusNode,t.focusOffset,i.dom))){let f=i.posBefore;a=new q(l==f?o:n.resolve(f))}}else{let c=r.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null;s=n.resolve(c)}if(!a){let c=e=="pointer"||r.state.selection.head<o.pos&&!u?1:-1;a=hu(r,s,o,c)}return a}function Ic(r){return r.editable?r.hasFocus():Rc(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function at(r,e=!1){let t=r.state.selection;if(Fc(r,t),!!Ic(r)){if(!e&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&ke){let n=r.domSelectionRange(),i=r.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&jt(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){r.input.mouseDown.delayedSelectionSync=!0,r.domObserver.setCurSelection();return}}if(r.domObserver.disconnectSelection(),r.cursorWrapper)_h(r);else{let{anchor:n,head:i}=t,u,l;ks&&!(t instanceof G)&&(t.$from.parent.inlineContent||(u=ys(r,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=ys(r,t.to))),r.docView.setSelection(n,i,r.root,e),ks&&(u&&xs(u),l&&xs(l)),t.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&bh(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}const ks=Ce||ke&&H0<63;function ys(r,e){let{node:t,offset:n}=r.docView.domFromPos(e,0),i=n<t.childNodes.length?t.childNodes[n]:null,u=n?t.childNodes[n-1]:null;if(Ce&&i&&i.contentEditable=="false")return ui(i);if((!i||i.contentEditable=="false")&&(!u||u.contentEditable=="false")){if(i)return ui(i);if(u)return ui(u)}}function ui(r){return r.contentEditable="true",Ce&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function xs(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function bh(r){let e=r.dom.ownerDocument;e.removeEventListener("selectionchange",r.input.hideSelectionGuard);let t=r.domSelectionRange(),n=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(t.anchorNode!=n||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!Ic(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}function _h(r){let e=r.domSelection(),t=document.createRange(),n=r.cursorWrapper.dom,i=n.nodeName=="IMG";i?t.setEnd(n.parentNode,xe(n)+1):t.setEnd(n,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!r.state.selection.visible&&De&&vt<=11&&(n.disabled=!0,n.disabled=!1)}function Fc(r,e){if(e instanceof q){let t=r.docView.descAt(e.from);t!=r.lastSelectedViewDesc&&(ws(r),t&&t.selectNode(),r.lastSelectedViewDesc=t)}else ws(r)}function ws(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function hu(r,e,t,n){return r.someProp("createSelectionBetween",i=>i(r,e,t))||G.between(e,t,n)}function Cs(r){return r.editable&&!r.hasFocus()?!1:Rc(r)}function Rc(r){let e=r.domSelectionRange();if(!e.anchorNode)return!1;try{return r.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(r.editable||r.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function kh(r){let e=r.docView.domFromPos(r.state.selection.anchor,0),t=r.domSelectionRange();return jt(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Bi(r,e){let{$anchor:t,$head:n}=r.selection,i=e>0?t.max(n):t.min(n),u=i.parent.inlineContent?i.depth?r.doc.resolve(e>0?i.after():i.before()):null:i;return u&&W.findFrom(u,e)}function dt(r,e){return r.dispatch(r.state.tr.setSelection(e).scrollIntoView()),!0}function vs(r,e,t){let n=r.state.selection;if(n instanceof G)if(t.indexOf("s")>-1){let{$head:i}=n,u=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!u||u.isText||!u.isLeaf)return!1;let l=r.state.doc.resolve(i.pos+u.nodeSize*(e<0?-1:1));return dt(r,new G(n.$anchor,l))}else if(n.empty){if(r.endOfTextblock(e>0?"forward":"backward")){let i=Bi(r.state,e);return i&&i instanceof q?dt(r,i):!1}else if(!(ze&&t.indexOf("m")>-1)){let i=n.$head,u=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!u||u.isText)return!1;let o=e<0?i.pos-u.nodeSize:i.pos;return u.isAtom||(l=r.docView.descAt(o))&&!l.contentDOM?q.isSelectable(u)?dt(r,new q(e<0?r.state.doc.resolve(i.pos-u.nodeSize):i)):Hn?dt(r,new G(r.state.doc.resolve(e<0?o:o+u.nodeSize))):!1:!1}}else return!1;else{if(n instanceof q&&n.node.isInline)return dt(r,new G(e>0?n.$to:n.$from));{let i=Bi(r.state,e);return i?dt(r,i):!1}}}function _r(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function xn(r,e){let t=r.pmViewDesc;return t&&t.size==0&&(e<0||r.nextSibling||r.nodeName!="BR")}function Jt(r,e){return e<0?yh(r):xh(r)}function yh(r){let e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let i,u,l=!1;for(We&&t.nodeType==1&&n<_r(t)&&xn(t.childNodes[n],-1)&&(l=!0);;)if(n>0){if(t.nodeType!=1)break;{let o=t.childNodes[n-1];if(xn(o,-1))i=t,u=--n;else if(o.nodeType==3)t=o,n=t.nodeValue.length;else break}}else{if(zc(t))break;{let o=t.previousSibling;for(;o&&xn(o,-1);)i=t.parentNode,u=xe(o),o=o.previousSibling;if(o)t=o,n=_r(t);else{if(t=t.parentNode,t==r.dom)break;n=0}}}l?Li(r,t,n):i&&Li(r,i,u)}function xh(r){let e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let i=_r(t),u,l;for(;;)if(n<i){if(t.nodeType!=1)break;let o=t.childNodes[n];if(xn(o,1))u=t,l=++n;else break}else{if(zc(t))break;{let o=t.nextSibling;for(;o&&xn(o,1);)u=o.parentNode,l=xe(o)+1,o=o.nextSibling;if(o)t=o,n=0,i=_r(t);else{if(t=t.parentNode,t==r.dom)break;n=i=0}}}u&&Li(r,u,l)}function zc(r){let e=r.pmViewDesc;return e&&e.node&&e.node.isBlock}function wh(r,e){for(;r&&e==r.childNodes.length&&!cu(r);)e=xe(r)+1,r=r.parentNode;for(;r&&e<r.childNodes.length;){let t=r.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=0}}function Ch(r,e){for(;r&&!e&&!cu(r);)e=xe(r),r=r.parentNode;for(;r&&e;){let t=r.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=r.childNodes.length}}function Li(r,e,t){if(e.nodeType!=3){let u,l;(l=wh(e,t))?(e=l,t=0):(u=Ch(e,t))&&(e=u,t=u.nodeValue.length)}let n=r.domSelection();if(Br(n)){let u=document.createRange();u.setEnd(e,t),u.setStart(e,t),n.removeAllRanges(),n.addRange(u)}else n.extend&&n.extend(e,t);r.domObserver.setCurSelection();let{state:i}=r;setTimeout(()=>{r.state==i&&at(r)},50)}function Ss(r,e){let t=r.state.doc.resolve(e);if(!(ke||j0)&&t.parent.inlineContent){let i=r.coordsAtPos(e);if(e>t.start()){let u=r.coordsAtPos(e-1),l=(u.top+u.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(u.left-i.left)>1)return u.left<i.left?"ltr":"rtl"}if(e<t.end()){let u=r.coordsAtPos(e+1),l=(u.top+u.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(u.left-i.left)>1)return u.left>i.left?"ltr":"rtl"}}return getComputedStyle(r.dom).direction=="rtl"?"rtl":"ltr"}function Es(r,e,t){let n=r.state.selection;if(n instanceof G&&!n.empty||t.indexOf("s")>-1||ze&&t.indexOf("m")>-1)return!1;let{$from:i,$to:u}=n;if(!i.parent.inlineContent||r.endOfTextblock(e<0?"up":"down")){let l=Bi(r.state,e);if(l&&l instanceof q)return dt(r,l)}if(!i.parent.inlineContent){let l=e<0?i:u,o=n instanceof Ie?W.near(l,e):W.findFrom(l,e);return o?dt(r,o):!1}return!1}function As(r,e){if(!(r.state.selection instanceof G))return!0;let{$head:t,$anchor:n,empty:i}=r.state.selection;if(!t.sameParent(n))return!0;if(!i)return!1;if(r.endOfTextblock(e>0?"forward":"backward"))return!0;let u=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(u&&!u.isText){let l=r.state.tr;return e<0?l.delete(t.pos-u.nodeSize,t.pos):l.delete(t.pos,t.pos+u.nodeSize),r.dispatch(l),!0}return!1}function Ms(r,e,t){r.domObserver.stop(),e.contentEditable=t,r.domObserver.start()}function vh(r){if(!Ce||r.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=r.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;Ms(r,n,"true"),setTimeout(()=>Ms(r,n,"false"),20)}return!1}function Sh(r){let e="";return r.ctrlKey&&(e+="c"),r.metaKey&&(e+="m"),r.altKey&&(e+="a"),r.shiftKey&&(e+="s"),e}function Eh(r,e){let t=e.keyCode,n=Sh(e);if(t==8||ze&&t==72&&n=="c")return As(r,-1)||Jt(r,-1);if(t==46&&!e.shiftKey||ze&&t==68&&n=="c")return As(r,1)||Jt(r,1);if(t==13||t==27)return!0;if(t==37||ze&&t==66&&n=="c"){let i=t==37?Ss(r,r.state.selection.from)=="ltr"?-1:1:-1;return vs(r,i,n)||Jt(r,i)}else if(t==39||ze&&t==70&&n=="c"){let i=t==39?Ss(r,r.state.selection.from)=="ltr"?1:-1:1;return vs(r,i,n)||Jt(r,i)}else{if(t==38||ze&&t==80&&n=="c")return Es(r,-1,n)||Jt(r,-1);if(t==40||ze&&t==78&&n=="c")return vh(r)||Es(r,1,n)||Jt(r,1);if(n==(ze?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Pc(r,e){r.someProp("transformCopied",h=>{e=h(e,r)});let t=[],{content:n,openStart:i,openEnd:u}=e;for(;i>1&&u>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,u--;let h=n.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),n=h.content}let l=r.someProp("clipboardSerializer")||st.fromSchema(r.state.schema),o=Hc(),s=o.createElement("div");s.appendChild(l.serializeFragment(n,{document:o}));let a=s.firstChild,c,f=0;for(;a&&a.nodeType==1&&(c=$c[a.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let p=o.createElement(c[h]);for(;s.firstChild;)p.appendChild(s.firstChild);s.appendChild(p),f++}a=s.firstChild}a&&a.nodeType==1&&a.setAttribute("data-pm-slice",`${i} ${u}${f?` -${f}`:""} ${JSON.stringify(t)}`);let d=r.someProp("clipboardTextSerializer",h=>h(e,r))||e.content.textBetween(0,e.content.size,`

`);return{dom:s,text:d}}function Bc(r,e,t,n,i){let u=i.parent.type.spec.code,l,o;if(!t&&!e)return null;let s=e&&(n||u||!t);if(s){if(r.someProp("transformPastedText",d=>{e=d(e,u||n,r)}),u)return e?new B(N.from(r.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):B.empty;let f=r.someProp("clipboardTextParser",d=>d(e,i,n,r));if(f)o=f;else{let d=i.marks(),{schema:h}=r.state,p=st.fromSchema(h);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=l.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,d)))})}}else r.someProp("transformPastedHTML",f=>{t=f(t,r)}),l=Dh(t),Hn&&Th(l);let a=l&&l.querySelector("[data-pm-slice]"),c=a&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(a.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let d=l.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;l=d}if(o||(o=(r.someProp("clipboardParser")||r.someProp("domParser")||An.fromSchema(r.state.schema)).parseSlice(l,{preserveWhitespace:!!(s||c),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!Ah.test(d.parentNode.nodeName)?{ignore:!0}:null}})),c)o=Nh(Ds(o,+c[1],+c[2]),c[4]);else if(o=B.maxOpen(Mh(o.content,i),!0),o.openStart||o.openEnd){let f=0,d=0;for(let h=o.content.firstChild;f<o.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=o.content.lastChild;d<o.openEnd&&!h.type.spec.isolating;d++,h=h.lastChild);o=Ds(o,f,d)}return r.someProp("transformPasted",f=>{o=f(o,r)}),o}const Ah=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Mh(r,e){if(r.childCount<2)return r;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),u,l=[];if(r.forEach(o=>{if(!l)return;let s=i.findWrapping(o.type),a;if(!s)return l=null;if(a=l.length&&u.length&&qc(s,u,o,l[l.length-1],0))l[l.length-1]=a;else{l.length&&(l[l.length-1]=Vc(l[l.length-1],u.length));let c=Lc(o,s);l.push(c),i=i.matchType(c.type),u=s}}),l)return N.from(l)}return r}function Lc(r,e,t=0){for(let n=e.length-1;n>=t;n--)r=e[n].create(null,N.from(r));return r}function qc(r,e,t,n,i){if(i<r.length&&i<e.length&&r[i]==e[i]){let u=qc(r,e,t,n.lastChild,i+1);if(u)return n.copy(n.content.replaceChild(n.childCount-1,u));if(n.contentMatchAt(n.childCount).matchType(i==r.length-1?t.type:r[i+1]))return n.copy(n.content.append(N.from(Lc(t,r,i+1))))}}function Vc(r,e){if(e==0)return r;let t=r.content.replaceChild(r.childCount-1,Vc(r.lastChild,e-1)),n=r.contentMatchAt(r.childCount).fillBefore(N.empty,!0);return r.copy(t.append(n))}function qi(r,e,t,n,i,u){let l=e<0?r.firstChild:r.lastChild,o=l.content;return r.childCount>1&&(u=0),i<n-1&&(o=qi(o,e,t,n,i+1,u)),i>=t&&(o=e<0?l.contentMatchAt(0).fillBefore(o,u<=i).append(o):o.append(l.contentMatchAt(l.childCount).fillBefore(N.empty,!0))),r.replaceChild(e<0?0:r.childCount-1,l.copy(o))}function Ds(r,e,t){return e<r.openStart&&(r=new B(qi(r.content,-1,e,r.openStart,0,r.openEnd),e,r.openEnd)),t<r.openEnd&&(r=new B(qi(r.content,1,t,r.openEnd,0,0),r.openStart,t)),r}const $c={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ts=null;function Hc(){return Ts||(Ts=document.implementation.createHTMLDocument("title"))}function Dh(r){let e=/^(\s*<meta [^>]*>)*/.exec(r);e&&(r=r.slice(e[0].length));let t=Hc().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(r),i;if((i=n&&$c[n[1].toLowerCase()])&&(r=i.map(u=>"<"+u+">").join("")+r+i.map(u=>"</"+u+">").reverse().join("")),t.innerHTML=r,i)for(let u=0;u<i.length;u++)t=t.querySelector(i[u])||t;return t}function Th(r){let e=r.querySelectorAll(ke?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let n=e[t];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),n)}}function Nh(r,e){if(!r.size)return r;let t=r.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return r}let{content:i,openStart:u,openEnd:l}=r;for(let o=n.length-2;o>=0;o-=2){let s=t.nodes[n[o]];if(!s||s.hasRequiredAttrs())break;i=N.from(s.create(n[o+1],i)),u++,l++}return new B(i,u,l)}const ve={},Se={},Oh={touchstart:!0,touchmove:!0};class Ih{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Fh(r){for(let e in ve){let t=ve[e];r.dom.addEventListener(e,r.input.eventHandlers[e]=n=>{zh(r,n)&&!pu(r,n)&&(r.editable||!(n.type in Se))&&t(r,n)},Oh[e]?{passive:!0}:void 0)}Ce&&r.dom.addEventListener("input",()=>null),Vi(r)}function xt(r,e){r.input.lastSelectionOrigin=e,r.input.lastSelectionTime=Date.now()}function Rh(r){r.domObserver.stop();for(let e in r.input.eventHandlers)r.dom.removeEventListener(e,r.input.eventHandlers[e]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}function Vi(r){r.someProp("handleDOMEvents",e=>{for(let t in e)r.input.eventHandlers[t]||r.dom.addEventListener(t,r.input.eventHandlers[t]=n=>pu(r,n))})}function pu(r,e){return r.someProp("handleDOMEvents",t=>{let n=t[e.type];return n?n(r,e)||e.defaultPrevented:!1})}function zh(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=r.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function Ph(r,e){!pu(r,e)&&ve[e.type]&&(r.editable||!(e.type in Se))&&ve[e.type](r,e)}Se.keydown=(r,e)=>{let t=e;if(r.input.shiftKey=t.keyCode==16||t.shiftKey,!Wc(r,t)&&(r.input.lastKeyCode=t.keyCode,r.input.lastKeyCodeTime=Date.now(),!(Ve&&ke&&t.keyCode==13)))if(t.keyCode!=229&&r.domObserver.forceFlush(),on&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let n=Date.now();r.input.lastIOSEnter=n,r.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{r.input.lastIOSEnter==n&&(r.someProp("handleKeyDown",i=>i(r,It(13,"Enter"))),r.input.lastIOSEnter=0)},200)}else r.someProp("handleKeyDown",n=>n(r,t))||Eh(r,t)?t.preventDefault():xt(r,"key")};Se.keyup=(r,e)=>{e.keyCode==16&&(r.input.shiftKey=!1)};Se.keypress=(r,e)=>{let t=e;if(Wc(r,t)||!t.charCode||t.ctrlKey&&!t.altKey||ze&&t.metaKey)return;if(r.someProp("handleKeyPress",i=>i(r,t))){t.preventDefault();return}let n=r.state.selection;if(!(n instanceof G)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!r.someProp("handleTextInput",u=>u(r,n.$from.pos,n.$to.pos,i))&&r.dispatch(r.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function qr(r){return{left:r.clientX,top:r.clientY}}function Bh(r,e){let t=e.x-r.clientX,n=e.y-r.clientY;return t*t+n*n<100}function mu(r,e,t,n,i){if(n==-1)return!1;let u=r.state.doc.resolve(n);for(let l=u.depth+1;l>0;l--)if(r.someProp(e,o=>l>u.depth?o(r,t,u.nodeAfter,u.before(l),i,!0):o(r,t,u.node(l),u.before(l),i,!1)))return!0;return!1}function tn(r,e,t){r.focused||r.focus();let n=r.state.tr.setSelection(e);t=="pointer"&&n.setMeta("pointer",!0),r.dispatch(n)}function Lh(r,e){if(e==-1)return!1;let t=r.state.doc.resolve(e),n=t.nodeAfter;return n&&n.isAtom&&q.isSelectable(n)?(tn(r,new q(t),"pointer"),!0):!1}function qh(r,e){if(e==-1)return!1;let t=r.state.selection,n,i;t instanceof q&&(n=t.node);let u=r.state.doc.resolve(e);for(let l=u.depth+1;l>0;l--){let o=l>u.depth?u.nodeAfter:u.node(l);if(q.isSelectable(o)){n&&t.$from.depth>0&&l>=t.$from.depth&&u.before(t.$from.depth+1)==t.$from.pos?i=u.before(t.$from.depth):i=u.before(l);break}}return i!=null?(tn(r,q.create(r.state.doc,i),"pointer"),!0):!1}function Vh(r,e,t,n,i){return mu(r,"handleClickOn",e,t,n)||r.someProp("handleClick",u=>u(r,e,n))||(i?qh(r,t):Lh(r,t))}function $h(r,e,t,n){return mu(r,"handleDoubleClickOn",e,t,n)||r.someProp("handleDoubleClick",i=>i(r,e,n))}function Hh(r,e,t,n){return mu(r,"handleTripleClickOn",e,t,n)||r.someProp("handleTripleClick",i=>i(r,e,n))||jh(r,t,n)}function jh(r,e,t){if(t.button!=0)return!1;let n=r.state.doc;if(e==-1)return n.inlineContent?(tn(r,G.create(n,0,n.content.size),"pointer"),!0):!1;let i=n.resolve(e);for(let u=i.depth+1;u>0;u--){let l=u>i.depth?i.nodeAfter:i.node(u),o=i.before(u);if(l.inlineContent)tn(r,G.create(n,o+1,o+1+l.content.size),"pointer");else if(q.isSelectable(l))tn(r,q.create(n,o),"pointer");else continue;return!0}}function gu(r){return kr(r)}const jc=ze?"metaKey":"ctrlKey";ve.mousedown=(r,e)=>{let t=e;r.input.shiftKey=t.shiftKey;let n=gu(r),i=Date.now(),u="singleClick";i-r.input.lastClick.time<500&&Bh(t,r.input.lastClick)&&!t[jc]&&(r.input.lastClick.type=="singleClick"?u="doubleClick":r.input.lastClick.type=="doubleClick"&&(u="tripleClick")),r.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:u};let l=r.posAtCoords(qr(t));l&&(u=="singleClick"?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new Wh(r,l,t,!!n)):(u=="doubleClick"?$h:Hh)(r,l.pos,l.inside,t)?t.preventDefault():xt(r,"pointer"))};class Wh{constructor(e,t,n,i){this.view=e,this.pos=t,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[jc],this.allowDefault=n.shiftKey;let u,l;if(t.inside>-1)u=e.state.doc.nodeAt(t.inside),l=t.inside;else{let c=e.state.doc.resolve(t.pos);u=c.parent,l=c.depth?c.before():0}const o=i?null:n.target,s=o?e.docView.nearestDesc(o,!0):null;this.target=s?s.dom:null;let{selection:a}=e.state;(n.button==0&&u.type.spec.draggable&&u.type.spec.selectable!==!1||a instanceof q&&a.from<=l&&a.to>l)&&(this.mightDrag={node:u,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&We&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),xt(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>at(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(qr(e))),this.updateAllowDefault(e),this.allowDefault||!t?xt(this.view,"pointer"):Vh(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ce&&this.mightDrag&&!this.mightDrag.node.isAtom||ke&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(tn(this.view,W.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):xt(this.view,"pointer")}move(e){this.updateAllowDefault(e),xt(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ve.touchstart=r=>{r.input.lastTouch=Date.now(),gu(r),xt(r,"pointer")};ve.touchmove=r=>{r.input.lastTouch=Date.now(),xt(r,"pointer")};ve.contextmenu=r=>gu(r);function Wc(r,e){return r.composing?!0:Ce&&Math.abs(e.timeStamp-r.input.compositionEndedAt)<500?(r.input.compositionEndedAt=-2e8,!0):!1}const Uh=Ve?5e3:-1;Se.compositionstart=Se.compositionupdate=r=>{if(!r.composing){r.domObserver.flush();let{state:e}=r,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))r.markCursor=r.state.storedMarks||t.marks(),kr(r,!0),r.markCursor=null;else if(kr(r),We&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let n=r.domSelectionRange();for(let i=n.focusNode,u=n.focusOffset;i&&i.nodeType==1&&u!=0;){let l=u<0?i.lastChild:i.childNodes[u-1];if(!l)break;if(l.nodeType==3){r.domSelection().collapse(l,l.nodeValue.length);break}else i=l,u=-1}}r.input.composing=!0}Uc(r,Uh)};Se.compositionend=(r,e)=>{r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=e.timeStamp,r.input.compositionPendingChanges=r.domObserver.pendingRecords().length?r.input.compositionID:0,r.input.compositionPendingChanges&&Promise.resolve().then(()=>r.domObserver.flush()),r.input.compositionID++,Uc(r,20))};function Uc(r,e){clearTimeout(r.input.composingTimeout),e>-1&&(r.input.composingTimeout=setTimeout(()=>kr(r),e))}function Jc(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=Jh());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function Jh(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}function kr(r,e=!1){if(!(Ve&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),Jc(r),e||r.docView&&r.docView.dirty){let t=du(r);return t&&!t.eq(r.state.selection)?r.dispatch(r.state.tr.setSelection(t)):r.updateState(r.state),!0}return!1}}function Kh(r,e){if(!r.dom.parentNode)return;let t=r.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),r.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),r.focus()},50)}const Tn=De&&vt<15||on&&W0<604;ve.copy=Se.cut=(r,e)=>{let t=e,n=r.state.selection,i=t.type=="cut";if(n.empty)return;let u=Tn?null:t.clipboardData,l=n.content(),{dom:o,text:s}=Pc(r,l);u?(t.preventDefault(),u.clearData(),u.setData("text/html",o.innerHTML),u.setData("text/plain",s)):Kh(r,o),i&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Gh(r){return r.openStart==0&&r.openEnd==0&&r.content.childCount==1?r.content.firstChild:null}function Zh(r,e){if(!r.dom.parentNode)return;let t=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,n=r.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=r.input.shiftKey&&r.input.lastKeyCode!=45;setTimeout(()=>{r.focus(),n.parentNode&&n.parentNode.removeChild(n),t?Nn(r,n.value,null,i,e):Nn(r,n.textContent,n.innerHTML,i,e)},50)}function Nn(r,e,t,n,i){let u=Bc(r,e,t,n,r.state.selection.$from);if(r.someProp("handlePaste",s=>s(r,i,u||B.empty)))return!0;if(!u)return!1;let l=Gh(u),o=l?r.state.tr.replaceSelectionWith(l,n):r.state.tr.replaceSelection(u);return r.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Kc(r){let e=r.getData("text/plain")||r.getData("Text");if(e)return e;let t=r.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Se.paste=(r,e)=>{let t=e;if(r.composing&&!Ve)return;let n=Tn?null:t.clipboardData,i=r.input.shiftKey&&r.input.lastKeyCode!=45;n&&Nn(r,Kc(n),n.getData("text/html"),i,t)?t.preventDefault():Zh(r,t)};class Gc{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const Zc=ze?"altKey":"ctrlKey";ve.dragstart=(r,e)=>{let t=e,n=r.input.mouseDown;if(n&&n.done(),!t.dataTransfer)return;let i=r.state.selection,u=i.empty?null:r.posAtCoords(qr(t)),l;if(!(u&&u.pos>=i.from&&u.pos<=(i instanceof q?i.to-1:i.to))){if(n&&n.mightDrag)l=q.create(r.state.doc,n.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let c=r.docView.nearestDesc(t.target,!0);c&&c.node.type.spec.draggable&&c!=r.docView&&(l=q.create(r.state.doc,c.posBefore))}}let o=(l||r.state.selection).content(),{dom:s,text:a}=Pc(r,o);t.dataTransfer.clearData(),t.dataTransfer.setData(Tn?"Text":"text/html",s.innerHTML),t.dataTransfer.effectAllowed="copyMove",Tn||t.dataTransfer.setData("text/plain",a),r.dragging=new Gc(o,!t[Zc],l)};ve.dragend=r=>{let e=r.dragging;window.setTimeout(()=>{r.dragging==e&&(r.dragging=null)},50)};Se.dragover=Se.dragenter=(r,e)=>e.preventDefault();Se.drop=(r,e)=>{let t=e,n=r.dragging;if(r.dragging=null,!t.dataTransfer)return;let i=r.posAtCoords(qr(t));if(!i)return;let u=r.state.doc.resolve(i.pos),l=n&&n.slice;l?r.someProp("transformPasted",p=>{l=p(l,r)}):l=Bc(r,Kc(t.dataTransfer),Tn?null:t.dataTransfer.getData("text/html"),!1,u);let o=!!(n&&!t[Zc]);if(r.someProp("handleDrop",p=>p(r,t,l||B.empty,o))){t.preventDefault();return}if(!l)return;t.preventDefault();let s=l?hc(r.state.doc,u.pos,l):u.pos;s==null&&(s=u.pos);let a=r.state.tr;if(o){let{node:p}=n;p?p.replace(a):a.deleteSelection()}let c=a.mapping.map(s),f=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,d=a.doc;if(f?a.replaceRangeWith(c,c,l.content.firstChild):a.replaceRange(c,c,l),a.doc.eq(d))return;let h=a.doc.resolve(c);if(f&&q.isSelectable(l.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(l.content.firstChild))a.setSelection(new q(h));else{let p=a.mapping.map(s);a.mapping.maps[a.mapping.maps.length-1].forEach((m,g,y,w)=>p=w),a.setSelection(hu(r,h,a.doc.resolve(p)))}r.focus(),r.dispatch(a.setMeta("uiEvent","drop"))};ve.focus=r=>{r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(()=>{r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&at(r)},20))};ve.blur=(r,e)=>{let t=e;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),t.relatedTarget&&r.dom.contains(t.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)};ve.beforeinput=(r,e)=>{if(ke&&Ve&&e.inputType=="deleteContentBackward"){r.domObserver.flushSoon();let{domChangeCount:n}=r.input;setTimeout(()=>{if(r.input.domChangeCount!=n||(r.dom.blur(),r.focus(),r.someProp("handleKeyDown",u=>u(r,It(8,"Backspace")))))return;let{$cursor:i}=r.state.selection;i&&i.pos>0&&r.dispatch(r.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let r in Se)ve[r]=Se[r];function On(r,e){if(r==e)return!0;for(let t in r)if(r[t]!==e[t])return!1;for(let t in e)if(!(t in r))return!1;return!0}class yr{constructor(e,t){this.toDOM=e,this.spec=t||qt,this.side=this.spec.side||0}map(e,t,n,i){let{pos:u,deleted:l}=e.mapResult(t.from+i,this.side<0?-1:1);return l?null:new Oe(u-n,u-n,this)}valid(){return!0}eq(e){return this==e||e instanceof yr&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&On(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Et{constructor(e,t){this.attrs=e,this.spec=t||qt}map(e,t,n,i){let u=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-n,l=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-n;return u>=l?null:new Oe(u,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Et&&On(this.attrs,e.attrs)&&On(this.spec,e.spec)}static is(e){return e.type instanceof Et}destroy(){}}class bu{constructor(e,t){this.attrs=e,this.spec=t||qt}map(e,t,n,i){let u=e.mapResult(t.from+i,1);if(u.deleted)return null;let l=e.mapResult(t.to+i,-1);return l.deleted||l.pos<=u.pos?null:new Oe(u.pos-n,l.pos-n,this)}valid(e,t){let{index:n,offset:i}=e.content.findIndex(t.from),u;return i==t.from&&!(u=e.child(n)).isText&&i+u.nodeSize==t.to}eq(e){return this==e||e instanceof bu&&On(this.attrs,e.attrs)&&On(this.spec,e.spec)}destroy(){}}class Oe{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new Oe(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new Oe(e,e,new yr(t,n))}static inline(e,t,n,i){return new Oe(e,t,new Et(n,i))}static node(e,t,n,i){return new Oe(e,t,new bu(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Et}get widget(){return this.type instanceof yr}}const Zt=[],qt={};class le{constructor(e,t){this.local=e.length?e:Zt,this.children=t.length?t:Zt}static create(e,t){return t.length?xr(t,e,0,qt):be}find(e,t,n){let i=[];return this.findInner(e??0,t??1e9,i,0,n),i}findInner(e,t,n,i,u){for(let l=0;l<this.local.length;l++){let o=this.local[l];o.from<=t&&o.to>=e&&(!u||u(o.spec))&&n.push(o.copy(o.from+i,o.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let o=this.children[l]+1;this.children[l+2].findInner(e-o,t-o,n,i+o,u)}}map(e,t,n){return this==be||e.maps.length==0?this:this.mapInner(e,t,0,0,n||qt)}mapInner(e,t,n,i,u){let l;for(let o=0;o<this.local.length;o++){let s=this.local[o].map(e,n,i);s&&s.type.valid(t,s)?(l||(l=[])).push(s):u.onRemove&&u.onRemove(this.local[o].spec)}return this.children.length?Qh(this.children,l||[],e,t,n,i,u):l?new le(l.sort(Vt),Zt):be}add(e,t){return t.length?this==be?le.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let i,u=0;e.forEach((o,s)=>{let a=s+n,c;if(c=Yc(t,o,a)){for(i||(i=this.children.slice());u<i.length&&i[u]<s;)u+=3;i[u]==s?i[u+2]=i[u+2].addInner(o,c,a+1):i.splice(u,0,s,s+o.nodeSize,xr(c,o,a+1,qt)),u+=3}});let l=Qc(u?Xc(t):t,-n);for(let o=0;o<l.length;o++)l[o].type.valid(e,l[o])||l.splice(o--,1);return new le(l.length?this.local.concat(l).sort(Vt):this.local,i||this.children)}remove(e){return e.length==0||this==be?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,i=this.local;for(let u=0;u<n.length;u+=3){let l,o=n[u]+t,s=n[u+1]+t;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>o&&f.to<s&&(e[c]=null,(l||(l=[])).push(f));if(!l)continue;n==this.children&&(n=this.children.slice());let a=n[u+2].removeInner(l,o+1);a!=be?n[u+2]=a:(n.splice(u,3),u-=3)}if(i.length){for(let u=0,l;u<e.length;u++)if(l=e[u])for(let o=0;o<i.length;o++)i[o].eq(l,t)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new le(i,n):be}forChild(e,t){if(this==be)return this;if(t.isLeaf)return le.empty;let n,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}let u=e+1,l=u+t.content.size;for(let o=0;o<this.local.length;o++){let s=this.local[o];if(s.from<l&&s.to>u&&s.type instanceof Et){let a=Math.max(u,s.from)-u,c=Math.min(l,s.to)-u;a<c&&(i||(i=[])).push(s.copy(a,c))}}if(i){let o=new le(i.sort(Vt),Zt);return n?new mt([o,n]):o}return n||be}eq(e){if(this==e)return!0;if(!(e instanceof le)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return _u(this.localsInner(e))}localsInner(e){if(this==be)return Zt;if(e.inlineContent||!this.local.some(Et.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Et||t.push(this.local[n]);return t}}le.empty=new le([],[]);le.removeOverlap=_u;const be=le.empty;class mt{constructor(e){this.members=e}map(e,t){const n=this.members.map(i=>i.map(e,t,qt));return mt.from(n)}forChild(e,t){if(t.isLeaf)return le.empty;let n=[];for(let i=0;i<this.members.length;i++){let u=this.members[i].forChild(e,t);u!=be&&(u instanceof mt?n=n.concat(u.members):n.push(u))}return mt.from(n)}eq(e){if(!(e instanceof mt)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let i=0;i<this.members.length;i++){let u=this.members[i].localsInner(e);if(u.length)if(!t)t=u;else{n&&(t=t.slice(),n=!1);for(let l=0;l<u.length;l++)t.push(u[l])}}return t?_u(n?t:t.sort(Vt)):Zt}static from(e){switch(e.length){case 0:return be;case 1:return e[0];default:return new mt(e.every(t=>t instanceof le)?e:e.reduce((t,n)=>t.concat(n instanceof le?n:n.members),[]))}}}function Qh(r,e,t,n,i,u,l){let o=r.slice();for(let a=0,c=u;a<t.maps.length;a++){let f=0;t.maps[a].forEach((d,h,p,m)=>{let g=m-p-(h-d);for(let y=0;y<o.length;y+=3){let w=o[y+1];if(w<0||d>w+c-f)continue;let k=o[y]+c-f;h>=k?o[y+1]=d<=k?-2:-1:d>=c&&g&&(o[y]+=g,o[y+1]+=g)}f+=g}),c=t.maps[a].map(c,-1)}let s=!1;for(let a=0;a<o.length;a+=3)if(o[a+1]<0){if(o[a+1]==-2){s=!0,o[a+1]=-1;continue}let c=t.map(r[a]+u),f=c-i;if(f<0||f>=n.content.size){s=!0;continue}let d=t.map(r[a+1]+u,-1),h=d-i,{index:p,offset:m}=n.content.findIndex(f),g=n.maybeChild(p);if(g&&m==f&&m+g.nodeSize==h){let y=o[a+2].mapInner(t,g,c+1,r[a]+u+1,l);y!=be?(o[a]=f,o[a+1]=h,o[a+2]=y):(o[a+1]=-2,s=!0)}else s=!0}if(s){let a=Yh(o,r,e,t,i,u,l),c=xr(a,n,0,l);e=c.local;for(let f=0;f<o.length;f+=3)o[f+1]<0&&(o.splice(f,3),f-=3);for(let f=0,d=0;f<c.children.length;f+=3){let h=c.children[f];for(;d<o.length&&o[d]<h;)d+=3;o.splice(d,0,c.children[f],c.children[f+1],c.children[f+2])}}return new le(e.sort(Vt),o)}function Qc(r,e){if(!e||!r.length)return r;let t=[];for(let n=0;n<r.length;n++){let i=r[n];t.push(new Oe(i.from+e,i.to+e,i.type))}return t}function Yh(r,e,t,n,i,u,l){function o(s,a){for(let c=0;c<s.local.length;c++){let f=s.local[c].map(n,i,a);f?t.push(f):l.onRemove&&l.onRemove(s.local[c].spec)}for(let c=0;c<s.children.length;c+=3)o(s.children[c+2],s.children[c]+a+1)}for(let s=0;s<r.length;s+=3)r[s+1]==-1&&o(r[s+2],e[s]+u+1);return t}function Yc(r,e,t){if(e.isLeaf)return null;let n=t+e.nodeSize,i=null;for(let u=0,l;u<r.length;u++)(l=r[u])&&l.from>t&&l.to<n&&((i||(i=[])).push(l),r[u]=null);return i}function Xc(r){let e=[];for(let t=0;t<r.length;t++)r[t]!=null&&e.push(r[t]);return e}function xr(r,e,t,n){let i=[],u=!1;e.forEach((o,s)=>{let a=Yc(r,o,s+t);if(a){u=!0;let c=xr(a,o,t+s+1,n);c!=be&&i.push(s,s+o.nodeSize,c)}});let l=Qc(u?Xc(r):r,-t).sort(Vt);for(let o=0;o<l.length;o++)l[o].type.valid(e,l[o])||(n.onRemove&&n.onRemove(l[o].spec),l.splice(o--,1));return l.length||i.length?new le(l,i):be}function Vt(r,e){return r.from-e.from||r.to-e.to}function _u(r){let e=r;for(let t=0;t<e.length-1;t++){let n=e[t];if(n.from!=n.to)for(let i=t+1;i<e.length;i++){let u=e[i];if(u.from==n.from){u.to!=n.to&&(e==r&&(e=r.slice()),e[i]=u.copy(u.from,n.to),Ns(e,i+1,u.copy(n.to,u.to)));continue}else{u.from<n.to&&(e==r&&(e=r.slice()),e[t]=n.copy(n.from,u.from),Ns(e,i,n.copy(u.from,n.to)));break}}}return e}function Ns(r,e,t){for(;e<r.length&&Vt(t,r[e])>0;)e++;r.splice(e,0,t)}function li(r){let e=[];return r.someProp("decorations",t=>{let n=t(r.state);n&&n!=be&&e.push(n)}),r.cursorWrapper&&e.push(le.create(r.state.doc,[r.cursorWrapper.deco])),mt.from(e)}const Xh={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ep=De&&vt<=11;class tp{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class np{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new tp,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);De&&vt<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),ep&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Xh)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Cs(this.view)){if(this.suppressingSelectionUpdates)return at(this.view);if(De&&vt<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&jt(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let u=e.focusNode;u;u=Dn(u))t.add(u);for(let u=e.anchorNode;u;u=Dn(u))if(t.has(u)){n=u;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Cs(e)&&!this.ignoreSelectionChange(n),u=-1,l=-1,o=!1,s=[];if(e.editable)for(let c=0;c<t.length;c++){let f=this.registerMutation(t[c],s);f&&(u=u<0?f.from:Math.min(f.from,u),l=l<0?f.to:Math.max(f.to,l),f.typeOver&&(o=!0))}if(We&&s.length>1){let c=s.filter(f=>f.nodeName=="BR");if(c.length==2){let f=c[0],d=c[1];f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}}let a=null;u<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Br(n)&&(a=du(e))&&a.eq(W.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,at(e),this.currentSelection.set(n),e.scrollToSelection()):(u>-1||i)&&(u>-1&&(e.docView.markDirty(u,l),rp(e)),this.handleDOMChange(u,l,o,s),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||at(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++)t.push(e.addedNodes[c]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,u=e.nextSibling;if(De&&vt<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:d}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(u=d)}let l=i&&i.parentNode==e.target?xe(i)+1:0,o=n.localPosFromDOM(e.target,l,-1),s=u&&u.parentNode==e.target?xe(u):e.target.childNodes.length,a=n.localPosFromDOM(e.target,s,1);return{from:o,to:a}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let Os=new WeakMap,Is=!1;function rp(r){if(!Os.has(r)&&(Os.set(r,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace)!==-1)){if(r.requiresGeckoHackNode=We,Is)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Is=!0}}function ip(r){let e;function t(s){s.preventDefault(),s.stopImmediatePropagation(),e=s.getTargetRanges()[0]}r.dom.addEventListener("beforeinput",t,!0),document.execCommand("indent"),r.dom.removeEventListener("beforeinput",t,!0);let n=e.startContainer,i=e.startOffset,u=e.endContainer,l=e.endOffset,o=r.domAtPos(r.state.selection.anchor);return jt(o.node,o.offset,u,l)&&([n,i,u,l]=[u,l,n,i]),{anchorNode:n,anchorOffset:i,focusNode:u,focusOffset:l}}function up(r,e,t){let{node:n,fromOffset:i,toOffset:u,from:l,to:o}=r.docView.parseRange(e,t),s=r.domSelectionRange(),a,c=s.anchorNode;if(c&&r.dom.contains(c.nodeType==1?c:c.parentNode)&&(a=[{node:c,offset:s.anchorOffset}],Br(s)||a.push({node:s.focusNode,offset:s.focusOffset})),ke&&r.input.lastKeyCode===8)for(let g=u;g>i;g--){let y=n.childNodes[g-1],w=y.pmViewDesc;if(y.nodeName=="BR"&&!w){u=g;break}if(!w||w.size)break}let f=r.state.doc,d=r.someProp("domParser")||An.fromSchema(r.state.schema),h=f.resolve(l),p=null,m=d.parse(n,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:u,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:a,ruleFromNode:lp,context:h});if(a&&a[0].pos!=null){let g=a[0].pos,y=a[1]&&a[1].pos;y==null&&(y=g),p={anchor:g+l,head:y+l}}return{doc:m,sel:p,from:l,to:o}}function lp(r){let e=r.pmViewDesc;if(e)return e.parseRule();if(r.nodeName=="BR"&&r.parentNode){if(Ce&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(r.parentNode.lastChild==r||Ce&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if(r.nodeName=="IMG"&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}const op=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function sp(r,e,t,n,i){let u=r.input.compositionPendingChanges||(r.composing?r.input.compositionID:0);if(r.input.compositionPendingChanges=0,e<0){let A=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,L=du(r,A);if(L&&!r.state.selection.eq(L)){if(ke&&Ve&&r.input.lastKeyCode===13&&Date.now()-100<r.input.lastKeyCodeTime&&r.someProp("handleKeyDown",re=>re(r,It(13,"Enter"))))return;let H=r.state.tr.setSelection(L);A=="pointer"?H.setMeta("pointer",!0):A=="key"&&H.scrollIntoView(),u&&H.setMeta("composition",u),r.dispatch(H)}return}let l=r.state.doc.resolve(e),o=l.sharedDepth(t);e=l.before(o+1),t=r.state.doc.resolve(t).after(o+1);let s=r.state.selection,a=up(r,e,t),c=r.state.doc,f=c.slice(a.from,a.to),d,h;r.input.lastKeyCode===8&&Date.now()-100<r.input.lastKeyCodeTime?(d=r.state.selection.to,h="end"):(d=r.state.selection.from,h="start"),r.input.lastKeyCode=null;let p=fp(f.content,a.doc.content,a.from,d,h);if((on&&r.input.lastIOSEnter>Date.now()-225||Ve)&&i.some(A=>A.nodeType==1&&!op.test(A.nodeName))&&(!p||p.endA>=p.endB)&&r.someProp("handleKeyDown",A=>A(r,It(13,"Enter")))){r.input.lastIOSEnter=0;return}if(!p)if(n&&s instanceof G&&!s.empty&&s.$head.sameParent(s.$anchor)&&!r.composing&&!(a.sel&&a.sel.anchor!=a.sel.head))p={start:s.from,endA:s.to,endB:s.to};else{if(a.sel){let A=Fs(r,r.state.doc,a.sel);if(A&&!A.eq(r.state.selection)){let L=r.state.tr.setSelection(A);u&&L.setMeta("composition",u),r.dispatch(L)}}return}if(ke&&r.cursorWrapper&&a.sel&&a.sel.anchor==r.cursorWrapper.deco.from&&a.sel.head==a.sel.anchor){let A=p.endB-p.start;a.sel={anchor:a.sel.anchor+A,head:a.sel.anchor+A}}r.input.domChangeCount++,r.state.selection.from<r.state.selection.to&&p.start==p.endB&&r.state.selection instanceof G&&(p.start>r.state.selection.from&&p.start<=r.state.selection.from+2&&r.state.selection.from>=a.from?p.start=r.state.selection.from:p.endA<r.state.selection.to&&p.endA>=r.state.selection.to-2&&r.state.selection.to<=a.to&&(p.endB+=r.state.selection.to-p.endA,p.endA=r.state.selection.to)),De&&vt<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>a.from&&a.doc.textBetween(p.start-a.from-1,p.start-a.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=a.doc.resolveNoCache(p.start-a.from),g=a.doc.resolveNoCache(p.endB-a.from),y=c.resolve(p.start),w=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA,k;if((on&&r.input.lastIOSEnter>Date.now()-225&&(!w||i.some(A=>A.nodeName=="DIV"||A.nodeName=="P"))||!w&&m.pos<a.doc.content.size&&!m.sameParent(g)&&(k=W.findFrom(a.doc.resolve(m.pos+1),1,!0))&&k.head==g.pos)&&r.someProp("handleKeyDown",A=>A(r,It(13,"Enter")))){r.input.lastIOSEnter=0;return}if(r.state.selection.anchor>p.start&&cp(c,p.start,p.endA,m,g)&&r.someProp("handleKeyDown",A=>A(r,It(8,"Backspace")))){Ve&&ke&&r.domObserver.suppressSelectionUpdates();return}ke&&Ve&&p.endB==p.start&&(r.input.lastAndroidDelete=Date.now()),Ve&&!w&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&a.sel&&a.sel.anchor==a.sel.head&&a.sel.head==p.endA&&(p.endB-=2,g=a.doc.resolveNoCache(p.endB-a.from),setTimeout(()=>{r.someProp("handleKeyDown",function(A){return A(r,It(13,"Enter"))})},20));let S=p.start,E=p.endA,z,P,V;if(w){if(m.pos==g.pos)De&&vt<=11&&m.parentOffset==0&&(r.domObserver.suppressSelectionUpdates(),setTimeout(()=>at(r),20)),z=r.state.tr.delete(S,E),P=c.resolve(p.start).marksAcross(c.resolve(p.endA));else if(p.endA==p.endB&&(V=ap(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start()))))z=r.state.tr,V.type=="add"?z.addMark(S,E,V.mark):z.removeMark(S,E,V.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let A=m.parent.textBetween(m.parentOffset,g.parentOffset);if(r.someProp("handleTextInput",L=>L(r,S,E,A)))return;z=r.state.tr.insertText(A,S,E)}}if(z||(z=r.state.tr.replace(S,E,a.doc.slice(p.start-a.from,p.endB-a.from))),a.sel){let A=Fs(r,z.doc,a.sel);A&&!(ke&&Ve&&r.composing&&A.empty&&(p.start!=p.endB||r.input.lastAndroidDelete<Date.now()-100)&&(A.head==S||A.head==z.mapping.map(E)-1)||De&&A.empty&&A.head==S)&&z.setSelection(A)}P&&z.ensureMarks(P),u&&z.setMeta("composition",u),r.dispatch(z.scrollIntoView())}function Fs(r,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:hu(r,e.resolve(t.anchor),e.resolve(t.head))}function ap(r,e){let t=r.firstChild.marks,n=e.firstChild.marks,i=t,u=n,l,o,s;for(let c=0;c<n.length;c++)i=n[c].removeFromSet(i);for(let c=0;c<t.length;c++)u=t[c].removeFromSet(u);if(i.length==1&&u.length==0)o=i[0],l="add",s=c=>c.mark(o.addToSet(c.marks));else if(i.length==0&&u.length==1)o=u[0],l="remove",s=c=>c.mark(o.removeFromSet(c.marks));else return null;let a=[];for(let c=0;c<e.childCount;c++)a.push(s(e.child(c)));if(N.from(a).eq(r))return{mark:o,type:l}}function cp(r,e,t,n,i){if(!n.parent.isTextblock||t-e<=i.pos-n.pos||oi(n,!0,!1)<i.pos)return!1;let u=r.resolve(e);if(u.parentOffset<u.parent.content.size||!u.parent.isTextblock)return!1;let l=r.resolve(oi(u,!0,!0));return!l.parent.isTextblock||l.pos>t||oi(l,!0,!1)<t?!1:n.parent.content.cut(n.parentOffset).eq(l.parent.content)}function oi(r,e,t){let n=r.depth,i=e?r.end():r.pos;for(;n>0&&(e||r.indexAfter(n)==r.node(n).childCount);)n--,i++,e=!1;if(t){let u=r.node(n).maybeChild(r.indexAfter(n));for(;u&&!u.isLeaf;)u=u.firstChild,i++}return i}function fp(r,e,t,n,i){let u=r.findDiffStart(e,t);if(u==null)return null;let{a:l,b:o}=r.findDiffEnd(e,t+r.size,t+e.size);if(i=="end"){let s=Math.max(0,u-Math.min(l,o));n-=l+s-u}if(l<u&&r.size<e.size){let s=n<=u&&n>=l?u-n:0;u-=s,u&&u<e.size&&Rs(e.textBetween(u-1,u+1))&&(u+=s?1:-1),o=u+(o-l),l=u}else if(o<u){let s=n<=u&&n>=o?u-n:0;u-=s,u&&u<r.size&&Rs(r.textBetween(u-1,u+1))&&(u+=s?1:-1),l=u+(l-o),o=u}return{start:u,endA:l,endB:o}}function Rs(r){if(r.length!=2)return!1;let e=r.charCodeAt(0),t=r.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class dp{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ih,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(qs),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Bs(this),Ps(this),this.nodeViews=Ls(this),this.docView=bs(this.state.doc,zs(this),li(this),this.dom,this),this.domObserver=new np(this,(n,i,u,l)=>sp(this,n,i,u,l)),this.domObserver.start(),Fh(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Vi(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(qs),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let i=this.state,u=!1,l=!1;e.storedMarks&&this.composing&&(Jc(this),l=!0),this.state=e;let o=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(o||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let h=Ls(this);pp(h,this.nodeViews)&&(this.nodeViews=h,u=!0)}(o||t.handleDOMEvents!=this._props.handleDOMEvents)&&Vi(this),this.editable=Bs(this),Ps(this);let s=li(this),a=zs(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=u||!this.docView.matchesNode(e.doc,a,s);(f||!e.selection.eq(i.selection))&&(l=!0);let d=c=="preserve"&&l&&this.dom.style.overflowAnchor==null&&K0(this);if(l){this.domObserver.stop();let h=f&&(De||ke)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&hp(i.selection,e.selection);if(f){let p=ke?this.trackWrites=this.domSelectionRange().focusNode:null;(u||!this.docView.update(e.doc,a,s,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=bs(e.doc,a,s,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&kh(this))?at(this,h):(Fc(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&G0(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof q){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&fs(this,t.getBoundingClientRect(),e)}else fs(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let n=this.directPlugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let n=this.state.plugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}}updateDraggedNode(e,t){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let u=n.from+(this.state.doc.content.size-t.doc.content.size);(u>0&&this.state.doc.nodeAt(u))==n.node&&(i=u)}this.dragging=new Gc(e.slice,e.move,i<0?void 0:q.create(this.state.doc,i))}someProp(e,t){let n=this._props&&this._props[e],i;if(n!=null&&(i=t?t(n):n))return i;for(let l=0;l<this.directPlugins.length;l++){let o=this.directPlugins[l].props[e];if(o!=null&&(i=t?t(o):o))return i}let u=this.state.plugins;if(u)for(let l=0;l<u.length;l++){let o=u[l].props[e];if(o!=null&&(i=t?t(o):o))return i}}hasFocus(){if(De){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Z0(this.dom),at(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return th(this,e)}coordsAtPos(e,t=1){return Ec(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let i=this.docView.posFromDOM(e,t,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return lh(this,t||this.state,e)}pasteHTML(e,t){return Nn(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Nn(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(Rh(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],li(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Ph(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return Ce&&this.root.nodeType===11&&V0(this.dom.ownerDocument)==this.dom?ip(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function zs(r){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(r.editable),r.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(r.state)),t)for(let n in t)n=="class"?e.class+=" "+t[n]:n=="style"?e.style=(e.style?e.style+";":"")+t[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(t[n]))}),e.translate||(e.translate="no"),[Oe.node(0,r.state.doc.content.size,e)]}function Ps(r){if(r.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),r.cursorWrapper={dom:e,deco:Oe.widget(r.state.selection.head,e,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function Bs(r){return!r.someProp("editable",e=>e(r.state)===!1)}function hp(r,e){let t=Math.min(r.$anchor.sharedDepth(r.head),e.$anchor.sharedDepth(e.head));return r.$anchor.start(t)!=e.$anchor.start(t)}function Ls(r){let e=Object.create(null);function t(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return r.someProp("nodeViews",t),r.someProp("markViews",t),e}function pp(r,e){let t=0,n=0;for(let i in r){if(r[i]!=e[i])return!0;t++}for(let i in e)n++;return t!=n}function qs(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const wr=r=>Nr(r),ef="[ProsemirrorAdapter]useNodeViewFactory",mp=()=>Nr(ef);class gp extends $d{constructor(){super(...arguments),this.key=uu(),this._context={contentRef:e=>{e&&e instanceof HTMLElement&&this.contentDOM&&e.firstChild!==this.contentDOM&&e.appendChild(this.contentDOM)},view:this.view,getPos:this.getPos,setAttrs:this.setAttrs,node:Ft(this.node),selected:Ft(this.selected),decorations:Ft(this.decorations),innerDecorations:Ft(this.innerDecorations)},this.context=new Map(Object.entries(this._context)),this.updateContext=()=>{const e={node:this.node,selected:this.selected,decorations:this.decorations,innerDecorations:this.innerDecorations};Object.entries(e).forEach(([t,n])=>{const i=t;this.context.get(i).set(n)})},this.render=()=>{const e=this.component;return new e({target:this.dom,context:this.context})}}}const bp=(r,e)=>t=>(n,i,u,l,o)=>{const s=new gp({node:n,view:i,getPos:u,decorations:l,innerDecorations:o,options:{...t,onUpdate(){var a;(a=t.onUpdate)==null||a.call(t),s.updateContext()},selectNode(){var a;(a=t.selectNode)==null||a.call(t),s.updateContext()},deselectNode(){var a;(a=t.deselectNode)==null||a.call(t),s.updateContext()},destroy(){var a;(a=t.destroy)==null||a.call(t),e(s)}}});return r(s),s},_p="[ProsemirrorAdapter]usePluginViewFactory";class kp extends Hd{constructor(){super(...arguments),this.key=uu(),this._context={view:Ft(this.view),prevState:Ft(this.prevState)},this.context=new Map(Object.entries(this._context)),this.updateContext=()=>{const e={view:this.view,prevState:this.prevState};Object.entries(e).forEach(([t,n])=>{const i=t;this.context.get(i).set(n)})},this.render=()=>{const e=this.component;return new e({target:this.root,context:this.context})}}}const yp=(r,e)=>t=>n=>{const i=new kp({view:n,options:{...t,update:(u,l)=>{var o;(o=t.update)==null||o.call(t,u,l),i.updateContext()},destroy:()=>{var u;(u=t.destroy)==null||u.call(t),e(i)}}});return r(i),i},xp=()=>{const r=Ft({});return{portals:r,renderSvelteRenderer:e=>{r.update(t=>({...t,[e.key]:e.render()}))},removeSvelteRenderer:e=>{r.update(t=>{const{[e.key]:n,...i}=t;return i})}}};class wp extends jd{constructor(){super(...arguments),this.key=uu(),this._context={view:this.view,getPos:this.getPos,spec:this.spec},this.context=new Map(Object.entries(this._context)),this.updateContext=()=>{const e={view:this.view,getPos:this.getPos,spec:this.spec};Object.entries(e).forEach(([t,n])=>{this.context.set(t,n)})},this.render=()=>{const e=this.component;return new e({target:this.dom,context:this.context})}}}const Cp=r=>Nr(r),tf="[ProsemirrorAdapter]useWidgetViewFactory",vp=()=>Nr(tf),Sp=(r,e)=>t=>(n,i={})=>{const u=new wp({pos:n,options:t}),l={...i,destroy:o=>{var s;(s=i.destroy)==null||s.call(i,o),e(u)}};return u.spec=l,Oe.widget(n,(o,s)=>(u.bind(o,s),u.updateContext(),r(u),u.dom),l)},Ep=()=>{const{renderSvelteRenderer:r,removeSvelteRenderer:e}=xp(),t=bp(r,e),n=yp(r,e),i=Sp(r,e);Ur(ef,t),Ur(_p,n),Ur(tf,i)};var Mt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Cr={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ap=typeof navigator<"u"&&/Mac/.test(navigator.platform),Mp=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var he=0;he<10;he++)Mt[48+he]=Mt[96+he]=String(he);for(var he=1;he<=24;he++)Mt[he+111]="F"+he;for(var he=65;he<=90;he++)Mt[he]=String.fromCharCode(he+32),Cr[he]=String.fromCharCode(he);for(var si in Mt)Cr.hasOwnProperty(si)||(Cr[si]=Mt[si]);function Dp(r){var e=Ap&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||Mp&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?Cr:Mt)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const Tp=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Np(r){let e=r.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let n,i,u,l;for(let o=0;o<e.length-1;o++){let s=e[o];if(/^(cmd|meta|m)$/i.test(s))l=!0;else if(/^a(lt)?$/i.test(s))n=!0;else if(/^(c|ctrl|control)$/i.test(s))i=!0;else if(/^s(hift)?$/i.test(s))u=!0;else if(/^mod$/i.test(s))Tp?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+s)}return n&&(t="Alt-"+t),i&&(t="Ctrl-"+t),l&&(t="Meta-"+t),u&&(t="Shift-"+t),t}function Op(r){let e=Object.create(null);for(let t in r)e[Np(t)]=r[t];return e}function ai(r,e,t=!0){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t&&e.shiftKey&&(r="Shift-"+r),r}function $i(r){return new Tt({props:{handleKeyDown:nf(r)}})}function nf(r){let e=Op(r);return function(t,n){let i=Dp(n),u,l=e[ai(i,n)];if(l&&l(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let o=e[ai(i,n,!1)];if(o&&o(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(u=Mt[n.keyCode])&&u!=i){let o=e[ai(u,n)];if(o&&o(t.state,t.dispatch,t))return!0}}return!1}}var vr=200,fe=function(){};fe.prototype.append=function(e){return e.length?(e=fe.from(e),!this.length&&e||e.length<vr&&this.leafAppend(e)||this.length<vr&&e.leafPrepend(this)||this.appendInner(e)):this};fe.prototype.prepend=function(e){return e.length?fe.from(e).append(this):this};fe.prototype.appendInner=function(e){return new Ip(this,e)};fe.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?fe.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};fe.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};fe.prototype.forEach=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)};fe.prototype.map=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(u,l){return i.push(e(u,l))},t,n),i};fe.from=function(e){return e instanceof fe?e:e&&e.length?new rf(e):fe.empty};var rf=function(r){function e(n){r.call(this),this.values=n}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,u){return i==0&&u==this.length?this:new e(this.values.slice(i,u))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,u,l,o){for(var s=u;s<l;s++)if(i(this.values[s],o+s)===!1)return!1},e.prototype.forEachInvertedInner=function(i,u,l,o){for(var s=u-1;s>=l;s--)if(i(this.values[s],o+s)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=vr)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=vr)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(fe);fe.empty=new rf([]);var Ip=function(r){function e(t,n){r.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,u,l){var o=this.left.length;if(i<o&&this.left.forEachInner(n,i,Math.min(u,o),l)===!1||u>o&&this.right.forEachInner(n,Math.max(i-o,0),Math.min(this.length,u)-o,l+o)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,u,l){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(n,i-o,Math.max(u,o)-o,l+o)===!1||u<o&&this.left.forEachInvertedInner(n,Math.min(i,o),u,l)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var u=this.left.length;return i<=u?this.left.slice(n,i):n>=u?this.right.slice(n-u,i-u):this.left.slice(n,u).append(this.right.slice(0,i-u))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(fe);const Fp=500;class $e{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,u;t&&(i=this.remapping(n,this.items.length),u=i.maps.length);let l=e.tr,o,s,a=[],c=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(n,d+1),u=i.maps.length),u--,c.push(f);return}if(i){c.push(new Ge(f.map));let h=f.step.map(i.slice(u)),p;h&&l.maybeStep(h).doc&&(p=l.mapping.maps[l.mapping.maps.length-1],a.push(new Ge(p,void 0,void 0,a.length+c.length))),u--,p&&i.appendMap(p,u)}else l.maybeStep(f.step);if(f.selection)return o=i?f.selection.map(i.slice(u)):f.selection,s=new $e(this.items.slice(0,n).append(c.reverse().concat(a)),this.eventCount-1),!1},this.items.length,0),{remaining:s,transform:l,selection:o}}addTransform(e,t,n,i){let u=[],l=this.eventCount,o=this.items,s=!i&&o.length?o.get(o.length-1):null;for(let c=0;c<e.steps.length;c++){let f=e.steps[c].invert(e.docs[c]),d=new Ge(e.mapping.maps[c],f,t),h;(h=s&&s.merge(d))&&(d=h,c?u.pop():o=o.slice(0,o.length-1)),u.push(d),t&&(l++,t=void 0),i||(s=d)}let a=l-n.depth;return a>zp&&(o=Rp(o,a),l-=a),new $e(o.append(u),l)}remapping(e,t){let n=new Yt;return this.items.forEach((i,u)=>{let l=i.mirrorOffset!=null&&u-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,l)},e,t),n}addMaps(e){return this.eventCount==0?this:new $e(this.items.append(e.map(t=>new Ge(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-t),u=e.mapping,l=e.steps.length,o=this.eventCount;this.items.forEach(d=>{d.selection&&o--},i);let s=t;this.items.forEach(d=>{let h=u.getMirror(--s);if(h==null)return;l=Math.min(l,h);let p=u.maps[h];if(d.step){let m=e.steps[h].invert(e.docs[h]),g=d.selection&&d.selection.map(u.slice(s+1,h));g&&o++,n.push(new Ge(p,m,g))}else n.push(new Ge(p))},i);let a=[];for(let d=t;d<l;d++)a.push(new Ge(u.maps[d]));let c=this.items.slice(0,i).append(a).append(n),f=new $e(c,o);return f.emptyItemCount()>Fp&&(f=f.compress(this.items.length-n.length)),f}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,i=[],u=0;return this.items.forEach((l,o)=>{if(o>=e)i.push(l),l.selection&&u++;else if(l.step){let s=l.step.map(t.slice(n)),a=s&&s.getMap();if(n--,a&&t.appendMap(a,n),s){let c=l.selection&&l.selection.map(t.slice(n));c&&u++;let f=new Ge(a.invert(),s,c),d,h=i.length-1;(d=i.length&&i[h].merge(f))?i[h]=d:i.push(f)}}else l.map&&n--},this.items.length,0),new $e(fe.from(i.reverse()),u)}}$e.empty=new $e(fe.empty,0);function Rp(r,e){let t;return r.forEach((n,i)=>{if(n.selection&&e--==0)return t=i,!1}),r.slice(t)}class Ge{constructor(e,t,n,i){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Ge(t.getMap().invert(),t,this.selection)}}}class ht{constructor(e,t,n,i,u){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=i,this.prevComposition=u}}const zp=20;function Pp(r,e,t,n){let i=t.getMeta(At),u;if(i)return i.historyState;t.getMeta(Lp)&&(r=new ht(r.done,r.undone,null,0,-1));let l=t.getMeta("appendedTransaction");if(t.steps.length==0)return r;if(l&&l.getMeta(At))return l.getMeta(At).redo?new ht(r.done.addTransform(t,void 0,n,ir(e)),r.undone,Vs(t.mapping.maps[t.steps.length-1]),r.prevTime,r.prevComposition):new ht(r.done,r.undone.addTransform(t,void 0,n,ir(e)),null,r.prevTime,r.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let o=t.getMeta("composition"),s=r.prevTime==0||!l&&r.prevComposition!=o&&(r.prevTime<(t.time||0)-n.newGroupDelay||!Bp(t,r.prevRanges)),a=l?ci(r.prevRanges,t.mapping):Vs(t.mapping.maps[t.steps.length-1]);return new ht(r.done.addTransform(t,s?e.selection.getBookmark():void 0,n,ir(e)),$e.empty,a,t.time,o??r.prevComposition)}else return(u=t.getMeta("rebased"))?new ht(r.done.rebased(t,u),r.undone.rebased(t,u),ci(r.prevRanges,t.mapping),r.prevTime,r.prevComposition):new ht(r.done.addMaps(t.mapping.maps),r.undone.addMaps(t.mapping.maps),ci(r.prevRanges,t.mapping),r.prevTime,r.prevComposition)}function Bp(r,e){if(!e)return!1;if(!r.docChanged)return!0;let t=!1;return r.mapping.maps[0].forEach((n,i)=>{for(let u=0;u<e.length;u+=2)n<=e[u+1]&&i>=e[u]&&(t=!0)}),t}function Vs(r){let e=[];return r.forEach((t,n,i,u)=>e.push(i,u)),e}function ci(r,e){if(!r)return null;let t=[];for(let n=0;n<r.length;n+=2){let i=e.map(r[n],1),u=e.map(r[n+1],-1);i<=u&&t.push(i,u)}return t}function uf(r,e,t,n){let i=ir(e),u=At.get(e).spec.config,l=(n?r.undone:r.done).popEvent(e,i);if(!l)return;let o=l.selection.resolve(l.transform.doc),s=(n?r.done:r.undone).addTransform(l.transform,e.selection.getBookmark(),u,i),a=new ht(n?s:l.remaining,n?l.remaining:s,null,0,-1);t(l.transform.setSelection(o).setMeta(At,{redo:n,historyState:a}).scrollIntoView())}let fi=!1,$s=null;function ir(r){let e=r.plugins;if($s!=e){fi=!1,$s=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){fi=!0;break}}return fi}const At=new yc("history"),Lp=new yc("closeHistory");function qp(r={}){return r={depth:r.depth||100,newGroupDelay:r.newGroupDelay||500},new Tt({key:At,state:{init(){return new ht($e.empty,$e.empty,null,0,-1)},apply(e,t,n){return Pp(t,n,e,r)}},config:r,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,i=n=="historyUndo"?Sr:n=="historyRedo"?In:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}const Sr=(r,e)=>{let t=At.getState(r);return!t||t.done.eventCount==0?!1:(e&&uf(t,r,e,!1),!0)},In=(r,e)=>{let t=At.getState(r);return!t||t.undone.eventCount==0?!1:(e&&uf(t,r,e,!0),!0)},lf=(r,e)=>r.selection.empty?!1:(e&&e(r.tr.deleteSelection().scrollIntoView()),!0);function Vp(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("backward",r):t.parentOffset>0)?null:t}const $p=(r,e,t)=>{let n=Vp(r,t);if(!n)return!1;let i=of(n);if(!i){let l=n.blockRange(),o=l&&$n(l);return o==null?!1:(e&&e(r.tr.lift(l,o).scrollIntoView()),!0)}let u=i.nodeBefore;if(!u.type.spec.isolating&&cf(r,i,e))return!0;if(n.parent.content.size==0&&(sn(u,"end")||q.isSelectable(u))){let l=su(r.doc,n.before(),n.after(),B.empty);if(l&&l.slice.size<l.to-l.from){if(e){let o=r.tr.step(l);o.setSelection(sn(u,"end")?W.findFrom(o.doc.resolve(o.mapping.map(i.pos,-1)),-1):q.create(o.doc,i.pos-u.nodeSize)),e(o.scrollIntoView())}return!0}}return u.isAtom&&i.depth==n.depth-1?(e&&e(r.tr.delete(i.pos-u.nodeSize,i.pos).scrollIntoView()),!0):!1};function sn(r,e,t=!1){for(let n=r;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(t&&n.childCount!=1)return!1}return!1}const Hp=(r,e,t)=>{let{$head:n,empty:i}=r.selection,u=n;if(!i)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("backward",r):n.parentOffset>0)return!1;u=of(n)}let l=u&&u.nodeBefore;return!l||!q.isSelectable(l)?!1:(e&&e(r.tr.setSelection(q.create(r.doc,u.pos-l.nodeSize)).scrollIntoView()),!0)};function of(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){if(r.index(e)>0)return r.doc.resolve(r.before(e+1));if(r.node(e).type.spec.isolating)break}return null}function jp(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("forward",r):t.parentOffset<t.parent.content.size)?null:t}const Wp=(r,e,t)=>{let n=jp(r,t);if(!n)return!1;let i=sf(n);if(!i)return!1;let u=i.nodeAfter;if(cf(r,i,e))return!0;if(n.parent.content.size==0&&(sn(u,"start")||q.isSelectable(u))){let l=su(r.doc,n.before(),n.after(),B.empty);if(l&&l.slice.size<l.to-l.from){if(e){let o=r.tr.step(l);o.setSelection(sn(u,"start")?W.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):q.create(o.doc,o.mapping.map(i.pos))),e(o.scrollIntoView())}return!0}}return u.isAtom&&i.depth==n.depth-1?(e&&e(r.tr.delete(i.pos,i.pos+u.nodeSize).scrollIntoView()),!0):!1},Up=(r,e,t)=>{let{$head:n,empty:i}=r.selection,u=n;if(!i)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("forward",r):n.parentOffset<n.parent.content.size)return!1;u=sf(n)}let l=u&&u.nodeAfter;return!l||!q.isSelectable(l)?!1:(e&&e(r.tr.setSelection(q.create(r.doc,u.pos)).scrollIntoView()),!0)};function sf(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){let t=r.node(e);if(r.index(e)+1<t.childCount)return r.doc.resolve(r.after(e+1));if(t.type.spec.isolating)break}return null}const Hi=(r,e)=>{let t=r.selection,n=t instanceof q,i;if(n){if(t.node.isTextblock||!cn(r.doc,t.from))return!1;i=t.from}else if(i=dc(r.doc,t.from,-1),i==null)return!1;if(e){let u=r.tr.join(i);n&&u.setSelection(q.create(u.doc,i-r.doc.resolve(i).nodeBefore.nodeSize)),e(u.scrollIntoView())}return!0},Jp=(r,e)=>{let t=r.selection,n;if(t instanceof q){if(t.node.isTextblock||!cn(r.doc,t.to))return!1;n=t.to}else if(n=dc(r.doc,t.to,1),n==null)return!1;return e&&e(r.tr.join(n).scrollIntoView()),!0},ji=(r,e)=>{let{$from:t,$to:n}=r.selection,i=t.blockRange(n),u=i&&$n(i);return u==null?!1:(e&&e(r.tr.lift(i,u).scrollIntoView()),!0)},Kp=(r,e)=>{let{$head:t,$anchor:n}=r.selection;return!t.parent.type.spec.code||!t.sameParent(n)?!1:(e&&e(r.tr.insertText(`
`).scrollIntoView()),!0)};function ku(r){for(let e=0;e<r.edgeCount;e++){let{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const af=(r,e)=>{let{$head:t,$anchor:n}=r.selection;if(!t.parent.type.spec.code||!t.sameParent(n))return!1;let i=t.node(-1),u=t.indexAfter(-1),l=ku(i.contentMatchAt(u));if(!l||!i.canReplaceWith(u,u,l))return!1;if(e){let o=t.after(),s=r.tr.replaceWith(o,o,l.createAndFill());s.setSelection(W.near(s.doc.resolve(o),1)),e(s.scrollIntoView())}return!0},Gp=(r,e)=>{let t=r.selection,{$from:n,$to:i}=t;if(t instanceof Ie||n.parent.inlineContent||i.parent.inlineContent)return!1;let u=ku(i.parent.contentMatchAt(i.indexAfter()));if(!u||!u.isTextblock)return!1;if(e){let l=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,o=r.tr.insert(l,u.createAndFill());o.setSelection(G.create(o.doc,l+1)),e(o.scrollIntoView())}return!0},Zp=(r,e)=>{let{$cursor:t}=r.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let u=t.before();if(Xt(r.doc,u))return e&&e(r.tr.split(u).scrollIntoView()),!0}let n=t.blockRange(),i=n&&$n(n);return i==null?!1:(e&&e(r.tr.lift(n,i).scrollIntoView()),!0)};function Qp(r){return(e,t)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof q&&e.selection.node.isBlock)return!n.parentOffset||!Xt(e.doc,n.pos)?!1:(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.parent.isBlock)return!1;if(t){let u=i.parentOffset==i.parent.content.size,l=e.tr;(e.selection instanceof G||e.selection instanceof Ie)&&l.deleteSelection();let o=n.depth==0?null:ku(n.node(-1).contentMatchAt(n.indexAfter(-1))),s=r&&r(i.parent,u),a=s?[s]:u&&o?[{type:o}]:void 0,c=Xt(l.doc,l.mapping.map(n.pos),1,a);if(!a&&!c&&Xt(l.doc,l.mapping.map(n.pos),1,o?[{type:o}]:void 0)&&(o&&(a=[{type:o}]),c=!0),c&&(l.split(l.mapping.map(n.pos),1,a),!u&&!n.parentOffset&&n.parent.type!=o)){let f=l.mapping.map(n.before()),d=l.doc.resolve(f);o&&n.node(-1).canReplaceWith(d.index(),d.index()+1,o)&&l.setNodeMarkup(l.mapping.map(n.before()),o)}t(l.scrollIntoView())}return!0}}const Yp=Qp(),Wi=(r,e)=>{let{$from:t,to:n}=r.selection,i,u=t.sharedDepth(n);return u==0?!1:(i=t.before(u),e&&e(r.tr.setSelection(q.create(r.doc,i))),!0)},Xp=(r,e)=>(e&&e(r.tr.setSelection(new Ie(r.doc))),!0);function e1(r,e,t){let n=e.nodeBefore,i=e.nodeAfter,u=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(u-1,u)?(t&&t(r.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(u,u+1)||!(i.isTextblock||cn(r.doc,e.pos))?!1:(t&&t(r.tr.clearIncompatible(e.pos,n.type,n.contentMatchAt(n.childCount)).join(e.pos).scrollIntoView()),!0)}function cf(r,e,t){let n=e.nodeBefore,i=e.nodeAfter,u,l;if(n.type.spec.isolating||i.type.spec.isolating)return!1;if(e1(r,e,t))return!0;let o=e.parent.canReplace(e.index(),e.index()+1);if(o&&(u=(l=n.contentMatchAt(n.childCount)).findWrapping(i.type))&&l.matchType(u[0]||i.type).validEnd){if(t){let f=e.pos+i.nodeSize,d=N.empty;for(let m=u.length-1;m>=0;m--)d=N.from(u[m].create(null,d));d=N.from(n.copy(d));let h=r.tr.step(new pe(e.pos-1,f,e.pos,f,new B(d,1,0),u.length,!0)),p=f+2*u.length;cn(h.doc,p)&&h.join(p),t(h.scrollIntoView())}return!0}let s=W.findFrom(e,1),a=s&&s.$from.blockRange(s.$to),c=a&&$n(a);if(c!=null&&c>=e.depth)return t&&t(r.tr.lift(a,c).scrollIntoView()),!0;if(o&&sn(i,"start",!0)&&sn(n,"end")){let f=n,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(f.canReplace(f.childCount,f.childCount,h.content)){if(t){let m=N.empty;for(let y=d.length-1;y>=0;y--)m=N.from(d[y].copy(m));let g=r.tr.step(new pe(e.pos-d.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new B(m,d.length,0),0,!0));t(g.scrollIntoView())}return!0}}return!1}function ff(r){return function(e,t){let n=e.selection,i=r<0?n.$from:n.$to,u=i.depth;for(;i.node(u).isInline;){if(!u)return!1;u--}return i.node(u).isTextblock?(t&&t(e.tr.setSelection(G.create(e.doc,r<0?i.start(u):i.end(u)))),!0):!1}}const t1=ff(-1),n1=ff(1);function Ui(r,e=null){return function(t,n){let{$from:i,$to:u}=t.selection,l=i.blockRange(u),o=l&&ou(l,r,e);return o?(n&&n(t.tr.wrap(l,o).scrollIntoView()),!0):!1}}function ur(r,e=null){return function(t,n){let i=!1;for(let u=0;u<t.selection.ranges.length&&!i;u++){let{$from:{pos:l},$to:{pos:o}}=t.selection.ranges[u];t.doc.nodesBetween(l,o,(s,a)=>{if(i)return!1;if(!(!s.isTextblock||s.hasMarkup(r,e)))if(s.type==r)i=!0;else{let c=t.doc.resolve(a),f=c.index();i=c.parent.canReplaceWith(f,f+1,r)}})}if(!i)return!1;if(n){let u=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:o},$to:{pos:s}}=t.selection.ranges[l];u.setBlockType(o,s,r,e)}n(u.scrollIntoView())}return!0}}function r1(r,e,t){for(let n=0;n<e.length;n++){let{$from:i,$to:u}=e[n],l=i.depth==0?r.inlineContent&&r.type.allowsMarkType(t):!1;if(r.nodesBetween(i.pos,u.pos,o=>{if(l)return!1;l=o.inlineContent&&o.type.allowsMarkType(t)}),l)return!0}return!1}function gt(r,e=null){return function(t,n){let{empty:i,$cursor:u,ranges:l}=t.selection;if(i&&!u||!r1(t.doc,l,r))return!1;if(n)if(u)r.isInSet(t.storedMarks||u.marks())?n(t.tr.removeStoredMark(r)):n(t.tr.addStoredMark(r.create(e)));else{let o=!1,s=t.tr;for(let a=0;!o&&a<l.length;a++){let{$from:c,$to:f}=l[a];o=t.doc.rangeHasMark(c.pos,f.pos,r)}for(let a=0;a<l.length;a++){let{$from:c,$to:f}=l[a];if(o)s.removeMark(c.pos,f.pos,r);else{let d=c.pos,h=f.pos,p=c.nodeAfter,m=f.nodeBefore,g=p&&p.isText?/^\s*/.exec(p.text)[0].length:0,y=m&&m.isText?/\s*$/.exec(m.text)[0].length:0;d+g<h&&(d+=g,h-=y),s.addMark(d,h,r.create(e))}}n(s.scrollIntoView())}return!0}}function Vr(...r){return function(e,t,n){for(let i=0;i<r.length;i++)if(r[i](e,t,n))return!0;return!1}}let di=Vr(lf,$p,Hp),Hs=Vr(lf,Wp,Up);const ot={Enter:Vr(Kp,Gp,Zp,Yp),"Mod-Enter":af,Backspace:di,"Mod-Backspace":di,"Shift-Backspace":di,Delete:Hs,"Mod-Delete":Hs,"Mod-a":Xp},df={"Ctrl-h":ot.Backspace,"Alt-Backspace":ot["Mod-Backspace"],"Ctrl-d":ot.Delete,"Ctrl-Alt-Backspace":ot["Mod-Delete"],"Alt-Delete":ot["Mod-Delete"],"Alt-d":ot["Mod-Delete"],"Ctrl-a":t1,"Ctrl-e":n1};for(let r in ot)df[r]=ot[r];const i1=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,u1=i1?df:ot;function l1(r={}){return new Tt({view(e){return new o1(e,r)}})}class o1{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=t.width)!==null&&n!==void 0?n:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let u=l=>{this[i](l)};return e.dom.addEventListener(i,u),{name:i,handler:u}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,n;if(t){let o=e.nodeBefore,s=e.nodeAfter;if(o||s){let a=this.editorView.nodeDOM(this.cursorPos-(o?o.nodeSize:0));if(a){let c=a.getBoundingClientRect(),f=o?c.bottom:c.top;o&&s&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),n={left:c.left,right:c.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!n){let o=this.editorView.coordsAtPos(this.cursorPos);n={left:o.left-this.width/2,right:o.left+this.width/2,top:o.top,bottom:o.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let u,l;if(!i||i==document.body&&getComputedStyle(i).position=="static")u=-pageXOffset,l=-pageYOffset;else{let o=i.getBoundingClientRect();u=o.left-i.scrollLeft,l=o.top-i.scrollTop}this.element.style.left=n.left-u+"px",this.element.style.top=n.top-l+"px",this.element.style.width=n.right-n.left+"px",this.element.style.height=n.bottom-n.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=n&&n.type.spec.disableDropCursor,u=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!u){let l=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=hc(this.editorView.state.doc,l,this.editorView.dragging.slice);o!=null&&(l=o)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}class ie extends W{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return ie.valid(n)?new ie(n):W.near(n)}content(){return B.empty}eq(e){return e instanceof ie&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ie(e.resolve(t.pos))}getBookmark(){return new yu(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!s1(e)||!a1(e))return!1;let n=t.type.spec.allowGapCursor;if(n!=null)return n;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&ie.valid(e))return e;let i=e.pos,u=null;for(let l=e.depth;;l--){let o=e.node(l);if(t>0?e.indexAfter(l)<o.childCount:e.index(l)>0){u=o.child(t>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;i+=t;let s=e.doc.resolve(i);if(ie.valid(s))return s}for(;;){let l=t>0?u.firstChild:u.lastChild;if(!l){if(u.isAtom&&!u.isText&&!q.isSelectable(u)){e=e.doc.resolve(i+u.nodeSize*t),n=!1;continue e}break}u=l,i+=t;let o=e.doc.resolve(i);if(ie.valid(o))return o}return null}}}ie.prototype.visible=!1;ie.findFrom=ie.findGapCursorFrom;W.jsonID("gapcursor",ie);class yu{constructor(e){this.pos=e}map(e){return new yu(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return ie.valid(t)?new ie(t):W.near(t)}}function s1(r){for(let e=r.depth;e>=0;e--){let t=r.index(e),n=r.node(e);if(t==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function a1(r){for(let e=r.depth;e>=0;e--){let t=r.indexAfter(e),n=r.node(e);if(t==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function c1(){return new Tt({props:{decorations:p1,createSelectionBetween(r,e,t){return e.pos==t.pos&&ie.valid(t)?new ie(t):null},handleClick:d1,handleKeyDown:f1,handleDOMEvents:{beforeinput:h1}}})}const f1=nf({ArrowLeft:Qn("horiz",-1),ArrowRight:Qn("horiz",1),ArrowUp:Qn("vert",-1),ArrowDown:Qn("vert",1)});function Qn(r,e){const t=r=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,u){let l=n.selection,o=e>0?l.$to:l.$from,s=l.empty;if(l instanceof G){if(!u.endOfTextblock(t)||o.depth==0)return!1;s=!1,o=n.doc.resolve(e>0?o.after():o.before())}let a=ie.findGapCursorFrom(o,e,s);return a?(i&&i(n.tr.setSelection(new ie(a))),!0):!1}}function d1(r,e,t){if(!r||!r.editable)return!1;let n=r.state.doc.resolve(e);if(!ie.valid(n))return!1;let i=r.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&q.isSelectable(r.state.doc.nodeAt(i.inside))?!1:(r.dispatch(r.state.tr.setSelection(new ie(n))),!0)}function h1(r,e){if(e.inputType!="insertCompositionText"||!(r.state.selection instanceof ie))return!1;let{$from:t}=r.state.selection,n=t.parent.contentMatchAt(t.index()).findWrapping(r.state.schema.nodes.text);if(!n)return!1;let i=N.empty;for(let l=n.length-1;l>=0;l--)i=N.from(n[l].createAndFill(null,i));let u=r.state.tr.replace(t.pos,t.pos,new B(i,0,0));return u.setSelection(G.near(u.doc.resolve(t.pos+1))),r.dispatch(u),!1}function p1(r){if(!(r.selection instanceof ie))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",le.create(r.doc,[Oe.widget(r.selection.head,e,{key:"gapcursor"})])}function Fe(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];typeof i=="string"?r.setAttribute(n,i):i!=null&&(r[n]=i)}e++}for(;e<arguments.length;e++)hf(r,arguments[e]);return r}function hf(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)hf(r,e[t]);else throw new RangeError("Unsupported child node: "+e)}const wn="http://www.w3.org/2000/svg",m1="http://www.w3.org/1999/xlink",Ji="ProseMirror-icon";function g1(r){let e=0;for(let t=0;t<r.length;t++)e=(e<<5)-e+r.charCodeAt(t)|0;return e}function b1(r,e){let t=(r.nodeType==9?r:r.ownerDocument)||document,n=t.createElement("div");if(n.className=Ji,e.path){let{path:i,width:u,height:l}=e,o="pm-icon-"+g1(i).toString(16);t.getElementById(o)||_1(r,o,e);let s=n.appendChild(t.createElementNS(wn,"svg"));s.style.width=u/l+"em",s.appendChild(t.createElementNS(wn,"use")).setAttributeNS(m1,"href",/([^#]*)/.exec(t.location.toString())[1]+"#"+o)}else if(e.dom)n.appendChild(e.dom.cloneNode(!0));else{let{text:i,css:u}=e;n.appendChild(t.createElement("span")).textContent=i||"",u&&(n.firstChild.style.cssText=u)}return n}function _1(r,e,t){let[n,i]=r.nodeType==9?[r,r.body]:[r.ownerDocument||document,r],u=n.getElementById(Ji+"-collection");u||(u=n.createElementNS(wn,"svg"),u.id=Ji+"-collection",u.style.display="none",i.insertBefore(u,i.firstChild));let l=n.createElementNS(wn,"symbol");l.id=e,l.setAttribute("viewBox","0 0 "+t.width+" "+t.height),l.appendChild(n.createElementNS(wn,"path")).setAttribute("d",t.path),u.appendChild(l)}const Me="ProseMirror-menu";class Ue{constructor(e){this.spec=e}render(e){let t=this.spec,n=t.render?t.render(e):t.icon?b1(e.root,t.icon):t.label?Fe("div",null,Fn(e,t.label)):null;if(!n)throw new RangeError("MenuItem without icon or label property");if(t.title){const u=typeof t.title=="function"?t.title(e.state):t.title;n.setAttribute("title",Fn(e,u))}t.class&&n.classList.add(t.class),t.css&&(n.style.cssText+=t.css),n.addEventListener("mousedown",u=>{u.preventDefault(),n.classList.contains(Me+"-disabled")||t.run(e.state,e.dispatch,e,u)});function i(u){if(t.select){let o=t.select(u);if(n.style.display=o?"":"none",!o)return!1}let l=!0;if(t.enable&&(l=t.enable(u)||!1,Ki(n,Me+"-disabled",!l)),t.active){let o=l&&t.active(u)||!1;Ki(n,Me+"-active",o)}return!0}return{dom:n,update:i}}}function Fn(r,e){return r._props.translate?r._props.translate(e):e}let Cn={time:0,node:null};function pf(r){Cn.time=Date.now(),Cn.node=r.target}function mf(r){return Date.now()-100<Cn.time&&Cn.node&&r.contains(Cn.node)}class js{constructor(e,t={}){this.options=t,this.options=t||{},this.content=Array.isArray(e)?e:[e]}render(e){let t=gf(this.content,e),n=e.dom.ownerDocument.defaultView||window,i=Fe("div",{class:Me+"-dropdown "+(this.options.class||""),style:this.options.css},Fn(e,this.options.label||""));this.options.title&&i.setAttribute("title",Fn(e,this.options.title));let u=Fe("div",{class:Me+"-dropdown-wrap"},i),l=null,o=null,s=()=>{l&&l.close()&&(l=null,n.removeEventListener("mousedown",o))};i.addEventListener("mousedown",c=>{c.preventDefault(),pf(c),l?s():(l=this.expand(u,t.dom),n.addEventListener("mousedown",o=()=>{mf(u)||s()}))});function a(c){let f=t.update(c);return u.style.display=f?"":"none",f}return{dom:u,update:a}}expand(e,t){let n=Fe("div",{class:Me+"-dropdown-menu "+(this.options.class||"")},t),i=!1;function u(){return i?!1:(i=!0,e.removeChild(n),!0)}return e.appendChild(n),{close:u,node:n}}}function gf(r,e){let t=[],n=[];for(let i=0;i<r.length;i++){let{dom:u,update:l}=r[i].render(e);t.push(Fe("div",{class:Me+"-dropdown-item"},u)),n.push(l)}return{dom:t,update:bf(n,t)}}function bf(r,e){return t=>{let n=!1;for(let i=0;i<r.length;i++){let u=r[i](t);e[i].style.display=u?"":"none",u&&(n=!0)}return n}}class k1{constructor(e,t={}){this.options=t,this.content=Array.isArray(e)?e:[e]}render(e){let t=gf(this.content,e),n=e.dom.ownerDocument.defaultView||window,i=Fe("div",{class:Me+"-submenu-label"},Fn(e,this.options.label||"")),u=Fe("div",{class:Me+"-submenu-wrap"},i,Fe("div",{class:Me+"-submenu"},t.dom)),l=null;i.addEventListener("mousedown",s=>{s.preventDefault(),pf(s),Ki(u,Me+"-submenu-wrap-active",!1),l||n.addEventListener("mousedown",l=()=>{mf(u)||(u.classList.remove(Me+"-submenu-wrap-active"),n.removeEventListener("mousedown",l),l=null)})});function o(s){let a=t.update(s);return u.style.display=a?"":"none",a}return{dom:u,update:o}}}function y1(r,e){let t=document.createDocumentFragment(),n=[],i=[];for(let l=0;l<e.length;l++){let o=e[l],s=[],a=[];for(let c=0;c<o.length;c++){let{dom:f,update:d}=o[c].render(r),h=Fe("span",{class:Me+"item"},f);t.appendChild(h),a.push(h),s.push(d)}s.length&&(n.push(bf(s,a)),l<e.length-1&&i.push(t.appendChild(x1())))}function u(l){let o=!1,s=!1;for(let a=0;a<n.length;a++){let c=n[a](l);a&&(i[a-1].style.display=s&&c?"":"none"),s=c,c&&(o=!0)}return o}return{dom:t,update:u}}function x1(){return Fe("span",{class:Me+"separator"})}const Pe={join:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},lift:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},selectParentNode:{text:"",css:"font-weight: bold"},undo:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},redo:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},strong:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},em:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},code:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},link:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"},bulletList:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},orderedList:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},blockquote:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}},w1=new Ue({title:"Join with above block",run:Hi,select:r=>Hi(r),icon:Pe.join}),C1=new Ue({title:"Lift out of enclosing block",run:ji,select:r=>ji(r),icon:Pe.lift}),v1=new Ue({title:"Select parent node",run:Wi,select:r=>Wi(r),icon:Pe.selectParentNode});let S1=new Ue({title:"Undo last change",run:Sr,enable:r=>Sr(r),icon:Pe.undo}),E1=new Ue({title:"Redo last undone change",run:In,enable:r=>In(r),icon:Pe.redo});function A1(r,e){let t={run(n,i){return Ui(r,e.attrs)(n,i)},select(n){return Ui(r,e.attrs)(n)}};for(let n in e)t[n]=e[n];return new Ue(t)}function hi(r,e){let t=ur(r,e.attrs),n={run:t,enable(i){return t(i)},active(i){let{$from:u,to:l,node:o}=i.selection;return o?o.hasMarkup(r,e.attrs):l<=u.end()&&u.parent.hasMarkup(r,e.attrs)}};for(let i in e)n[i]=e[i];return new Ue(n)}function Ki(r,e,t){t?r.classList.add(e):r.classList.remove(e)}const Yn="ProseMirror-menubar";function M1(){if(typeof navigator>"u")return!1;let r=navigator.userAgent;return!/Edge\/\d/.test(r)&&/AppleWebKit/.test(r)&&/Mobile\/\w+/.test(r)}function D1(r){return new Tt({view(e){return new T1(e,r)}})}class T1{constructor(e,t){this.editorView=e,this.options=t,this.spacer=null,this.maxHeight=0,this.widthForMaxHeight=0,this.floating=!1,this.scrollHandler=null,this.wrapper=Fe("div",{class:Yn+"-wrapper"}),this.menu=this.wrapper.appendChild(Fe("div",{class:Yn})),this.menu.className=Yn,e.dom.parentNode&&e.dom.parentNode.replaceChild(this.wrapper,e.dom),this.wrapper.appendChild(e.dom);let{dom:n,update:i}=y1(this.editorView,this.options.content);if(this.contentUpdate=i,this.menu.appendChild(n),this.update(),t.floating&&!M1()){this.updateFloat();let u=I1(this.wrapper);this.scrollHandler=l=>{let o=this.editorView.root;(o.body||o).contains(this.wrapper)?this.updateFloat(l.target.getBoundingClientRect?l.target:void 0):u.forEach(s=>s.removeEventListener("scroll",this.scrollHandler))},u.forEach(l=>l.addEventListener("scroll",this.scrollHandler))}}update(){this.contentUpdate(this.editorView.state),this.floating?this.updateScrollCursor():(this.menu.offsetWidth!=this.widthForMaxHeight&&(this.widthForMaxHeight=this.menu.offsetWidth,this.maxHeight=0),this.menu.offsetHeight>this.maxHeight&&(this.maxHeight=this.menu.offsetHeight,this.menu.style.minHeight=this.maxHeight+"px"))}updateScrollCursor(){let e=this.editorView.root.getSelection();if(!e.focusNode)return;let t=e.getRangeAt(0).getClientRects(),n=t[N1(e)?0:t.length-1];if(!n)return;let i=this.menu.getBoundingClientRect();if(n.top<i.bottom&&n.bottom>i.top){let u=O1(this.wrapper);u&&(u.scrollTop-=i.bottom-n.top)}}updateFloat(e){let t=this.wrapper,n=t.getBoundingClientRect(),i=e?Math.max(0,e.getBoundingClientRect().top):0;if(this.floating)if(n.top>=i||n.bottom<this.menu.offsetHeight+10)this.floating=!1,this.menu.style.position=this.menu.style.left=this.menu.style.top=this.menu.style.width="",this.menu.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{let u=(t.offsetWidth-t.clientWidth)/2;this.menu.style.left=n.left+u+"px",this.menu.style.display=n.top>(this.editorView.dom.ownerDocument.defaultView||window).innerHeight?"none":"",e&&(this.menu.style.top=i+"px")}else if(n.top<i&&n.bottom>=this.menu.offsetHeight+10){this.floating=!0;let u=this.menu.getBoundingClientRect();this.menu.style.left=u.left+"px",this.menu.style.width=u.width+"px",e&&(this.menu.style.top=i+"px"),this.menu.style.position="fixed",this.spacer=Fe("div",{class:Yn+"-spacer",style:`height: ${u.height}px`}),t.insertBefore(this.spacer,this.menu)}}destroy(){this.wrapper.parentNode&&this.wrapper.parentNode.replaceChild(this.editorView.dom,this.wrapper)}}function N1(r){return r.anchorNode==r.focusNode?r.anchorOffset>r.focusOffset:r.anchorNode.compareDocumentPosition(r.focusNode)==Node.DOCUMENT_POSITION_FOLLOWING}function O1(r){for(let e=r.parentNode;e;e=e.parentNode)if(e.scrollHeight>e.clientHeight)return e}function I1(r){let e=[r.ownerDocument.defaultView||window];for(let t=r.parentNode;t;t=t.parentNode)e.push(t);return e}function Gi(r,e=null){return function(t,n){let{$from:i,$to:u}=t.selection,l=i.blockRange(u),o=!1,s=l;if(!l)return!1;if(l.depth>=2&&i.node(l.depth-1).type.compatibleContent(r)&&l.startIndex==0){if(i.index(l.depth-1)==0)return!1;let c=t.doc.resolve(l.start-2);s=new pr(c,c,l.depth),l.endIndex<l.parent.childCount&&(l=new pr(i,t.doc.resolve(u.end(l.depth)),l.depth)),o=!0}let a=ou(s,r,e,l);return a?(n&&n(F1(t.tr,l,a,o,r).scrollIntoView()),!0):!1}}function F1(r,e,t,n,i){let u=N.empty;for(let c=t.length-1;c>=0;c--)u=N.from(t[c].type.create(t[c].attrs,u));r.step(new pe(e.start-(n?2:0),e.end,e.start,e.end,new B(u,0,0),t.length,!0));let l=0;for(let c=0;c<t.length;c++)t[c].type==i&&(l=c+1);let o=t.length-l,s=e.start+t.length-(n?2:0),a=e.parent;for(let c=e.startIndex,f=e.endIndex,d=!0;c<f;c++,d=!1)!d&&Xt(r.doc,s,o)&&(r.split(s,o),s+=2*o),s+=a.child(c).nodeSize;return r}function R1(r,e){return function(t,n){let{$from:i,$to:u,node:l}=t.selection;if(l&&l.isBlock||i.depth<2||!i.sameParent(u))return!1;let o=i.node(-1);if(o.type!=r)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=r||i.index(-2)!=i.node(-2).childCount-1)return!1;if(n){let f=N.empty,d=i.index(-1)?1:i.index(-2)?2:3;for(let y=i.depth-d;y>=i.depth-3;y--)f=N.from(i.node(y).copy(f));let h=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;f=f.append(N.from(r.createAndFill()));let p=i.before(i.depth-(d-1)),m=t.tr.replace(p,i.after(-h),new B(f,4-d,0)),g=-1;m.doc.nodesBetween(p,m.doc.content.size,(y,w)=>{if(g>-1)return!1;y.isTextblock&&y.content.size==0&&(g=w+1)}),g>-1&&m.setSelection(W.near(m.doc.resolve(g))),n(m.scrollIntoView())}return!0}let s=u.pos==i.end()?o.contentMatchAt(0).defaultType:null,a=t.tr.delete(i.pos,u.pos),c=s?[e?{type:r,attrs:e}:null,{type:s}]:void 0;return Xt(a.doc,i.pos,2,c)?(n&&n(a.split(i.pos,2,c).scrollIntoView()),!0):!1}}function z1(r){return function(e,t){let{$from:n,$to:i}=e.selection,u=n.blockRange(i,l=>l.childCount>0&&l.firstChild.type==r);return u?t?n.node(u.depth-1).type==r?P1(e,t,r,u):B1(e,t,u):!0:!1}}function P1(r,e,t,n){let i=r.tr,u=n.end,l=n.$to.end(n.depth);u<l&&(i.step(new pe(u-1,l,u,l,new B(N.from(t.create(null,n.parent.copy())),1,0),1,!0)),n=new pr(i.doc.resolve(n.$from.pos),i.doc.resolve(l),n.depth));const o=$n(n);if(o==null)return!1;i.lift(n,o);let s=i.mapping.map(u,-1)-1;return cn(i.doc,s)&&i.join(s),e(i.scrollIntoView()),!0}function B1(r,e,t){let n=r.tr,i=t.parent;for(let h=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)h-=i.child(p).nodeSize,n.delete(h-1,h+1);let u=n.doc.resolve(t.start),l=u.nodeAfter;if(n.mapping.map(t.end)!=t.start+u.nodeAfter.nodeSize)return!1;let o=t.startIndex==0,s=t.endIndex==i.childCount,a=u.node(-1),c=u.index(-1);if(!a.canReplace(c+(o?0:1),c+1,l.content.append(s?N.empty:N.from(i))))return!1;let f=u.pos,d=f+l.nodeSize;return n.step(new pe(f-(o?1:0),d+(s?1:0),f+1,d-1,new B((o?N.empty:N.from(i.copy(N.empty))).append(s?N.empty:N.from(i.copy(N.empty))),o?0:1,s?0:1),o?0:1)),e(n.scrollIntoView()),!0}function L1(r){return function(e,t){let{$from:n,$to:i}=e.selection,u=n.blockRange(i,a=>a.childCount>0&&a.firstChild.type==r);if(!u)return!1;let l=u.startIndex;if(l==0)return!1;let o=u.parent,s=o.child(l-1);if(s.type!=r)return!1;if(t){let a=s.lastChild&&s.lastChild.type==o.type,c=N.from(a?r.create():null),f=new B(N.from(r.create(null,N.from(o.type.create(null,c)))),a?3:1,0),d=u.start,h=u.end;t(e.tr.step(new pe(d-(a?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}class Ot{constructor(e,t,n={}){this.match=e,this.match=e,this.handler=typeof t=="string"?q1(t):t,this.undoable=n.undoable!==!1}}function q1(r){return function(e,t,n,i){let u=r;if(t[1]){let l=t[0].lastIndexOf(t[1]);u+=t[0].slice(l+t[1].length),n+=l;let o=n-i;o>0&&(u=t[0].slice(l-o,l)+u,n=i)}return e.tr.insertText(u,n,i)}}const V1=500;function $1({rules:r}){let e=new Tt({state:{init(){return null},apply(t,n){let i=t.getMeta(this);return i||(t.selectionSet||t.docChanged?null:n)}},props:{handleTextInput(t,n,i,u){return Ws(t,n,i,u,r,e)},handleDOMEvents:{compositionend:t=>{setTimeout(()=>{let{$cursor:n}=t.state.selection;n&&Ws(t,n.pos,n.pos,"",r,e)})}}},isInputRules:!0});return e}function Ws(r,e,t,n,i,u){if(r.composing)return!1;let l=r.state,o=l.doc.resolve(e);if(o.parent.type.spec.code)return!1;let s=o.parent.textBetween(Math.max(0,o.parentOffset-V1),o.parentOffset,null,"")+n;for(let a=0;a<i.length;a++){let c=i[a],f=c.match.exec(s),d=f&&c.handler(l,f,e-(f[0].length-n.length),t);if(d)return c.undoable&&d.setMeta(u,{transform:d,from:e,to:t,text:n}),r.dispatch(d),!0}return!1}const H1=(r,e)=>{let t=r.plugins;for(let n=0;n<t.length;n++){let i=t[n],u;if(i.spec.isInputRules&&(u=i.getState(r))){if(e){let l=r.tr,o=u.transform;for(let s=o.steps.length-1;s>=0;s--)l.step(o.steps[s].invert(o.docs[s]));if(u.text){let s=l.doc.resolve(u.from).marks();l.replaceWith(u.from,u.to,r.schema.text(u.text,s))}else l.delete(u.from,u.to);e(l)}return!0}}return!1},j1=new Ot(/--$/,""),W1=new Ot(/\.\.\.$/,""),U1=new Ot(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),J1=new Ot(/"$/,""),K1=new Ot(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),G1=new Ot(/'$/,""),Z1=[U1,J1,K1,G1];function xu(r,e,t=null,n){return new Ot(r,(i,u,l,o)=>{let s=t instanceof Function?t(u):t,a=i.tr.delete(l,o),c=a.doc.resolve(l),f=c.blockRange(),d=f&&ou(f,e,s);if(!d)return null;a.wrap(f,d);let h=a.doc.resolve(l-1).nodeBefore;return h&&h.type==e&&cn(a.doc,l-1)&&(!n||n(u,h))&&a.join(l-1),a})}function _f(r,e,t=null){return new Ot(r,(n,i,u,l)=>{let o=n.doc.resolve(u),s=t instanceof Function?t(i):t;return o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e)?n.tr.delete(u,l).setBlockType(u,u,e,s):null})}const Xn="ProseMirror-prompt";function kf(r){let e=document.body.appendChild(document.createElement("div"));e.className=Xn;let t=d=>{e.contains(d.target)||n()};setTimeout(()=>window.addEventListener("mousedown",t),50);let n=()=>{window.removeEventListener("mousedown",t),e.parentNode&&e.parentNode.removeChild(e)},i=[];for(let d in r.fields)i.push(r.fields[d].render());let u=document.createElement("button");u.type="submit",u.className=Xn+"-submit",u.textContent="OK";let l=document.createElement("button");l.type="button",l.className=Xn+"-cancel",l.textContent="Cancel",l.addEventListener("click",n);let o=e.appendChild(document.createElement("form"));r.title&&(o.appendChild(document.createElement("h5")).textContent=r.title),i.forEach(d=>{o.appendChild(document.createElement("div")).appendChild(d)});let s=o.appendChild(document.createElement("div"));s.className=Xn+"-buttons",s.appendChild(u),s.appendChild(document.createTextNode(" ")),s.appendChild(l);let a=e.getBoundingClientRect();e.style.top=(window.innerHeight-a.height)/2+"px",e.style.left=(window.innerWidth-a.width)/2+"px";let c=()=>{let d=Q1(r.fields,i);d&&(n(),r.callback(d))};o.addEventListener("submit",d=>{d.preventDefault(),c()}),o.addEventListener("keydown",d=>{d.keyCode==27?(d.preventDefault(),n()):d.keyCode==13&&!(d.ctrlKey||d.metaKey||d.shiftKey)?(d.preventDefault(),c()):d.keyCode==9&&window.setTimeout(()=>{e.contains(document.activeElement)||n()},500)});let f=o.elements[0];f&&f.focus()}function Q1(r,e){let t=Object.create(null),n=0;for(let i in r){let u=r[i],l=e[n++],o=u.read(l),s=u.validate(o);if(s)return Y1(l,s),null;t[i]=u.clean(o)}return t}function Y1(r,e){let t=r.parentNode,n=t.appendChild(document.createElement("div"));n.style.left=r.offsetLeft+r.offsetWidth+2+"px",n.style.top=r.offsetTop-5+"px",n.className="ProseMirror-invalid",n.textContent=e,setTimeout(()=>t.removeChild(n),1500)}class X1{constructor(e){this.options=e}read(e){return e.value}validateType(e){return null}validate(e){return!e&&this.options.required?"Required field":this.validateType(e)||(this.options.validate?this.options.validate(e):null)}clean(e){return this.options.clean?this.options.clean(e):e}}class vn extends X1{render(){let e=document.createElement("input");return e.type="text",e.placeholder=this.options.label,e.value=this.options.value||"",e.autocomplete="off",e}}function yf(r,e){let t=r.selection.$from;for(let n=t.depth;n>=0;n--){let i=t.index(n);if(t.node(n).canReplaceWith(i,i,e))return!0}return!1}function em(r){return new Ue({title:"Insert image",label:"Image",enable(e){return yf(e,r)},run(e,t,n){let{from:i,to:u}=e.selection,l=null;e.selection instanceof q&&e.selection.node.type==r&&(l=e.selection.node.attrs),kf({title:"Insert image",fields:{src:new vn({label:"Location",required:!0,value:l&&l.src}),title:new vn({label:"Title",value:l&&l.title}),alt:new vn({label:"Description",value:l?l.alt:e.doc.textBetween(i,u," ")})},callback(o){n.dispatch(n.state.tr.replaceSelectionWith(r.createAndFill(o))),n.focus()}})}})}function xf(r,e){let t={label:e.title,run:r};for(let n in e)t[n]=e[n];return!e.enable&&!e.select&&(t[e.enable?"enable":"select"]=n=>r(n)),new Ue(t)}function Zi(r,e){let{from:t,$from:n,to:i,empty:u}=r.selection;return u?!!e.isInSet(r.storedMarks||n.marks()):r.doc.rangeHasMark(t,i,e)}function pi(r,e){let t={active(n){return Zi(n,r)}};for(let n in e)t[n]=e[n];return xf(gt(r),t)}function tm(r){return new Ue({title:"Add or remove link",icon:Pe.link,active(e){return Zi(e,r)},enable(e){return!e.selection.empty},run(e,t,n){if(Zi(e,r))return gt(r)(e,t),!0;kf({title:"Create a link",fields:{href:new vn({label:"Link target",required:!0}),title:new vn({label:"Title"})},callback(i){gt(r,i)(n.state,n.dispatch),n.focus()}})}})}function Us(r,e){return xf(Gi(r,e.attrs),e)}function nm(r){let e={},t;(t=r.marks.strong)&&(e.toggleStrong=pi(t,{title:"Toggle strong style",icon:Pe.strong})),(t=r.marks.em)&&(e.toggleEm=pi(t,{title:"Toggle emphasis",icon:Pe.em})),(t=r.marks.code)&&(e.toggleCode=pi(t,{title:"Toggle code font",icon:Pe.code})),(t=r.marks.link)&&(e.toggleLink=tm(t));let n;if((n=r.nodes.image)&&(e.insertImage=em(n)),(n=r.nodes.bullet_list)&&(e.wrapBulletList=Us(n,{title:"Wrap in bullet list",icon:Pe.bulletList})),(n=r.nodes.ordered_list)&&(e.wrapOrderedList=Us(n,{title:"Wrap in ordered list",icon:Pe.orderedList})),(n=r.nodes.blockquote)&&(e.wrapBlockQuote=A1(n,{title:"Wrap in block quote",icon:Pe.blockquote})),(n=r.nodes.paragraph)&&(e.makeParagraph=hi(n,{title:"Change to paragraph",label:"Plain"})),(n=r.nodes.code_block)&&(e.makeCodeBlock=hi(n,{title:"Change to code block",label:"Code"})),n=r.nodes.heading)for(let u=1;u<=10;u++)e["makeHead"+u]=hi(n,{title:"Change to heading "+u,label:"Level "+u,attrs:{level:u}});if(n=r.nodes.horizontal_rule){let u=n;e.insertHorizontalRule=new Ue({title:"Insert horizontal rule",label:"Horizontal rule",enable(l){return yf(l,u)},run(l,o){o(l.tr.replaceSelectionWith(u.create()))}})}let i=u=>u.filter(l=>l);return e.insertMenu=new js(i([e.insertImage,e.insertHorizontalRule]),{label:"Insert"}),e.typeMenu=new js(i([e.makeParagraph,e.makeCodeBlock,e.makeHead1&&new k1(i([e.makeHead1,e.makeHead2,e.makeHead3,e.makeHead4,e.makeHead5,e.makeHead6]),{label:"Heading"})]),{label:"Type..."}),e.inlineMenu=[i([e.toggleStrong,e.toggleEm,e.toggleCode,e.toggleLink])],e.blockMenu=[i([e.wrapBulletList,e.wrapOrderedList,e.wrapBlockQuote,w1,C1,v1])],e.fullMenu=e.inlineMenu.concat([[e.insertMenu,e.typeMenu]],[[S1,E1]],e.blockMenu),e}const Js=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function rm(r,e){let t={},n;function i(u,l){if(e){let o=e[u];if(o===!1)return;o&&(u=o)}t[u]=l}if(i("Mod-z",Sr),i("Shift-Mod-z",In),i("Backspace",H1),Js||i("Mod-y",In),i("Alt-ArrowUp",Hi),i("Alt-ArrowDown",Jp),i("Mod-BracketLeft",ji),i("Escape",Wi),(n=r.marks.strong)&&(i("Mod-b",gt(n)),i("Mod-B",gt(n))),(n=r.marks.em)&&(i("Mod-i",gt(n)),i("Mod-I",gt(n))),(n=r.marks.code)&&i("Mod-`",gt(n)),(n=r.nodes.bullet_list)&&i("Shift-Ctrl-8",Gi(n)),(n=r.nodes.ordered_list)&&i("Shift-Ctrl-9",Gi(n)),(n=r.nodes.blockquote)&&i("Ctrl->",Ui(n)),n=r.nodes.hard_break){let u=n,l=Vr(af,(o,s)=>(s&&s(o.tr.replaceSelectionWith(u.create()).scrollIntoView()),!0));i("Mod-Enter",l),i("Shift-Enter",l),Js&&i("Ctrl-Enter",l)}if((n=r.nodes.list_item)&&(i("Enter",R1(n)),i("Mod-[",z1(n)),i("Mod-]",L1(n))),(n=r.nodes.paragraph)&&i("Shift-Ctrl-0",ur(n)),(n=r.nodes.code_block)&&i("Shift-Ctrl-\\",ur(n)),n=r.nodes.heading)for(let u=1;u<=6;u++)i("Shift-Ctrl-"+u,ur(n,{level:u}));if(n=r.nodes.horizontal_rule){let u=n;i("Mod-_",(l,o)=>(o&&o(l.tr.replaceSelectionWith(u.create()).scrollIntoView()),!0))}return t}function im(r){return xu(/^\s*>\s$/,r)}function um(r){return xu(/^(\d+)\.\s$/,r,e=>({order:+e[1]}),(e,t)=>t.childCount+t.attrs.order==+e[1])}function lm(r){return xu(/^\s*([-+*])\s$/,r)}function om(r){return _f(/^```$/,r)}function sm(r,e){return _f(new RegExp("^(#{1,"+e+"})\\s$"),r,t=>({level:t[1].length}))}function am(r){let e=Z1.concat(W1,j1),t;return(t=r.nodes.blockquote)&&e.push(im(t)),(t=r.nodes.ordered_list)&&e.push(um(t)),(t=r.nodes.bullet_list)&&e.push(lm(t)),(t=r.nodes.code_block)&&e.push(om(t)),(t=r.nodes.heading)&&e.push(sm(t,6)),$1({rules:e})}function cm(r){let e=[am(r.schema),$i(rm(r.schema,r.mapKeys)),$i(u1),l1(),c1()];return r.menuBar!==!1&&e.push(D1({floating:r.floatingMenu!==!1,content:r.menuContent||nm(r.schema).fullMenu})),r.history!==!1&&e.push(qp()),e.concat(new Tt({props:{attributes:{class:"ProseMirror-example-setup-style"}}}))}const Ks={};function fm(r){let e=Ks[r];if(e)return e;e=Ks[r]=[];for(let t=0;t<128;t++){const n=String.fromCharCode(t);e.push(n)}for(let t=0;t<r.length;t++){const n=r.charCodeAt(t);e[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2)}return e}function an(r,e){typeof e!="string"&&(e=an.defaultChars);const t=fm(e);return r.replace(/(%[a-f0-9]{2})+/gi,function(n){let i="";for(let u=0,l=n.length;u<l;u+=3){const o=parseInt(n.slice(u+1,u+3),16);if(o<128){i+=t[o];continue}if((o&224)===192&&u+3<l){const s=parseInt(n.slice(u+4,u+6),16);if((s&192)===128){const a=o<<6&1984|s&63;a<128?i+="":i+=String.fromCharCode(a),u+=3;continue}}if((o&240)===224&&u+6<l){const s=parseInt(n.slice(u+4,u+6),16),a=parseInt(n.slice(u+7,u+9),16);if((s&192)===128&&(a&192)===128){const c=o<<12&61440|s<<6&4032|a&63;c<2048||c>=55296&&c<=57343?i+="":i+=String.fromCharCode(c),u+=6;continue}}if((o&248)===240&&u+9<l){const s=parseInt(n.slice(u+4,u+6),16),a=parseInt(n.slice(u+7,u+9),16),c=parseInt(n.slice(u+10,u+12),16);if((s&192)===128&&(a&192)===128&&(c&192)===128){let f=o<<18&1835008|s<<12&258048|a<<6&4032|c&63;f<65536||f>1114111?i+="":(f-=65536,i+=String.fromCharCode(55296+(f>>10),56320+(f&1023))),u+=9;continue}}i+=""}return i})}an.defaultChars=";/?:@&=+$,#";an.componentChars="";const Gs={};function dm(r){let e=Gs[r];if(e)return e;e=Gs[r]=[];for(let t=0;t<128;t++){const n=String.fromCharCode(t);/^[0-9a-z]$/i.test(n)?e.push(n):e.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(let t=0;t<r.length;t++)e[r.charCodeAt(t)]=r[t];return e}function Wn(r,e,t){typeof e!="string"&&(t=e,e=Wn.defaultChars),typeof t>"u"&&(t=!0);const n=dm(e);let i="";for(let u=0,l=r.length;u<l;u++){const o=r.charCodeAt(u);if(t&&o===37&&u+2<l&&/^[0-9a-f]{2}$/i.test(r.slice(u+1,u+3))){i+=r.slice(u,u+3),u+=2;continue}if(o<128){i+=n[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&u+1<l){const s=r.charCodeAt(u+1);if(s>=56320&&s<=57343){i+=encodeURIComponent(r[u]+r[u+1]),u++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(r[u])}return i}Wn.defaultChars=";/?:@&=+$,-_.!~*'()#";Wn.componentChars="-_.!~*'()";function wu(r){let e="";return e+=r.protocol||"",e+=r.slashes?"//":"",e+=r.auth?r.auth+"@":"",r.hostname&&r.hostname.indexOf(":")!==-1?e+="["+r.hostname+"]":e+=r.hostname||"",e+=r.port?":"+r.port:"",e+=r.pathname||"",e+=r.search||"",e+=r.hash||"",e}function Er(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const hm=/^([a-z0-9.+-]+:)/i,pm=/:[0-9]*$/,mm=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,gm=["<",">",'"',"`"," ","\r",`
`,"	"],bm=["{","}","|","\\","^","`"].concat(gm),_m=["'"].concat(bm),Zs=["%","/","?",";","#"].concat(_m),Qs=["/","?","#"],km=255,Ys=/^[+a-z0-9A-Z_-]{0,63}$/,ym=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Xs={javascript:!0,"javascript:":!0},ea={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Cu(r,e){if(r&&r instanceof Er)return r;const t=new Er;return t.parse(r,e),t}Er.prototype.parse=function(r,e){let t,n,i,u=r;if(u=u.trim(),!e&&r.split("#").length===1){const a=mm.exec(u);if(a)return this.pathname=a[1],a[2]&&(this.search=a[2]),this}let l=hm.exec(u);if(l&&(l=l[0],t=l.toLowerCase(),this.protocol=l,u=u.substr(l.length)),(e||l||u.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=u.substr(0,2)==="//",i&&!(l&&Xs[l])&&(u=u.substr(2),this.slashes=!0)),!Xs[l]&&(i||l&&!ea[l])){let a=-1;for(let p=0;p<Qs.length;p++)n=u.indexOf(Qs[p]),n!==-1&&(a===-1||n<a)&&(a=n);let c,f;a===-1?f=u.lastIndexOf("@"):f=u.lastIndexOf("@",a),f!==-1&&(c=u.slice(0,f),u=u.slice(f+1),this.auth=c),a=-1;for(let p=0;p<Zs.length;p++)n=u.indexOf(Zs[p]),n!==-1&&(a===-1||n<a)&&(a=n);a===-1&&(a=u.length),u[a-1]===":"&&a--;const d=u.slice(0,a);u=u.slice(a),this.parseHost(d),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let m=0,g=p.length;m<g;m++){const y=p[m];if(y&&!y.match(Ys)){let w="";for(let k=0,S=y.length;k<S;k++)y.charCodeAt(k)>127?w+="x":w+=y[k];if(!w.match(Ys)){const k=p.slice(0,m),S=p.slice(m+1),E=y.match(ym);E&&(k.push(E[1]),S.unshift(E[2])),S.length&&(u=S.join(".")+u),this.hostname=k.join(".");break}}}}this.hostname.length>km&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=u.indexOf("#");o!==-1&&(this.hash=u.substr(o),u=u.slice(0,o));const s=u.indexOf("?");return s!==-1&&(this.search=u.substr(s),u=u.slice(0,s)),u&&(this.pathname=u),ea[t]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Er.prototype.parseHost=function(r){let e=pm.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};const xm=Object.freeze(Object.defineProperty({__proto__:null,decode:an,encode:Wn,format:wu,parse:Cu},Symbol.toStringTag,{value:"Module"})),wf=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Cf=/[\0-\x1F\x7F-\x9F]/,wm=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,vu=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,vf=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Cm=Object.freeze(Object.defineProperty({__proto__:null,Any:wf,Cc:Cf,Cf:wm,P:vu,Z:vf},Symbol.toStringTag,{value:"Module"})),vm=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(r=>r.charCodeAt(0))),Sm=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(r=>r.charCodeAt(0)));var mi;const Em=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Am=(mi=String.fromCodePoint)!==null&&mi!==void 0?mi:function(r){let e="";return r>65535&&(r-=65536,e+=String.fromCharCode(r>>>10&1023|55296),r=56320|r&1023),e+=String.fromCharCode(r),e};function Mm(r){var e;return r>=55296&&r<=57343||r>1114111?65533:(e=Em.get(r))!==null&&e!==void 0?e:r}var ce;(function(r){r[r.NUM=35]="NUM",r[r.SEMI=59]="SEMI",r[r.EQUALS=61]="EQUALS",r[r.ZERO=48]="ZERO",r[r.NINE=57]="NINE",r[r.LOWER_A=97]="LOWER_A",r[r.LOWER_F=102]="LOWER_F",r[r.LOWER_X=120]="LOWER_X",r[r.LOWER_Z=122]="LOWER_Z",r[r.UPPER_A=65]="UPPER_A",r[r.UPPER_F=70]="UPPER_F",r[r.UPPER_Z=90]="UPPER_Z"})(ce||(ce={}));const Dm=32;var wt;(function(r){r[r.VALUE_LENGTH=49152]="VALUE_LENGTH",r[r.BRANCH_LENGTH=16256]="BRANCH_LENGTH",r[r.JUMP_TABLE=127]="JUMP_TABLE"})(wt||(wt={}));function Qi(r){return r>=ce.ZERO&&r<=ce.NINE}function Tm(r){return r>=ce.UPPER_A&&r<=ce.UPPER_F||r>=ce.LOWER_A&&r<=ce.LOWER_F}function Nm(r){return r>=ce.UPPER_A&&r<=ce.UPPER_Z||r>=ce.LOWER_A&&r<=ce.LOWER_Z||Qi(r)}function Om(r){return r===ce.EQUALS||Nm(r)}var ae;(function(r){r[r.EntityStart=0]="EntityStart",r[r.NumericStart=1]="NumericStart",r[r.NumericDecimal=2]="NumericDecimal",r[r.NumericHex=3]="NumericHex",r[r.NamedEntity=4]="NamedEntity"})(ae||(ae={}));var bt;(function(r){r[r.Legacy=0]="Legacy",r[r.Strict=1]="Strict",r[r.Attribute=2]="Attribute"})(bt||(bt={}));class Im{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=ae.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=bt.Strict}startEntity(e){this.decodeMode=e,this.state=ae.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case ae.EntityStart:return e.charCodeAt(t)===ce.NUM?(this.state=ae.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=ae.NamedEntity,this.stateNamedEntity(e,t));case ae.NumericStart:return this.stateNumericStart(e,t);case ae.NumericDecimal:return this.stateNumericDecimal(e,t);case ae.NumericHex:return this.stateNumericHex(e,t);case ae.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|Dm)===ce.LOWER_X?(this.state=ae.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=ae.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,i){if(t!==n){const u=n-t;this.result=this.result*Math.pow(i,u)+parseInt(e.substr(t,u),i),this.consumed+=u}}stateNumericHex(e,t){const n=t;for(;t<e.length;){const i=e.charCodeAt(t);if(Qi(i)||Tm(i))t+=1;else return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;for(;t<e.length;){const i=e.charCodeAt(t);if(Qi(i))t+=1;else return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(this.consumed<=t)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===ce.SEMI)this.consumed+=1;else if(this.decodeMode===bt.Strict)return 0;return this.emitCodePoint(Mm(this.result),this.consumed),this.errors&&(e!==ce.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let i=n[this.treeIndex],u=(i&wt.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const l=e.charCodeAt(t);if(this.treeIndex=Fm(n,i,this.treeIndex+Math.max(1,u),l),this.treeIndex<0)return this.result===0||this.decodeMode===bt.Attribute&&(u===0||Om(l))?0:this.emitNotTerminatedNamedEntity();if(i=n[this.treeIndex],u=(i&wt.VALUE_LENGTH)>>14,u!==0){if(l===ce.SEMI)return this.emitNamedEntityData(this.treeIndex,u,this.consumed+this.excess);this.decodeMode!==bt.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,i=(n[t]&wt.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:i}=this;return this.emitCodePoint(t===1?i[e]&~wt.VALUE_LENGTH:i[e+1],n),t===3&&this.emitCodePoint(i[e+2],n),n}end(){var e;switch(this.state){case ae.NamedEntity:return this.result!==0&&(this.decodeMode!==bt.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ae.NumericDecimal:return this.emitNumericEntity(0,2);case ae.NumericHex:return this.emitNumericEntity(0,3);case ae.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ae.EntityStart:return 0}}}function Sf(r){let e="";const t=new Im(r,n=>e+=Am(n));return function(i,u){let l=0,o=0;for(;(o=i.indexOf("&",o))>=0;){e+=i.slice(l,o),t.startEntity(u);const a=t.write(i,o+1);if(a<0){l=o+t.end();break}l=o+a,o=a===0?l+1:l}const s=e+i.slice(l);return e="",s}}function Fm(r,e,t,n){const i=(e&wt.BRANCH_LENGTH)>>7,u=e&wt.JUMP_TABLE;if(i===0)return u!==0&&n===u?t:-1;if(u){const s=n-u;return s<0||s>=i?-1:r[t+s]-1}let l=t,o=l+i-1;for(;l<=o;){const s=l+o>>>1,a=r[s];if(a<n)l=s+1;else if(a>n)o=s-1;else return r[s+i]}return-1}const Rm=Sf(vm);Sf(Sm);function Ef(r,e=bt.Legacy){return Rm(r,e)}function zm(r){return Object.prototype.toString.call(r)}function Su(r){return zm(r)==="[object String]"}const Pm=Object.prototype.hasOwnProperty;function Bm(r,e){return Pm.call(r,e)}function $r(r){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if(typeof t!="object")throw new TypeError(t+"must be object");Object.keys(t).forEach(function(n){r[n]=t[n]})}}),r}function Af(r,e,t){return[].concat(r.slice(0,e),t,r.slice(e+1))}function Eu(r){return!(r>=55296&&r<=57343||r>=64976&&r<=65007||(r&65535)===65535||(r&65535)===65534||r>=0&&r<=8||r===11||r>=14&&r<=31||r>=127&&r<=159||r>1114111)}function Ar(r){if(r>65535){r-=65536;const e=55296+(r>>10),t=56320+(r&1023);return String.fromCharCode(e,t)}return String.fromCharCode(r)}const Mf=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Lm=/&([a-z#][a-z0-9]{1,31});/gi,qm=new RegExp(Mf.source+"|"+Lm.source,"gi"),Vm=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function $m(r,e){if(e.charCodeAt(0)===35&&Vm.test(e)){const n=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return Eu(n)?Ar(n):r}const t=Ef(r);return t!==r?t:r}function Hm(r){return r.indexOf("\\")<0?r:r.replace(Mf,"$1")}function Rn(r){return r.indexOf("\\")<0&&r.indexOf("&")<0?r:r.replace(qm,function(e,t,n){return t||$m(e,n)})}const jm=/[&<>"]/,Wm=/[&<>"]/g,Um={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Jm(r){return Um[r]}function Dt(r){return jm.test(r)?r.replace(Wm,Jm):r}const Km=/[.?*+^$[\]\\(){}|-]/g;function Gm(r){return r.replace(Km,"\\$&")}function ne(r){switch(r){case 9:case 32:return!0}return!1}function zn(r){if(r>=8192&&r<=8202)return!0;switch(r){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Pn(r){return vu.test(r)}function Bn(r){switch(r){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Hr(r){return r=r.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(r=r.replace(//g,"")),r.toLowerCase().toUpperCase()}const Zm={mdurl:xm,ucmicro:Cm},Qm=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Af,assign:$r,escapeHtml:Dt,escapeRE:Gm,fromCodePoint:Ar,has:Bm,isMdAsciiPunct:Bn,isPunctChar:Pn,isSpace:ne,isString:Su,isValidEntityCode:Eu,isWhiteSpace:zn,lib:Zm,normalizeReference:Hr,unescapeAll:Rn,unescapeMd:Hm},Symbol.toStringTag,{value:"Module"}));function Ym(r,e,t){let n,i,u,l;const o=r.posMax,s=r.pos;for(r.pos=e+1,n=1;r.pos<o;){if(u=r.src.charCodeAt(r.pos),u===93&&(n--,n===0)){i=!0;break}if(l=r.pos,r.md.inline.skipToken(r),u===91){if(l===r.pos-1)n++;else if(t)return r.pos=s,-1}}let a=-1;return i&&(a=r.pos),r.pos=s,a}function Xm(r,e,t){let n,i=e;const u={ok:!1,pos:0,lines:0,str:""};if(r.charCodeAt(i)===60){for(i++;i<t;){if(n=r.charCodeAt(i),n===10||n===60)return u;if(n===62)return u.pos=i+1,u.str=Rn(r.slice(e+1,i)),u.ok=!0,u;if(n===92&&i+1<t){i+=2;continue}i++}return u}let l=0;for(;i<t&&(n=r.charCodeAt(i),!(n===32||n<32||n===127));){if(n===92&&i+1<t){if(r.charCodeAt(i+1)===32)break;i+=2;continue}if(n===40&&(l++,l>32))return u;if(n===41){if(l===0)break;l--}i++}return e===i||l!==0||(u.str=Rn(r.slice(e,i)),u.pos=i,u.ok=!0),u}function e2(r,e,t){let n,i,u=0,l=e;const o={ok:!1,pos:0,lines:0,str:""};if(l>=t||(i=r.charCodeAt(l),i!==34&&i!==39&&i!==40))return o;for(l++,i===40&&(i=41);l<t;){if(n=r.charCodeAt(l),n===i)return o.pos=l+1,o.lines=u,o.str=Rn(r.slice(e+1,l)),o.ok=!0,o;if(n===40&&i===41)return o;n===10?u++:n===92&&l+1<t&&(l++,r.charCodeAt(l)===10&&u++),l++}return o}const t2=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Xm,parseLinkLabel:Ym,parseLinkTitle:e2},Symbol.toStringTag,{value:"Module"})),nt={};nt.code_inline=function(r,e,t,n,i){const u=r[e];return"<code"+i.renderAttrs(u)+">"+Dt(u.content)+"</code>"};nt.code_block=function(r,e,t,n,i){const u=r[e];return"<pre"+i.renderAttrs(u)+"><code>"+Dt(r[e].content)+`</code></pre>
`};nt.fence=function(r,e,t,n,i){const u=r[e],l=u.info?Rn(u.info).trim():"";let o="",s="";if(l){const c=l.split(/(\s+)/g);o=c[0],s=c.slice(2).join("")}let a;if(t.highlight?a=t.highlight(u.content,o,s)||Dt(u.content):a=Dt(u.content),a.indexOf("<pre")===0)return a+`
`;if(l){const c=u.attrIndex("class"),f=u.attrs?u.attrs.slice():[];c<0?f.push(["class",t.langPrefix+o]):(f[c]=f[c].slice(),f[c][1]+=" "+t.langPrefix+o);const d={attrs:f};return`<pre><code${i.renderAttrs(d)}>${a}</code></pre>
`}return`<pre><code${i.renderAttrs(u)}>${a}</code></pre>
`};nt.image=function(r,e,t,n,i){const u=r[e];return u.attrs[u.attrIndex("alt")][1]=i.renderInlineAsText(u.children,t,n),i.renderToken(r,e,t)};nt.hardbreak=function(r,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};nt.softbreak=function(r,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};nt.text=function(r,e){return Dt(r[e].content)};nt.html_block=function(r,e){return r[e].content};nt.html_inline=function(r,e){return r[e].content};function fn(){this.rules=$r({},nt)}fn.prototype.renderAttrs=function(e){let t,n,i;if(!e.attrs)return"";for(i="",t=0,n=e.attrs.length;t<n;t++)i+=" "+Dt(e.attrs[t][0])+'="'+Dt(e.attrs[t][1])+'"';return i};fn.prototype.renderToken=function(e,t,n){const i=e[t];let u="";if(i.hidden)return"";i.block&&i.nesting!==-1&&t&&e[t-1].hidden&&(u+=`
`),u+=(i.nesting===-1?"</":"<")+i.tag,u+=this.renderAttrs(i),i.nesting===0&&n.xhtmlOut&&(u+=" /");let l=!1;if(i.block&&(l=!0,i.nesting===1&&t+1<e.length)){const o=e[t+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===i.tag)&&(l=!1)}return u+=l?`>
`:">",u};fn.prototype.renderInline=function(r,e,t){let n="";const i=this.rules;for(let u=0,l=r.length;u<l;u++){const o=r[u].type;typeof i[o]<"u"?n+=i[o](r,u,e,t,this):n+=this.renderToken(r,u,e)}return n};fn.prototype.renderInlineAsText=function(r,e,t){let n="";for(let i=0,u=r.length;i<u;i++)switch(r[i].type){case"text":n+=r[i].content;break;case"image":n+=this.renderInlineAsText(r[i].children,e,t);break;case"html_inline":case"html_block":n+=r[i].content;break;case"softbreak":case"hardbreak":n+=`
`;break}return n};fn.prototype.render=function(r,e,t){let n="";const i=this.rules;for(let u=0,l=r.length;u<l;u++){const o=r[u].type;o==="inline"?n+=this.renderInline(r[u].children,e,t):typeof i[o]<"u"?n+=i[o](r,u,e,t,this):n+=this.renderToken(r,u,e,t)}return n};function Te(){this.__rules__=[],this.__cache__=null}Te.prototype.__find__=function(r){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===r)return e;return-1};Te.prototype.__compile__=function(){const r=this,e=[""];r.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),r.__cache__={},e.forEach(function(t){r.__cache__[t]=[],r.__rules__.forEach(function(n){n.enabled&&(t&&n.alt.indexOf(t)<0||r.__cache__[t].push(n.fn))})})};Te.prototype.at=function(r,e,t){const n=this.__find__(r),i=t||{};if(n===-1)throw new Error("Parser rule not found: "+r);this.__rules__[n].fn=e,this.__rules__[n].alt=i.alt||[],this.__cache__=null};Te.prototype.before=function(r,e,t,n){const i=this.__find__(r),u=n||{};if(i===-1)throw new Error("Parser rule not found: "+r);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:t,alt:u.alt||[]}),this.__cache__=null};Te.prototype.after=function(r,e,t,n){const i=this.__find__(r),u=n||{};if(i===-1)throw new Error("Parser rule not found: "+r);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:t,alt:u.alt||[]}),this.__cache__=null};Te.prototype.push=function(r,e,t){const n=t||{};this.__rules__.push({name:r,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};Te.prototype.enable=function(r,e){Array.isArray(r)||(r=[r]);const t=[];return r.forEach(function(n){const i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!0,t.push(n)},this),this.__cache__=null,t};Te.prototype.enableOnly=function(r,e){Array.isArray(r)||(r=[r]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(r,e)};Te.prototype.disable=function(r,e){Array.isArray(r)||(r=[r]);const t=[];return r.forEach(function(n){const i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!1,t.push(n)},this),this.__cache__=null,t};Te.prototype.getRules=function(r){return this.__cache__===null&&this.__compile__(),this.__cache__[r]||[]};function Je(r,e,t){this.type=r,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Je.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let n=0,i=t.length;n<i;n++)if(t[n][0]===e)return n;return-1};Je.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Je.prototype.attrSet=function(e,t){const n=this.attrIndex(e),i=[e,t];n<0?this.attrPush(i):this.attrs[n]=i};Je.prototype.attrGet=function(e){const t=this.attrIndex(e);let n=null;return t>=0&&(n=this.attrs[t][1]),n};Je.prototype.attrJoin=function(e,t){const n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t};function Df(r,e,t){this.src=r,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}Df.prototype.Token=Je;const n2=/\r\n?|\n/g,r2=/\0/g;function i2(r){let e;e=r.src.replace(n2,`
`),e=e.replace(r2,""),r.src=e}function u2(r){let e;r.inlineMode?(e=new r.Token("inline","",0),e.content=r.src,e.map=[0,1],e.children=[],r.tokens.push(e)):r.md.block.parse(r.src,r.md,r.env,r.tokens)}function l2(r){const e=r.tokens;for(let t=0,n=e.length;t<n;t++){const i=e[t];i.type==="inline"&&r.md.inline.parse(i.content,r.md,r.env,i.children)}}function o2(r){return/^<a[>\s]/i.test(r)}function s2(r){return/^<\/a\s*>/i.test(r)}function a2(r){const e=r.tokens;if(r.md.options.linkify)for(let t=0,n=e.length;t<n;t++){if(e[t].type!=="inline"||!r.md.linkify.pretest(e[t].content))continue;let i=e[t].children,u=0;for(let l=i.length-1;l>=0;l--){const o=i[l];if(o.type==="link_close"){for(l--;i[l].level!==o.level&&i[l].type!=="link_open";)l--;continue}if(o.type==="html_inline"&&(o2(o.content)&&u>0&&u--,s2(o.content)&&u++),!(u>0)&&o.type==="text"&&r.md.linkify.test(o.content)){const s=o.content;let a=r.md.linkify.match(s);const c=[];let f=o.level,d=0;a.length>0&&a[0].index===0&&l>0&&i[l-1].type==="text_special"&&(a=a.slice(1));for(let h=0;h<a.length;h++){const p=a[h].url,m=r.md.normalizeLink(p);if(!r.md.validateLink(m))continue;let g=a[h].text;a[h].schema?a[h].schema==="mailto:"&&!/^mailto:/i.test(g)?g=r.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):g=r.md.normalizeLinkText(g):g=r.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,"");const y=a[h].index;if(y>d){const E=new r.Token("text","",0);E.content=s.slice(d,y),E.level=f,c.push(E)}const w=new r.Token("link_open","a",1);w.attrs=[["href",m]],w.level=f++,w.markup="linkify",w.info="auto",c.push(w);const k=new r.Token("text","",0);k.content=g,k.level=f,c.push(k);const S=new r.Token("link_close","a",-1);S.level=--f,S.markup="linkify",S.info="auto",c.push(S),d=a[h].lastIndex}if(d<s.length){const h=new r.Token("text","",0);h.content=s.slice(d),h.level=f,c.push(h)}e[t].children=i=Af(i,l,c)}}}}const Tf=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,c2=/\((c|tm|r)\)/i,f2=/\((c|tm|r)\)/ig,d2={c:"",r:"",tm:""};function h2(r,e){return d2[e.toLowerCase()]}function p2(r){let e=0;for(let t=r.length-1;t>=0;t--){const n=r[t];n.type==="text"&&!e&&(n.content=n.content.replace(f2,h2)),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function m2(r){let e=0;for(let t=r.length-1;t>=0;t--){const n=r[t];n.type==="text"&&!e&&Tf.test(n.content)&&(n.content=n.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function g2(r){let e;if(r.md.options.typographer)for(e=r.tokens.length-1;e>=0;e--)r.tokens[e].type==="inline"&&(c2.test(r.tokens[e].content)&&p2(r.tokens[e].children),Tf.test(r.tokens[e].content)&&m2(r.tokens[e].children))}const b2=/['"]/,ta=/['"]/g,na="";function er(r,e,t){return r.slice(0,e)+t+r.slice(e+1)}function _2(r,e){let t;const n=[];for(let i=0;i<r.length;i++){const u=r[i],l=r[i].level;for(t=n.length-1;t>=0&&!(n[t].level<=l);t--);if(n.length=t+1,u.type!=="text")continue;let o=u.content,s=0,a=o.length;e:for(;s<a;){ta.lastIndex=s;const c=ta.exec(o);if(!c)break;let f=!0,d=!0;s=c.index+1;const h=c[0]==="'";let p=32;if(c.index-1>=0)p=o.charCodeAt(c.index-1);else for(t=i-1;t>=0&&!(r[t].type==="softbreak"||r[t].type==="hardbreak");t--)if(r[t].content){p=r[t].content.charCodeAt(r[t].content.length-1);break}let m=32;if(s<a)m=o.charCodeAt(s);else for(t=i+1;t<r.length&&!(r[t].type==="softbreak"||r[t].type==="hardbreak");t++)if(r[t].content){m=r[t].content.charCodeAt(0);break}const g=Bn(p)||Pn(String.fromCharCode(p)),y=Bn(m)||Pn(String.fromCharCode(m)),w=zn(p),k=zn(m);if(k?f=!1:y&&(w||g||(f=!1)),w?d=!1:g&&(k||y||(d=!1)),m===34&&c[0]==='"'&&p>=48&&p<=57&&(d=f=!1),f&&d&&(f=g,d=y),!f&&!d){h&&(u.content=er(u.content,c.index,na));continue}if(d)for(t=n.length-1;t>=0;t--){let S=n[t];if(n[t].level<l)break;if(S.single===h&&n[t].level===l){S=n[t];let E,z;h?(E=e.md.options.quotes[2],z=e.md.options.quotes[3]):(E=e.md.options.quotes[0],z=e.md.options.quotes[1]),u.content=er(u.content,c.index,z),r[S.token].content=er(r[S.token].content,S.pos,E),s+=z.length-1,S.token===i&&(s+=E.length-1),o=u.content,a=o.length,n.length=t;continue e}}f?n.push({token:i,pos:c.index,single:h,level:l}):d&&h&&(u.content=er(u.content,c.index,na))}}}function k2(r){if(r.md.options.typographer)for(let e=r.tokens.length-1;e>=0;e--)r.tokens[e].type!=="inline"||!b2.test(r.tokens[e].content)||_2(r.tokens[e].children,r)}function y2(r){let e,t;const n=r.tokens,i=n.length;for(let u=0;u<i;u++){if(n[u].type!=="inline")continue;const l=n[u].children,o=l.length;for(e=0;e<o;e++)l[e].type==="text_special"&&(l[e].type="text");for(e=t=0;e<o;e++)l[e].type==="text"&&e+1<o&&l[e+1].type==="text"?l[e+1].content=l[e].content+l[e+1].content:(e!==t&&(l[t]=l[e]),t++);e!==t&&(l.length=t)}}const gi=[["normalize",i2],["block",u2],["inline",l2],["linkify",a2],["replacements",g2],["smartquotes",k2],["text_join",y2]];function Au(){this.ruler=new Te;for(let r=0;r<gi.length;r++)this.ruler.push(gi[r][0],gi[r][1])}Au.prototype.process=function(r){const e=this.ruler.getRules("");for(let t=0,n=e.length;t<n;t++)e[t](r)};Au.prototype.State=Df;function rt(r,e,t,n){this.src=r,this.md=e,this.env=t,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let u=0,l=0,o=0,s=0,a=i.length,c=!1;l<a;l++){const f=i.charCodeAt(l);if(!c)if(ne(f)){o++,f===9?s+=4-s%4:s++;continue}else c=!0;(f===10||l===a-1)&&(f!==10&&l++,this.bMarks.push(u),this.eMarks.push(l),this.tShift.push(o),this.sCount.push(s),this.bsCount.push(0),c=!1,o=0,s=0,u=l+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}rt.prototype.push=function(r,e,t){const n=new Je(r,e,t);return n.block=!0,t<0&&this.level--,n.level=this.level,t>0&&this.level++,this.tokens.push(n),n};rt.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};rt.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};rt.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){const n=this.src.charCodeAt(e);if(!ne(n))break}return e};rt.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!ne(this.src.charCodeAt(--e)))return e+1;return e};rt.prototype.skipChars=function(e,t){for(let n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e};rt.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e};rt.prototype.getLines=function(e,t,n,i){if(e>=t)return"";const u=new Array(t-e);for(let l=0,o=e;o<t;o++,l++){let s=0;const a=this.bMarks[o];let c=a,f;for(o+1<t||i?f=this.eMarks[o]+1:f=this.eMarks[o];c<f&&s<n;){const d=this.src.charCodeAt(c);if(ne(d))d===9?s+=4-(s+this.bsCount[o])%4:s++;else if(c-a<this.tShift[o])s++;else break;c++}s>n?u[l]=new Array(s-n+1).join(" ")+this.src.slice(c,f):u[l]=this.src.slice(c,f)}return u.join("")};rt.prototype.Token=Je;function bi(r,e){const t=r.bMarks[e]+r.tShift[e],n=r.eMarks[e];return r.src.slice(t,n)}function ra(r){const e=[],t=r.length;let n=0,i=r.charCodeAt(n),u=!1,l=0,o="";for(;n<t;)i===124&&(u?(o+=r.substring(l,n-1),l=n):(e.push(o+r.substring(l,n)),o="",l=n+1)),u=i===92,n++,i=r.charCodeAt(n);return e.push(o+r.substring(l)),e}function x2(r,e,t,n){if(e+2>t)return!1;let i=e+1;if(r.sCount[i]<r.blkIndent||r.sCount[i]-r.blkIndent>=4)return!1;let u=r.bMarks[i]+r.tShift[i];if(u>=r.eMarks[i])return!1;const l=r.src.charCodeAt(u++);if(l!==124&&l!==45&&l!==58||u>=r.eMarks[i])return!1;const o=r.src.charCodeAt(u++);if(o!==124&&o!==45&&o!==58&&!ne(o)||l===45&&ne(o))return!1;for(;u<r.eMarks[i];){const k=r.src.charCodeAt(u);if(k!==124&&k!==45&&k!==58&&!ne(k))return!1;u++}let s=bi(r,e+1),a=s.split("|");const c=[];for(let k=0;k<a.length;k++){const S=a[k].trim();if(!S){if(k===0||k===a.length-1)continue;return!1}if(!/^:?-+:?$/.test(S))return!1;S.charCodeAt(S.length-1)===58?c.push(S.charCodeAt(0)===58?"center":"right"):S.charCodeAt(0)===58?c.push("left"):c.push("")}if(s=bi(r,e).trim(),s.indexOf("|")===-1||r.sCount[e]-r.blkIndent>=4)return!1;a=ra(s),a.length&&a[0]===""&&a.shift(),a.length&&a[a.length-1]===""&&a.pop();const f=a.length;if(f===0||f!==c.length)return!1;if(n)return!0;const d=r.parentType;r.parentType="table";const h=r.md.block.ruler.getRules("blockquote"),p=r.push("table_open","table",1),m=[e,0];p.map=m;const g=r.push("thead_open","thead",1);g.map=[e,e+1];const y=r.push("tr_open","tr",1);y.map=[e,e+1];for(let k=0;k<a.length;k++){const S=r.push("th_open","th",1);c[k]&&(S.attrs=[["style","text-align:"+c[k]]]);const E=r.push("inline","",0);E.content=a[k].trim(),E.children=[],r.push("th_close","th",-1)}r.push("tr_close","tr",-1),r.push("thead_close","thead",-1);let w;for(i=e+2;i<t&&!(r.sCount[i]<r.blkIndent);i++){let k=!1;for(let E=0,z=h.length;E<z;E++)if(h[E](r,i,t,!0)){k=!0;break}if(k||(s=bi(r,i).trim(),!s)||r.sCount[i]-r.blkIndent>=4)break;if(a=ra(s),a.length&&a[0]===""&&a.shift(),a.length&&a[a.length-1]===""&&a.pop(),i===e+2){const E=r.push("tbody_open","tbody",1);E.map=w=[e+2,0]}const S=r.push("tr_open","tr",1);S.map=[i,i+1];for(let E=0;E<f;E++){const z=r.push("td_open","td",1);c[E]&&(z.attrs=[["style","text-align:"+c[E]]]);const P=r.push("inline","",0);P.content=a[E]?a[E].trim():"",P.children=[],r.push("td_close","td",-1)}r.push("tr_close","tr",-1)}return w&&(r.push("tbody_close","tbody",-1),w[1]=i),r.push("table_close","table",-1),m[1]=i,r.parentType=d,r.line=i,!0}function w2(r,e,t){if(r.sCount[e]-r.blkIndent<4)return!1;let n=e+1,i=n;for(;n<t;){if(r.isEmpty(n)){n++;continue}if(r.sCount[n]-r.blkIndent>=4){n++,i=n;continue}break}r.line=i;const u=r.push("code_block","code",0);return u.content=r.getLines(e,i,4+r.blkIndent,!1)+`
`,u.map=[e,r.line],!0}function C2(r,e,t,n){let i=r.bMarks[e]+r.tShift[e],u=r.eMarks[e];if(r.sCount[e]-r.blkIndent>=4||i+3>u)return!1;const l=r.src.charCodeAt(i);if(l!==126&&l!==96)return!1;let o=i;i=r.skipChars(i,l);let s=i-o;if(s<3)return!1;const a=r.src.slice(o,i),c=r.src.slice(i,u);if(l===96&&c.indexOf(String.fromCharCode(l))>=0)return!1;if(n)return!0;let f=e,d=!1;for(;f++,!(f>=t||(i=o=r.bMarks[f]+r.tShift[f],u=r.eMarks[f],i<u&&r.sCount[f]<r.blkIndent));)if(r.src.charCodeAt(i)===l&&!(r.sCount[f]-r.blkIndent>=4)&&(i=r.skipChars(i,l),!(i-o<s)&&(i=r.skipSpaces(i),!(i<u)))){d=!0;break}s=r.sCount[e],r.line=f+(d?1:0);const h=r.push("fence","code",0);return h.info=c,h.content=r.getLines(e+1,f,s,!0),h.markup=a,h.map=[e,r.line],!0}function v2(r,e,t,n){let i=r.bMarks[e]+r.tShift[e],u=r.eMarks[e];const l=r.lineMax;if(r.sCount[e]-r.blkIndent>=4||r.src.charCodeAt(i)!==62)return!1;if(n)return!0;const o=[],s=[],a=[],c=[],f=r.md.block.ruler.getRules("blockquote"),d=r.parentType;r.parentType="blockquote";let h=!1,p;for(p=e;p<t;p++){const k=r.sCount[p]<r.blkIndent;if(i=r.bMarks[p]+r.tShift[p],u=r.eMarks[p],i>=u)break;if(r.src.charCodeAt(i++)===62&&!k){let E=r.sCount[p]+1,z,P;r.src.charCodeAt(i)===32?(i++,E++,P=!1,z=!0):r.src.charCodeAt(i)===9?(z=!0,(r.bsCount[p]+E)%4===3?(i++,E++,P=!1):P=!0):z=!1;let V=E;for(o.push(r.bMarks[p]),r.bMarks[p]=i;i<u;){const A=r.src.charCodeAt(i);if(ne(A))A===9?V+=4-(V+r.bsCount[p]+(P?1:0))%4:V++;else break;i++}h=i>=u,s.push(r.bsCount[p]),r.bsCount[p]=r.sCount[p]+1+(z?1:0),a.push(r.sCount[p]),r.sCount[p]=V-E,c.push(r.tShift[p]),r.tShift[p]=i-r.bMarks[p];continue}if(h)break;let S=!1;for(let E=0,z=f.length;E<z;E++)if(f[E](r,p,t,!0)){S=!0;break}if(S){r.lineMax=p,r.blkIndent!==0&&(o.push(r.bMarks[p]),s.push(r.bsCount[p]),c.push(r.tShift[p]),a.push(r.sCount[p]),r.sCount[p]-=r.blkIndent);break}o.push(r.bMarks[p]),s.push(r.bsCount[p]),c.push(r.tShift[p]),a.push(r.sCount[p]),r.sCount[p]=-1}const m=r.blkIndent;r.blkIndent=0;const g=r.push("blockquote_open","blockquote",1);g.markup=">";const y=[e,0];g.map=y,r.md.block.tokenize(r,e,p);const w=r.push("blockquote_close","blockquote",-1);w.markup=">",r.lineMax=l,r.parentType=d,y[1]=r.line;for(let k=0;k<c.length;k++)r.bMarks[k+e]=o[k],r.tShift[k+e]=c[k],r.sCount[k+e]=a[k],r.bsCount[k+e]=s[k];return r.blkIndent=m,!0}function S2(r,e,t,n){const i=r.eMarks[e];if(r.sCount[e]-r.blkIndent>=4)return!1;let u=r.bMarks[e]+r.tShift[e];const l=r.src.charCodeAt(u++);if(l!==42&&l!==45&&l!==95)return!1;let o=1;for(;u<i;){const a=r.src.charCodeAt(u++);if(a!==l&&!ne(a))return!1;a===l&&o++}if(o<3)return!1;if(n)return!0;r.line=e+1;const s=r.push("hr","hr",0);return s.map=[e,r.line],s.markup=Array(o+1).join(String.fromCharCode(l)),!0}function ia(r,e){const t=r.eMarks[e];let n=r.bMarks[e]+r.tShift[e];const i=r.src.charCodeAt(n++);if(i!==42&&i!==45&&i!==43)return-1;if(n<t){const u=r.src.charCodeAt(n);if(!ne(u))return-1}return n}function ua(r,e){const t=r.bMarks[e]+r.tShift[e],n=r.eMarks[e];let i=t;if(i+1>=n)return-1;let u=r.src.charCodeAt(i++);if(u<48||u>57)return-1;for(;;){if(i>=n)return-1;if(u=r.src.charCodeAt(i++),u>=48&&u<=57){if(i-t>=10)return-1;continue}if(u===41||u===46)break;return-1}return i<n&&(u=r.src.charCodeAt(i),!ne(u))?-1:i}function E2(r,e){const t=r.level+2;for(let n=e+2,i=r.tokens.length-2;n<i;n++)r.tokens[n].level===t&&r.tokens[n].type==="paragraph_open"&&(r.tokens[n+2].hidden=!0,r.tokens[n].hidden=!0,n+=2)}function A2(r,e,t,n){let i,u,l,o,s=e,a=!0;if(r.sCount[s]-r.blkIndent>=4||r.listIndent>=0&&r.sCount[s]-r.listIndent>=4&&r.sCount[s]<r.blkIndent)return!1;let c=!1;n&&r.parentType==="paragraph"&&r.sCount[s]>=r.blkIndent&&(c=!0);let f,d,h;if((h=ua(r,s))>=0){if(f=!0,l=r.bMarks[s]+r.tShift[s],d=Number(r.src.slice(l,h-1)),c&&d!==1)return!1}else if((h=ia(r,s))>=0)f=!1;else return!1;if(c&&r.skipSpaces(h)>=r.eMarks[s])return!1;if(n)return!0;const p=r.src.charCodeAt(h-1),m=r.tokens.length;f?(o=r.push("ordered_list_open","ol",1),d!==1&&(o.attrs=[["start",d]])):o=r.push("bullet_list_open","ul",1);const g=[s,0];o.map=g,o.markup=String.fromCharCode(p);let y=!1;const w=r.md.block.ruler.getRules("list"),k=r.parentType;for(r.parentType="list";s<t;){u=h,i=r.eMarks[s];const S=r.sCount[s]+h-(r.bMarks[s]+r.tShift[s]);let E=S;for(;u<i;){const it=r.src.charCodeAt(u);if(it===9)E+=4-(E+r.bsCount[s])%4;else if(it===32)E++;else break;u++}const z=u;let P;z>=i?P=1:P=E-S,P>4&&(P=1);const V=S+P;o=r.push("list_item_open","li",1),o.markup=String.fromCharCode(p);const A=[s,0];o.map=A,f&&(o.info=r.src.slice(l,h-1));const L=r.tight,H=r.tShift[s],re=r.sCount[s],ge=r.listIndent;if(r.listIndent=r.blkIndent,r.blkIndent=V,r.tight=!0,r.tShift[s]=z-r.bMarks[s],r.sCount[s]=E,z>=i&&r.isEmpty(s+1)?r.line=Math.min(r.line+2,t):r.md.block.tokenize(r,s,t,!0),(!r.tight||y)&&(a=!1),y=r.line-s>1&&r.isEmpty(r.line-1),r.blkIndent=r.listIndent,r.listIndent=ge,r.tShift[s]=H,r.sCount[s]=re,r.tight=L,o=r.push("list_item_close","li",-1),o.markup=String.fromCharCode(p),s=r.line,A[1]=s,s>=t||r.sCount[s]<r.blkIndent||r.sCount[s]-r.blkIndent>=4)break;let dn=!1;for(let it=0,Ke=w.length;it<Ke;it++)if(w[it](r,s,t,!0)){dn=!0;break}if(dn)break;if(f){if(h=ua(r,s),h<0)break;l=r.bMarks[s]+r.tShift[s]}else if(h=ia(r,s),h<0)break;if(p!==r.src.charCodeAt(h-1))break}return f?o=r.push("ordered_list_close","ol",-1):o=r.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(p),g[1]=s,r.line=s,r.parentType=k,a&&E2(r,m),!0}function M2(r,e,t,n){let i=0,u=r.bMarks[e]+r.tShift[e],l=r.eMarks[e],o=e+1;if(r.sCount[e]-r.blkIndent>=4||r.src.charCodeAt(u)!==91)return!1;for(;++u<l;)if(r.src.charCodeAt(u)===93&&r.src.charCodeAt(u-1)!==92){if(u+1===l||r.src.charCodeAt(u+1)!==58)return!1;break}const s=r.lineMax,a=r.md.block.ruler.getRules("reference"),c=r.parentType;for(r.parentType="reference";o<s&&!r.isEmpty(o);o++){if(r.sCount[o]-r.blkIndent>3||r.sCount[o]<0)continue;let E=!1;for(let z=0,P=a.length;z<P;z++)if(a[z](r,o,s,!0)){E=!0;break}if(E)break}const f=r.getLines(e,o,r.blkIndent,!1).trim();l=f.length;let d=-1;for(u=1;u<l;u++){const E=f.charCodeAt(u);if(E===91)return!1;if(E===93){d=u;break}else E===10?i++:E===92&&(u++,u<l&&f.charCodeAt(u)===10&&i++)}if(d<0||f.charCodeAt(d+1)!==58)return!1;for(u=d+2;u<l;u++){const E=f.charCodeAt(u);if(E===10)i++;else if(!ne(E))break}const h=r.md.helpers.parseLinkDestination(f,u,l);if(!h.ok)return!1;const p=r.md.normalizeLink(h.str);if(!r.md.validateLink(p))return!1;u=h.pos,i+=h.lines;const m=u,g=i,y=u;for(;u<l;u++){const E=f.charCodeAt(u);if(E===10)i++;else if(!ne(E))break}const w=r.md.helpers.parseLinkTitle(f,u,l);let k;for(u<l&&y!==u&&w.ok?(k=w.str,u=w.pos,i+=w.lines):(k="",u=m,i=g);u<l;){const E=f.charCodeAt(u);if(!ne(E))break;u++}if(u<l&&f.charCodeAt(u)!==10&&k)for(k="",u=m,i=g;u<l;){const E=f.charCodeAt(u);if(!ne(E))break;u++}if(u<l&&f.charCodeAt(u)!==10)return!1;const S=Hr(f.slice(1,d));return S?(n||(typeof r.env.references>"u"&&(r.env.references={}),typeof r.env.references[S]>"u"&&(r.env.references[S]={title:k,href:p}),r.parentType=c,r.line=e+i+1),!0):!1}const D2=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],T2="[a-zA-Z_:][a-zA-Z0-9:._-]*",N2="[^\"'=<>`\\x00-\\x20]+",O2="'[^']*'",I2='"[^"]*"',F2="(?:"+N2+"|"+O2+"|"+I2+")",R2="(?:\\s+"+T2+"(?:\\s*=\\s*"+F2+")?)",Nf="<[A-Za-z][A-Za-z0-9\\-]*"+R2+"*\\s*\\/?>",Of="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",z2="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",P2="<[?][\\s\\S]*?[?]>",B2="<![A-Z]+\\s+[^>]*>",L2="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",q2=new RegExp("^(?:"+Nf+"|"+Of+"|"+z2+"|"+P2+"|"+B2+"|"+L2+")"),V2=new RegExp("^(?:"+Nf+"|"+Of+")"),Kt=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+D2.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(V2.source+"\\s*$"),/^$/,!1]];function $2(r,e,t,n){let i=r.bMarks[e]+r.tShift[e],u=r.eMarks[e];if(r.sCount[e]-r.blkIndent>=4||!r.md.options.html||r.src.charCodeAt(i)!==60)return!1;let l=r.src.slice(i,u),o=0;for(;o<Kt.length&&!Kt[o][0].test(l);o++);if(o===Kt.length)return!1;if(n)return Kt[o][2];let s=e+1;if(!Kt[o][1].test(l)){for(;s<t&&!(r.sCount[s]<r.blkIndent);s++)if(i=r.bMarks[s]+r.tShift[s],u=r.eMarks[s],l=r.src.slice(i,u),Kt[o][1].test(l)){l.length!==0&&s++;break}}r.line=s;const a=r.push("html_block","",0);return a.map=[e,s],a.content=r.getLines(e,s,r.blkIndent,!0),!0}function H2(r,e,t,n){let i=r.bMarks[e]+r.tShift[e],u=r.eMarks[e];if(r.sCount[e]-r.blkIndent>=4)return!1;let l=r.src.charCodeAt(i);if(l!==35||i>=u)return!1;let o=1;for(l=r.src.charCodeAt(++i);l===35&&i<u&&o<=6;)o++,l=r.src.charCodeAt(++i);if(o>6||i<u&&!ne(l))return!1;if(n)return!0;u=r.skipSpacesBack(u,i);const s=r.skipCharsBack(u,35,i);s>i&&ne(r.src.charCodeAt(s-1))&&(u=s),r.line=e+1;const a=r.push("heading_open","h"+String(o),1);a.markup="########".slice(0,o),a.map=[e,r.line];const c=r.push("inline","",0);c.content=r.src.slice(i,u).trim(),c.map=[e,r.line],c.children=[];const f=r.push("heading_close","h"+String(o),-1);return f.markup="########".slice(0,o),!0}function j2(r,e,t){const n=r.md.block.ruler.getRules("paragraph");if(r.sCount[e]-r.blkIndent>=4)return!1;const i=r.parentType;r.parentType="paragraph";let u=0,l,o=e+1;for(;o<t&&!r.isEmpty(o);o++){if(r.sCount[o]-r.blkIndent>3)continue;if(r.sCount[o]>=r.blkIndent){let h=r.bMarks[o]+r.tShift[o];const p=r.eMarks[o];if(h<p&&(l=r.src.charCodeAt(h),(l===45||l===61)&&(h=r.skipChars(h,l),h=r.skipSpaces(h),h>=p))){u=l===61?1:2;break}}if(r.sCount[o]<0)continue;let d=!1;for(let h=0,p=n.length;h<p;h++)if(n[h](r,o,t,!0)){d=!0;break}if(d)break}if(!u)return!1;const s=r.getLines(e,o,r.blkIndent,!1).trim();r.line=o+1;const a=r.push("heading_open","h"+String(u),1);a.markup=String.fromCharCode(l),a.map=[e,r.line];const c=r.push("inline","",0);c.content=s,c.map=[e,r.line-1],c.children=[];const f=r.push("heading_close","h"+String(u),-1);return f.markup=String.fromCharCode(l),r.parentType=i,!0}function W2(r,e,t){const n=r.md.block.ruler.getRules("paragraph"),i=r.parentType;let u=e+1;for(r.parentType="paragraph";u<t&&!r.isEmpty(u);u++){if(r.sCount[u]-r.blkIndent>3||r.sCount[u]<0)continue;let a=!1;for(let c=0,f=n.length;c<f;c++)if(n[c](r,u,t,!0)){a=!0;break}if(a)break}const l=r.getLines(e,u,r.blkIndent,!1).trim();r.line=u;const o=r.push("paragraph_open","p",1);o.map=[e,r.line];const s=r.push("inline","",0);return s.content=l,s.map=[e,r.line],s.children=[],r.push("paragraph_close","p",-1),r.parentType=i,!0}const tr=[["table",x2,["paragraph","reference"]],["code",w2],["fence",C2,["paragraph","reference","blockquote","list"]],["blockquote",v2,["paragraph","reference","blockquote","list"]],["hr",S2,["paragraph","reference","blockquote","list"]],["list",A2,["paragraph","reference","blockquote"]],["reference",M2],["html_block",$2,["paragraph","reference","blockquote"]],["heading",H2,["paragraph","reference","blockquote"]],["lheading",j2],["paragraph",W2]];function jr(){this.ruler=new Te;for(let r=0;r<tr.length;r++)this.ruler.push(tr[r][0],tr[r][1],{alt:(tr[r][2]||[]).slice()})}jr.prototype.tokenize=function(r,e,t){const n=this.ruler.getRules(""),i=n.length,u=r.md.options.maxNesting;let l=e,o=!1;for(;l<t&&(r.line=l=r.skipEmptyLines(l),!(l>=t||r.sCount[l]<r.blkIndent));){if(r.level>=u){r.line=t;break}const s=r.line;let a=!1;for(let c=0;c<i;c++)if(a=n[c](r,l,t,!1),a){if(s>=r.line)throw new Error("block rule didn't increment state.line");break}if(!a)throw new Error("none of the block rules matched");r.tight=!o,r.isEmpty(r.line-1)&&(o=!0),l=r.line,l<t&&r.isEmpty(l)&&(o=!0,l++,r.line=l)}};jr.prototype.parse=function(r,e,t,n){if(!r)return;const i=new this.State(r,e,t,n);this.tokenize(i,i.line,i.lineMax)};jr.prototype.State=rt;function Un(r,e,t,n){this.src=r,this.env=t,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Un.prototype.pushPending=function(){const r=new Je("text","",0);return r.content=this.pending,r.level=this.pendingLevel,this.tokens.push(r),this.pending="",r};Un.prototype.push=function(r,e,t){this.pending&&this.pushPending();const n=new Je(r,e,t);let i=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n};Un.prototype.scanDelims=function(r,e){let t,n,i=!0,u=!0;const l=this.posMax,o=this.src.charCodeAt(r),s=r>0?this.src.charCodeAt(r-1):32;let a=r;for(;a<l&&this.src.charCodeAt(a)===o;)a++;const c=a-r,f=a<l?this.src.charCodeAt(a):32,d=Bn(s)||Pn(String.fromCharCode(s)),h=Bn(f)||Pn(String.fromCharCode(f)),p=zn(s),m=zn(f);return m?i=!1:h&&(p||d||(i=!1)),p?u=!1:d&&(m||h||(u=!1)),e?(t=i,n=u):(t=i&&(!u||d),n=u&&(!i||h)),{can_open:t,can_close:n,length:c}};Un.prototype.Token=Je;function U2(r){switch(r){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function J2(r,e){let t=r.pos;for(;t<r.posMax&&!U2(r.src.charCodeAt(t));)t++;return t===r.pos?!1:(e||(r.pending+=r.src.slice(r.pos,t)),r.pos=t,!0)}const K2=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function G2(r,e){if(!r.md.options.linkify||r.linkLevel>0)return!1;const t=r.pos,n=r.posMax;if(t+3>n||r.src.charCodeAt(t)!==58||r.src.charCodeAt(t+1)!==47||r.src.charCodeAt(t+2)!==47)return!1;const i=r.pending.match(K2);if(!i)return!1;const u=i[1],l=r.md.linkify.matchAtStart(r.src.slice(t-u.length));if(!l)return!1;let o=l.url;if(o.length<=u.length)return!1;o=o.replace(/\*+$/,"");const s=r.md.normalizeLink(o);if(!r.md.validateLink(s))return!1;if(!e){r.pending=r.pending.slice(0,-u.length);const a=r.push("link_open","a",1);a.attrs=[["href",s]],a.markup="linkify",a.info="auto";const c=r.push("text","",0);c.content=r.md.normalizeLinkText(o);const f=r.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return r.pos+=o.length-u.length,!0}function Z2(r,e){let t=r.pos;if(r.src.charCodeAt(t)!==10)return!1;const n=r.pending.length-1,i=r.posMax;if(!e)if(n>=0&&r.pending.charCodeAt(n)===32)if(n>=1&&r.pending.charCodeAt(n-1)===32){let u=n-1;for(;u>=1&&r.pending.charCodeAt(u-1)===32;)u--;r.pending=r.pending.slice(0,u),r.push("hardbreak","br",0)}else r.pending=r.pending.slice(0,-1),r.push("softbreak","br",0);else r.push("softbreak","br",0);for(t++;t<i&&ne(r.src.charCodeAt(t));)t++;return r.pos=t,!0}const Mu=[];for(let r=0;r<256;r++)Mu.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(r){Mu[r.charCodeAt(0)]=1});function Q2(r,e){let t=r.pos;const n=r.posMax;if(r.src.charCodeAt(t)!==92||(t++,t>=n))return!1;let i=r.src.charCodeAt(t);if(i===10){for(e||r.push("hardbreak","br",0),t++;t<n&&(i=r.src.charCodeAt(t),!!ne(i));)t++;return r.pos=t,!0}let u=r.src[t];if(i>=55296&&i<=56319&&t+1<n){const o=r.src.charCodeAt(t+1);o>=56320&&o<=57343&&(u+=r.src[t+1],t++)}const l="\\"+u;if(!e){const o=r.push("text_special","",0);i<256&&Mu[i]!==0?o.content=u:o.content=l,o.markup=l,o.info="escape"}return r.pos=t+1,!0}function Y2(r,e){let t=r.pos;if(r.src.charCodeAt(t)!==96)return!1;const i=t;t++;const u=r.posMax;for(;t<u&&r.src.charCodeAt(t)===96;)t++;const l=r.src.slice(i,t),o=l.length;if(r.backticksScanned&&(r.backticks[o]||0)<=i)return e||(r.pending+=l),r.pos+=o,!0;let s=t,a;for(;(a=r.src.indexOf("`",s))!==-1;){for(s=a+1;s<u&&r.src.charCodeAt(s)===96;)s++;const c=s-a;if(c===o){if(!e){const f=r.push("code_inline","code",0);f.markup=l,f.content=r.src.slice(t,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return r.pos=s,!0}r.backticks[c]=a}return r.backticksScanned=!0,e||(r.pending+=l),r.pos+=o,!0}function X2(r,e){const t=r.pos,n=r.src.charCodeAt(t);if(e||n!==126)return!1;const i=r.scanDelims(r.pos,!0);let u=i.length;const l=String.fromCharCode(n);if(u<2)return!1;let o;u%2&&(o=r.push("text","",0),o.content=l,u--);for(let s=0;s<u;s+=2)o=r.push("text","",0),o.content=l+l,r.delimiters.push({marker:n,length:0,token:r.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return r.pos+=i.length,!0}function la(r,e){let t;const n=[],i=e.length;for(let u=0;u<i;u++){const l=e[u];if(l.marker!==126||l.end===-1)continue;const o=e[l.end];t=r.tokens[l.token],t.type="s_open",t.tag="s",t.nesting=1,t.markup="~~",t.content="",t=r.tokens[o.token],t.type="s_close",t.tag="s",t.nesting=-1,t.markup="~~",t.content="",r.tokens[o.token-1].type==="text"&&r.tokens[o.token-1].content==="~"&&n.push(o.token-1)}for(;n.length;){const u=n.pop();let l=u+1;for(;l<r.tokens.length&&r.tokens[l].type==="s_close";)l++;l--,u!==l&&(t=r.tokens[l],r.tokens[l]=r.tokens[u],r.tokens[u]=t)}}function eg(r){const e=r.tokens_meta,t=r.tokens_meta.length;la(r,r.delimiters);for(let n=0;n<t;n++)e[n]&&e[n].delimiters&&la(r,e[n].delimiters)}const If={tokenize:X2,postProcess:eg};function tg(r,e){const t=r.pos,n=r.src.charCodeAt(t);if(e||n!==95&&n!==42)return!1;const i=r.scanDelims(r.pos,n===42);for(let u=0;u<i.length;u++){const l=r.push("text","",0);l.content=String.fromCharCode(n),r.delimiters.push({marker:n,length:i.length,token:r.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return r.pos+=i.length,!0}function oa(r,e){const t=e.length;for(let n=t-1;n>=0;n--){const i=e[n];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const u=e[i.end],l=n>0&&e[n-1].end===i.end+1&&e[n-1].marker===i.marker&&e[n-1].token===i.token-1&&e[i.end+1].token===u.token+1,o=String.fromCharCode(i.marker),s=r.tokens[i.token];s.type=l?"strong_open":"em_open",s.tag=l?"strong":"em",s.nesting=1,s.markup=l?o+o:o,s.content="";const a=r.tokens[u.token];a.type=l?"strong_close":"em_close",a.tag=l?"strong":"em",a.nesting=-1,a.markup=l?o+o:o,a.content="",l&&(r.tokens[e[n-1].token].content="",r.tokens[e[i.end+1].token].content="",n--)}}function ng(r){const e=r.tokens_meta,t=r.tokens_meta.length;oa(r,r.delimiters);for(let n=0;n<t;n++)e[n]&&e[n].delimiters&&oa(r,e[n].delimiters)}const Ff={tokenize:tg,postProcess:ng};function rg(r,e){let t,n,i,u,l="",o="",s=r.pos,a=!0;if(r.src.charCodeAt(r.pos)!==91)return!1;const c=r.pos,f=r.posMax,d=r.pos+1,h=r.md.helpers.parseLinkLabel(r,r.pos,!0);if(h<0)return!1;let p=h+1;if(p<f&&r.src.charCodeAt(p)===40){for(a=!1,p++;p<f&&(t=r.src.charCodeAt(p),!(!ne(t)&&t!==10));p++);if(p>=f)return!1;if(s=p,i=r.md.helpers.parseLinkDestination(r.src,p,r.posMax),i.ok){for(l=r.md.normalizeLink(i.str),r.md.validateLink(l)?p=i.pos:l="",s=p;p<f&&(t=r.src.charCodeAt(p),!(!ne(t)&&t!==10));p++);if(i=r.md.helpers.parseLinkTitle(r.src,p,r.posMax),p<f&&s!==p&&i.ok)for(o=i.str,p=i.pos;p<f&&(t=r.src.charCodeAt(p),!(!ne(t)&&t!==10));p++);}(p>=f||r.src.charCodeAt(p)!==41)&&(a=!0),p++}if(a){if(typeof r.env.references>"u")return!1;if(p<f&&r.src.charCodeAt(p)===91?(s=p+1,p=r.md.helpers.parseLinkLabel(r,p),p>=0?n=r.src.slice(s,p++):p=h+1):p=h+1,n||(n=r.src.slice(d,h)),u=r.env.references[Hr(n)],!u)return r.pos=c,!1;l=u.href,o=u.title}if(!e){r.pos=d,r.posMax=h;const m=r.push("link_open","a",1),g=[["href",l]];m.attrs=g,o&&g.push(["title",o]),r.linkLevel++,r.md.inline.tokenize(r),r.linkLevel--,r.push("link_close","a",-1)}return r.pos=p,r.posMax=f,!0}function ig(r,e){let t,n,i,u,l,o,s,a,c="";const f=r.pos,d=r.posMax;if(r.src.charCodeAt(r.pos)!==33||r.src.charCodeAt(r.pos+1)!==91)return!1;const h=r.pos+2,p=r.md.helpers.parseLinkLabel(r,r.pos+1,!1);if(p<0)return!1;if(u=p+1,u<d&&r.src.charCodeAt(u)===40){for(u++;u<d&&(t=r.src.charCodeAt(u),!(!ne(t)&&t!==10));u++);if(u>=d)return!1;for(a=u,o=r.md.helpers.parseLinkDestination(r.src,u,r.posMax),o.ok&&(c=r.md.normalizeLink(o.str),r.md.validateLink(c)?u=o.pos:c=""),a=u;u<d&&(t=r.src.charCodeAt(u),!(!ne(t)&&t!==10));u++);if(o=r.md.helpers.parseLinkTitle(r.src,u,r.posMax),u<d&&a!==u&&o.ok)for(s=o.str,u=o.pos;u<d&&(t=r.src.charCodeAt(u),!(!ne(t)&&t!==10));u++);else s="";if(u>=d||r.src.charCodeAt(u)!==41)return r.pos=f,!1;u++}else{if(typeof r.env.references>"u")return!1;if(u<d&&r.src.charCodeAt(u)===91?(a=u+1,u=r.md.helpers.parseLinkLabel(r,u),u>=0?i=r.src.slice(a,u++):u=p+1):u=p+1,i||(i=r.src.slice(h,p)),l=r.env.references[Hr(i)],!l)return r.pos=f,!1;c=l.href,s=l.title}if(!e){n=r.src.slice(h,p);const m=[];r.md.inline.parse(n,r.md,r.env,m);const g=r.push("image","img",0),y=[["src",c],["alt",""]];g.attrs=y,g.children=m,g.content=n,s&&y.push(["title",s])}return r.pos=u,r.posMax=d,!0}const ug=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,lg=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function og(r,e){let t=r.pos;if(r.src.charCodeAt(t)!==60)return!1;const n=r.pos,i=r.posMax;for(;;){if(++t>=i)return!1;const l=r.src.charCodeAt(t);if(l===60)return!1;if(l===62)break}const u=r.src.slice(n+1,t);if(lg.test(u)){const l=r.md.normalizeLink(u);if(!r.md.validateLink(l))return!1;if(!e){const o=r.push("link_open","a",1);o.attrs=[["href",l]],o.markup="autolink",o.info="auto";const s=r.push("text","",0);s.content=r.md.normalizeLinkText(u);const a=r.push("link_close","a",-1);a.markup="autolink",a.info="auto"}return r.pos+=u.length+2,!0}if(ug.test(u)){const l=r.md.normalizeLink("mailto:"+u);if(!r.md.validateLink(l))return!1;if(!e){const o=r.push("link_open","a",1);o.attrs=[["href",l]],o.markup="autolink",o.info="auto";const s=r.push("text","",0);s.content=r.md.normalizeLinkText(u);const a=r.push("link_close","a",-1);a.markup="autolink",a.info="auto"}return r.pos+=u.length+2,!0}return!1}function sg(r){return/^<a[>\s]/i.test(r)}function ag(r){return/^<\/a\s*>/i.test(r)}function cg(r){const e=r|32;return e>=97&&e<=122}function fg(r,e){if(!r.md.options.html)return!1;const t=r.posMax,n=r.pos;if(r.src.charCodeAt(n)!==60||n+2>=t)return!1;const i=r.src.charCodeAt(n+1);if(i!==33&&i!==63&&i!==47&&!cg(i))return!1;const u=r.src.slice(n).match(q2);if(!u)return!1;if(!e){const l=r.push("html_inline","",0);l.content=u[0],sg(l.content)&&r.linkLevel++,ag(l.content)&&r.linkLevel--}return r.pos+=u[0].length,!0}const dg=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,hg=/^&([a-z][a-z0-9]{1,31});/i;function pg(r,e){const t=r.pos,n=r.posMax;if(r.src.charCodeAt(t)!==38||t+1>=n)return!1;if(r.src.charCodeAt(t+1)===35){const u=r.src.slice(t).match(dg);if(u){if(!e){const l=u[1][0].toLowerCase()==="x"?parseInt(u[1].slice(1),16):parseInt(u[1],10),o=r.push("text_special","",0);o.content=Eu(l)?Ar(l):Ar(65533),o.markup=u[0],o.info="entity"}return r.pos+=u[0].length,!0}}else{const u=r.src.slice(t).match(hg);if(u){const l=Ef(u[0]);if(l!==u[0]){if(!e){const o=r.push("text_special","",0);o.content=l,o.markup=u[0],o.info="entity"}return r.pos+=u[0].length,!0}}}return!1}function sa(r){const e={},t=r.length;if(!t)return;let n=0,i=-2;const u=[];for(let l=0;l<t;l++){const o=r[l];if(u.push(0),(r[n].marker!==o.marker||i!==o.token-1)&&(n=l),i=o.token,o.length=o.length||0,!o.close)continue;e.hasOwnProperty(o.marker)||(e[o.marker]=[-1,-1,-1,-1,-1,-1]);const s=e[o.marker][(o.open?3:0)+o.length%3];let a=n-u[n]-1,c=a;for(;a>s;a-=u[a]+1){const f=r[a];if(f.marker===o.marker&&f.open&&f.end<0){let d=!1;if((f.close||o.open)&&(f.length+o.length)%3===0&&(f.length%3!==0||o.length%3!==0)&&(d=!0),!d){const h=a>0&&!r[a-1].open?u[a-1]+1:0;u[l]=l-a+h,u[a]=h,o.open=!1,f.end=l,f.close=!1,c=-1,i=-2;break}}}c!==-1&&(e[o.marker][(o.open?3:0)+(o.length||0)%3]=c)}}function mg(r){const e=r.tokens_meta,t=r.tokens_meta.length;sa(r.delimiters);for(let n=0;n<t;n++)e[n]&&e[n].delimiters&&sa(e[n].delimiters)}function gg(r){let e,t,n=0;const i=r.tokens,u=r.tokens.length;for(e=t=0;e<u;e++)i[e].nesting<0&&n--,i[e].level=n,i[e].nesting>0&&n++,i[e].type==="text"&&e+1<u&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==t&&(i[t]=i[e]),t++);e!==t&&(i.length=t)}const _i=[["text",J2],["linkify",G2],["newline",Z2],["escape",Q2],["backticks",Y2],["strikethrough",If.tokenize],["emphasis",Ff.tokenize],["link",rg],["image",ig],["autolink",og],["html_inline",fg],["entity",pg]],ki=[["balance_pairs",mg],["strikethrough",If.postProcess],["emphasis",Ff.postProcess],["fragments_join",gg]];function Jn(){this.ruler=new Te;for(let r=0;r<_i.length;r++)this.ruler.push(_i[r][0],_i[r][1]);this.ruler2=new Te;for(let r=0;r<ki.length;r++)this.ruler2.push(ki[r][0],ki[r][1])}Jn.prototype.skipToken=function(r){const e=r.pos,t=this.ruler.getRules(""),n=t.length,i=r.md.options.maxNesting,u=r.cache;if(typeof u[e]<"u"){r.pos=u[e];return}let l=!1;if(r.level<i){for(let o=0;o<n;o++)if(r.level++,l=t[o](r,!0),r.level--,l){if(e>=r.pos)throw new Error("inline rule didn't increment state.pos");break}}else r.pos=r.posMax;l||r.pos++,u[e]=r.pos};Jn.prototype.tokenize=function(r){const e=this.ruler.getRules(""),t=e.length,n=r.posMax,i=r.md.options.maxNesting;for(;r.pos<n;){const u=r.pos;let l=!1;if(r.level<i){for(let o=0;o<t;o++)if(l=e[o](r,!1),l){if(u>=r.pos)throw new Error("inline rule didn't increment state.pos");break}}if(l){if(r.pos>=n)break;continue}r.pending+=r.src[r.pos++]}r.pending&&r.pushPending()};Jn.prototype.parse=function(r,e,t,n){const i=new this.State(r,e,t,n);this.tokenize(i);const u=this.ruler2.getRules(""),l=u.length;for(let o=0;o<l;o++)u[o](i)};Jn.prototype.State=Un;function bg(r){const e={};r=r||{},e.src_Any=wf.source,e.src_Cc=Cf.source,e.src_Z=vf.source,e.src_P=vu.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const t="[><]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(r["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(r["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function Yi(r){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(n){r[n]=t[n]})}),r}function Wr(r){return Object.prototype.toString.call(r)}function _g(r){return Wr(r)==="[object String]"}function kg(r){return Wr(r)==="[object Object]"}function yg(r){return Wr(r)==="[object RegExp]"}function aa(r){return Wr(r)==="[object Function]"}function xg(r){return r.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const Rf={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function wg(r){return Object.keys(r||{}).reduce(function(e,t){return e||Rf.hasOwnProperty(t)},!1)}const Cg={"http:":{validate:function(r,e,t){const n=r.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(n)?n.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(r,e,t){const n=r.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(n)?e>=3&&r[e-3]===":"||e>=3&&r[e-3]==="/"?0:n.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(r,e,t){const n=r.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(n)?n.match(t.re.mailto)[0].length:0}}},vg="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Sg="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Eg(r){r.__index__=-1,r.__text_cache__=""}function Ag(r){return function(e,t){const n=e.slice(t);return r.test(n)?n.match(r)[0].length:0}}function ca(){return function(r,e){e.normalize(r)}}function Mr(r){const e=r.re=bg(r.__opts__),t=r.__tlds__.slice();r.onCompile(),r.__tlds_replaced__||t.push(vg),t.push(e.src_xn),e.src_tlds=t.join("|");function n(o){return o.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");const i=[];r.__compiled__={};function u(o,s){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+s)}Object.keys(r.__schemas__).forEach(function(o){const s=r.__schemas__[o];if(s===null)return;const a={validate:null,link:null};if(r.__compiled__[o]=a,kg(s)){yg(s.validate)?a.validate=Ag(s.validate):aa(s.validate)?a.validate=s.validate:u(o,s),aa(s.normalize)?a.normalize=s.normalize:s.normalize?u(o,s):a.normalize=ca();return}if(_g(s)){i.push(o);return}u(o,s)}),i.forEach(function(o){r.__compiled__[r.__schemas__[o]]&&(r.__compiled__[o].validate=r.__compiled__[r.__schemas__[o]].validate,r.__compiled__[o].normalize=r.__compiled__[r.__schemas__[o]].normalize)}),r.__compiled__[""]={validate:null,normalize:ca()};const l=Object.keys(r.__compiled__).filter(function(o){return o.length>0&&r.__compiled__[o]}).map(xg).join("|");r.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+l+")","i"),r.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+l+")","ig"),r.re.schema_at_start=RegExp("^"+r.re.schema_search.source,"i"),r.re.pretest=RegExp("("+r.re.schema_test.source+")|("+r.re.host_fuzzy_test.source+")|@","i"),Eg(r)}function Mg(r,e){const t=r.__index__,n=r.__last_index__,i=r.__text_cache__.slice(t,n);this.schema=r.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=n+e,this.raw=i,this.text=i,this.url=i}function Xi(r,e){const t=new Mg(r,e);return r.__compiled__[t.schema].normalize(t,r),t}function Re(r,e){if(!(this instanceof Re))return new Re(r,e);e||wg(r)&&(e=r,r={}),this.__opts__=Yi({},Rf,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Yi({},Cg,r),this.__compiled__={},this.__tlds__=Sg,this.__tlds_replaced__=!1,this.re={},Mr(this)}Re.prototype.add=function(e,t){return this.__schemas__[e]=t,Mr(this),this};Re.prototype.set=function(e){return this.__opts__=Yi(this.__opts__,e),this};Re.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,n,i,u,l,o,s,a,c;if(this.re.schema_test.test(e)){for(s=this.re.schema_search,s.lastIndex=0;(t=s.exec(e))!==null;)if(u=this.testSchemaAt(e,t[2],s.lastIndex),u){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+u;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(a=e.search(this.re.host_fuzzy_test),a>=0&&(this.__index__<0||a<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(l=n.index+n[1].length,(this.__index__<0||l<this.__index__)&&(this.__schema__="",this.__index__=l,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(l=i.index+i[1].length,o=i.index+i[0].length,(this.__index__<0||l<this.__index__||l===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=l,this.__last_index__=o))),this.__index__>=0};Re.prototype.pretest=function(e){return this.re.pretest.test(e)};Re.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0};Re.prototype.match=function(e){const t=[];let n=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(Xi(this,n)),n=this.__last_index__);let i=n?e.slice(n):e;for(;this.test(i);)t.push(Xi(this,n)),i=i.slice(this.__last_index__),n+=this.__last_index__;return t.length?t:null};Re.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const n=this.testSchemaAt(e,t[2],t[0].length);return n?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+n,Xi(this,0)):null};Re.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,i,u){return n!==u[i-1]}).reverse(),Mr(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Mr(this),this)};Re.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Re.prototype.onCompile=function(){};const nn=2147483647,Ye=36,Du=1,Ln=26,Dg=38,Tg=700,zf=72,Pf=128,Bf="-",Ng=/^xn--/,Og=/[^\0-\x7F]/,Ig=/[\x2E\u3002\uFF0E\uFF61]/g,Fg={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},yi=Ye-Du,Xe=Math.floor,xi=String.fromCharCode;function pt(r){throw new RangeError(Fg[r])}function Rg(r,e){const t=[];let n=r.length;for(;n--;)t[n]=e(r[n]);return t}function Lf(r,e){const t=r.split("@");let n="";t.length>1&&(n=t[0]+"@",r=t[1]),r=r.replace(Ig,".");const i=r.split("."),u=Rg(i,e).join(".");return n+u}function qf(r){const e=[];let t=0;const n=r.length;for(;t<n;){const i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){const u=r.charCodeAt(t++);(u&64512)==56320?e.push(((i&1023)<<10)+(u&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}const zg=r=>String.fromCodePoint(...r),Pg=function(r){return r>=48&&r<58?26+(r-48):r>=65&&r<91?r-65:r>=97&&r<123?r-97:Ye},fa=function(r,e){return r+22+75*(r<26)-((e!=0)<<5)},Vf=function(r,e,t){let n=0;for(r=t?Xe(r/Tg):r>>1,r+=Xe(r/e);r>yi*Ln>>1;n+=Ye)r=Xe(r/yi);return Xe(n+(yi+1)*r/(r+Dg))},$f=function(r){const e=[],t=r.length;let n=0,i=Pf,u=zf,l=r.lastIndexOf(Bf);l<0&&(l=0);for(let o=0;o<l;++o)r.charCodeAt(o)>=128&&pt("not-basic"),e.push(r.charCodeAt(o));for(let o=l>0?l+1:0;o<t;){const s=n;for(let c=1,f=Ye;;f+=Ye){o>=t&&pt("invalid-input");const d=Pg(r.charCodeAt(o++));d>=Ye&&pt("invalid-input"),d>Xe((nn-n)/c)&&pt("overflow"),n+=d*c;const h=f<=u?Du:f>=u+Ln?Ln:f-u;if(d<h)break;const p=Ye-h;c>Xe(nn/p)&&pt("overflow"),c*=p}const a=e.length+1;u=Vf(n-s,a,s==0),Xe(n/a)>nn-i&&pt("overflow"),i+=Xe(n/a),n%=a,e.splice(n++,0,i)}return String.fromCodePoint(...e)},Hf=function(r){const e=[];r=qf(r);const t=r.length;let n=Pf,i=0,u=zf;for(const s of r)s<128&&e.push(xi(s));const l=e.length;let o=l;for(l&&e.push(Bf);o<t;){let s=nn;for(const c of r)c>=n&&c<s&&(s=c);const a=o+1;s-n>Xe((nn-i)/a)&&pt("overflow"),i+=(s-n)*a,n=s;for(const c of r)if(c<n&&++i>nn&&pt("overflow"),c===n){let f=i;for(let d=Ye;;d+=Ye){const h=d<=u?Du:d>=u+Ln?Ln:d-u;if(f<h)break;const p=f-h,m=Ye-h;e.push(xi(fa(h+p%m,0))),f=Xe(p/m)}e.push(xi(fa(f,0))),u=Vf(i,a,o===l),i=0,++o}++i,++n}return e.join("")},Bg=function(r){return Lf(r,function(e){return Ng.test(e)?$f(e.slice(4).toLowerCase()):e})},Lg=function(r){return Lf(r,function(e){return Og.test(e)?"xn--"+Hf(e):e})},jf={version:"2.3.1",ucs2:{decode:qf,encode:zg},decode:$f,encode:Hf,toASCII:Lg,toUnicode:Bg},qg={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Vg={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},$g={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Hg={default:qg,zero:Vg,commonmark:$g},jg=/^(vbscript|javascript|file|data):/,Wg=/^data:image\/(gif|png|jpeg|webp);/;function Ug(r){const e=r.trim().toLowerCase();return jg.test(e)?Wg.test(e):!0}const Wf=["http:","https:","mailto:"];function Jg(r){const e=Cu(r,!0);if(e.hostname&&(!e.protocol||Wf.indexOf(e.protocol)>=0))try{e.hostname=jf.toASCII(e.hostname)}catch{}return Wn(wu(e))}function Kg(r){const e=Cu(r,!0);if(e.hostname&&(!e.protocol||Wf.indexOf(e.protocol)>=0))try{e.hostname=jf.toUnicode(e.hostname)}catch{}return an(wu(e),an.defaultChars+"%")}function qe(r,e){if(!(this instanceof qe))return new qe(r,e);e||Su(r)||(e=r||{},r="default"),this.inline=new Jn,this.block=new jr,this.core=new Au,this.renderer=new fn,this.linkify=new Re,this.validateLink=Ug,this.normalizeLink=Jg,this.normalizeLinkText=Kg,this.utils=Qm,this.helpers=$r({},t2),this.options={},this.configure(r),e&&this.set(e)}qe.prototype.set=function(r){return $r(this.options,r),this};qe.prototype.configure=function(r){const e=this;if(Su(r)){const t=r;if(r=Hg[t],!r)throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!r)throw new Error("Wrong `markdown-it` preset, can't be empty");return r.options&&e.set(r.options),r.components&&Object.keys(r.components).forEach(function(t){r.components[t].rules&&e[t].ruler.enableOnly(r.components[t].rules),r.components[t].rules2&&e[t].ruler2.enableOnly(r.components[t].rules2)}),this};qe.prototype.enable=function(r,e){let t=[];Array.isArray(r)||(r=[r]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.enable(r,!0))},this),t=t.concat(this.inline.ruler2.enable(r,!0));const n=r.filter(function(i){return t.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};qe.prototype.disable=function(r,e){let t=[];Array.isArray(r)||(r=[r]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.disable(r,!0))},this),t=t.concat(this.inline.ruler2.disable(r,!0));const n=r.filter(function(i){return t.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};qe.prototype.use=function(r){const e=[this].concat(Array.prototype.slice.call(arguments,1));return r.apply(r,e),this};qe.prototype.parse=function(r,e){if(typeof r!="string")throw new Error("Input data should be a String");const t=new this.core.State(r,this,e);return this.core.process(t),t.tokens};qe.prototype.render=function(r,e){return e=e||{},this.renderer.render(this.parse(r,e),this.options,e)};qe.prototype.parseInline=function(r,e){const t=new this.core.State(r,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};qe.prototype.renderInline=function(r,e){return e=e||{},this.renderer.render(this.parseInline(r,e),this.options,e)};const eu=new u0({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(r){return["h"+r.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:r=>({params:r.getAttribute("data-params")||""})}],toDOM(r){return["pre",r.attrs.params?{"data-params":r.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs(r){return{order:r.hasAttribute("start")?+r.getAttribute("start"):1,tight:r.hasAttribute("data-tight")}}}],toDOM(r){return["ol",{start:r.attrs.order==1?null:r.attrs.order,"data-tight":r.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:r=>({tight:r.hasAttribute("data-tight")})}],toDOM(r){return["ul",{"data-tight":r.attrs.tight?"true":null},0]}},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(r){return{src:r.getAttribute("src"),title:r.getAttribute("title"),alt:r.getAttribute("alt")}}}],toDOM(r){return["img",r.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:r=>r.type.name=="em"}],toDOM(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:r=>r.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:r=>r.type.name=="strong"},{style:"font-weight",getAttrs:r=>/^(bold(er)?|[5-9]\d{2,})$/.test(r)&&null}],toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(r){return{href:r.getAttribute("href"),title:r.getAttribute("title")}}}],toDOM(r){return["a",r.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}});function Gg(r,e){if(r.isText&&e.isText&&U.sameSet(r.marks,e.marks))return r.withText(r.text+e.text)}class Zg{constructor(e,t){this.schema=e,this.tokenHandlers=t,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:U.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let t=this.top(),n=t.content,i=n[n.length-1],u=this.schema.text(e,t.marks),l;i&&(l=Gg(i,u))?n[n.length-1]=l:n.push(u)}openMark(e){let t=this.top();t.marks=e.addToSet(t.marks)}closeMark(e){let t=this.top();t.marks=e.removeFromSet(t.marks)}parseTokens(e){for(let t=0;t<e.length;t++){let n=e[t],i=this.tokenHandlers[n.type];if(!i)throw new Error("Token type `"+n.type+"` not supported by Markdown parser");i(this,n,e,t)}}addNode(e,t,n){let i=this.top(),u=e.createAndFill(t,n,i?i.marks:[]);return u?(this.push(u),u):null}openNode(e,t){this.stack.push({type:e,attrs:t,content:[],marks:U.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}}function pn(r,e,t,n){return r.getAttrs?r.getAttrs(e,t,n):r.attrs instanceof Function?r.attrs(e):r.attrs}function wi(r,e){return r.noCloseToken||e=="code_inline"||e=="code_block"||e=="fence"}function da(r){return r[r.length-1]==`
`?r.slice(0,r.length-1):r}function Ci(){}function Qg(r,e){let t=Object.create(null);for(let n in e){let i=e[n];if(i.block){let u=r.nodeType(i.block);wi(i,n)?t[n]=(l,o,s,a)=>{l.openNode(u,pn(i,o,s,a)),l.addText(da(o.content)),l.closeNode()}:(t[n+"_open"]=(l,o,s,a)=>l.openNode(u,pn(i,o,s,a)),t[n+"_close"]=l=>l.closeNode())}else if(i.node){let u=r.nodeType(i.node);t[n]=(l,o,s,a)=>l.addNode(u,pn(i,o,s,a))}else if(i.mark){let u=r.marks[i.mark];wi(i,n)?t[n]=(l,o,s,a)=>{l.openMark(u.create(pn(i,o,s,a))),l.addText(da(o.content)),l.closeMark(u)}:(t[n+"_open"]=(l,o,s,a)=>l.openMark(u.create(pn(i,o,s,a))),t[n+"_close"]=l=>l.closeMark(u))}else if(i.ignore)wi(i,n)?t[n]=Ci:(t[n+"_open"]=Ci,t[n+"_close"]=Ci);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(i))}return t.text=(n,i)=>n.addText(i.content),t.inline=(n,i)=>n.parseTokens(i.children),t.softbreak=t.softbreak||(n=>n.addText(" ")),t}class Yg{constructor(e,t,n){this.schema=e,this.tokenizer=t,this.tokens=n,this.tokenHandlers=Qg(e,n)}parse(e,t={}){let n=new Zg(this.schema,this.tokenHandlers),i;n.parseTokens(this.tokenizer.parse(e,t));do i=n.closeNode();while(n.stack.length);return i||this.schema.topNodeType.createAndFill()}}function ha(r,e){for(;++e<r.length;)if(r[e].type!="list_item_open")return r[e].hidden;return!1}const Xg=new Yg(eu,qe("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(r,e,t)=>({tight:ha(e,t)})},ordered_list:{block:"ordered_list",getAttrs:(r,e,t)=>({order:+r.attrGet("start")||1,tight:ha(e,t)})},heading:{block:"heading",getAttrs:r=>({level:+r.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:r=>({params:r.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:r=>({src:r.attrGet("src"),title:r.attrGet("title")||null,alt:r.children[0]&&r.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:r=>({href:r.attrGet("href"),title:r.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});class eb{constructor(e,t,n={}){this.nodes=e,this.marks=t,this.options=n}serialize(e,t={}){t=Object.assign({},this.options,t);let n=new rb(this.nodes,this.marks,t);return n.renderContent(e),n.out}}const tb=new eb({blockquote(r,e){r.wrapBlock("> ",null,e,()=>r.renderContent(e))},code_block(r,e){const t=e.textContent.match(/`{3,}/gm),n=t?t.sort().slice(-1)[0]+"`":"```";r.write(n+(e.attrs.params||"")+`
`),r.text(e.textContent,!1),r.write(`
`),r.write(n),r.closeBlock(e)},heading(r,e){r.write(r.repeat("#",e.attrs.level)+" "),r.renderInline(e,!1),r.closeBlock(e)},horizontal_rule(r,e){r.write(e.attrs.markup||"---"),r.closeBlock(e)},bullet_list(r,e){r.renderList(e,"  ",()=>(e.attrs.bullet||"*")+" ")},ordered_list(r,e){let t=e.attrs.order||1,n=String(t+e.childCount-1).length,i=r.repeat(" ",n+2);r.renderList(e,i,u=>{let l=String(t+u);return r.repeat(" ",n-l.length)+l+". "})},list_item(r,e){r.renderContent(e)},paragraph(r,e){r.renderInline(e),r.closeBlock(e)},image(r,e){r.write("!["+r.esc(e.attrs.alt||"")+"]("+e.attrs.src.replace(/[\(\)]/g,"\\$&")+(e.attrs.title?' "'+e.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(r,e,t,n){for(let i=n+1;i<t.childCount;i++)if(t.child(i).type!=e.type){r.write(`\\
`);return}},text(r,e){r.text(e.text,!r.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open(r,e,t,n){return r.inAutolink=nb(e,t,n),r.inAutolink?"<":"["},close(r,e,t,n){let{inAutolink:i}=r;return r.inAutolink=void 0,i?">":"]("+e.attrs.href.replace(/[\(\)"]/g,"\\$&")+(e.attrs.title?` "${e.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open(r,e,t,n){return pa(t.child(n),-1)},close(r,e,t,n){return pa(t.child(n-1),1)},escape:!1}});function pa(r,e){let t=/`+/g,n,i=0;if(r.isText)for(;n=t.exec(r.text);)i=Math.max(i,n[0].length);let u=i>0&&e>0?" `":"`";for(let l=0;l<i;l++)u+="`";return i>0&&e<0&&(u+=" "),u}function nb(r,e,t){if(r.attrs.title||!/^\w+:/.test(r.attrs.href))return!1;let n=e.child(t);return!n.isText||n.text!=r.attrs.href||n.marks[n.marks.length-1]!=r?!1:t==e.childCount-1||!r.isInSet(e.child(t+1).marks)}class rb{constructor(e,t,n){this.nodes=e,this.marks=t,this.options=n,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName>"u"&&(this.options.hardBreakNodeName="hard_break")}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),e>1){let t=this.delim,n=/\s+$/.exec(t);n&&(t=t.slice(0,t.length-n[0].length));for(let i=1;i<e;i++)this.out+=t+`
`}this.closed=null}}wrapBlock(e,t,n,i){let u=this.delim;this.write(t??e),this.delim+=e,i(),this.delim=u,this.closeBlock(n)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,t=!0){let n=e.split(`
`);for(let i=0;i<n.length;i++)this.write(),!t&&n[i][0]=="["&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=t?this.esc(n[i],this.atBlockStart):n[i],i!=n.length-1&&(this.out+=`
`)}render(e,t,n){if(!this.nodes[e.type.name])throw new Error("Token type `"+e.type.name+"` not supported by Markdown renderer");this.nodes[e.type.name](this,e,t,n)}renderContent(e){e.forEach((t,n,i)=>this.render(t,e,i))}renderInline(e,t=!0){this.atBlockStart=t;let n=[],i="",u=(l,o,s)=>{let a=l?l.marks:[];l&&l.type.name===this.options.hardBreakNodeName&&(a=a.filter(m=>{if(s+1==e.childCount)return!1;let g=e.child(s+1);return m.isInSet(g.marks)&&(!g.isText||/\S/.test(g.text))}));let c=i;if(i="",l&&l.isText&&a.some(m=>{let g=this.marks[m.type.name];return g&&g.expelEnclosingWhitespace&&!m.isInSet(n)})){let[m,g,y]=/^(\s*)(.*)$/m.exec(l.text);g&&(c+=g,l=y?l.withText(y):null,l||(a=n))}if(l&&l.isText&&a.some(m=>{let g=this.marks[m.type.name];return g&&g.expelEnclosingWhitespace&&(s==e.childCount-1||!m.isInSet(e.child(s+1).marks))})){let[m,g,y]=/^(.*?)(\s*)$/m.exec(l.text);y&&(i=y,l=g?l.withText(g):null,l||(a=n))}let f=a.length?a[a.length-1]:null,d=f&&this.marks[f.type.name].escape===!1,h=a.length-(d?1:0);e:for(let m=0;m<h;m++){let g=a[m];if(!this.marks[g.type.name].mixable)break;for(let y=0;y<n.length;y++){let w=n[y];if(!this.marks[w.type.name].mixable)break;if(g.eq(w)){m>y?a=a.slice(0,y).concat(g).concat(a.slice(y,m)).concat(a.slice(m+1,h)):y>m&&(a=a.slice(0,m).concat(a.slice(m+1,y)).concat(g).concat(a.slice(y,h)));continue e}}}let p=0;for(;p<Math.min(n.length,h)&&a[p].eq(n[p]);)++p;for(;p<n.length;)this.text(this.markString(n.pop(),!1,e,s),!1);if(c&&this.text(c),l){for(;n.length<h;){let m=a[n.length];n.push(m),this.text(this.markString(m,!0,e,s),!1),this.atBlockStart=!1}d&&l.isText?this.text(this.markString(f,!0,e,s)+l.text+this.markString(f,!1,e,s+1),!1):this.render(l,e,s),this.atBlockStart=!1}l?.isText&&l.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(u),u(null,0,e.childCount),this.atBlockStart=!1}renderList(e,t,n){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let i=typeof e.attrs.tight<"u"?e.attrs.tight:this.options.tightLists,u=this.inTightList;this.inTightList=i,e.forEach((l,o,s)=>{s&&i&&this.flushClose(1),this.wrapBlock(t,n(s),e,()=>this.render(l,e,s))}),this.inTightList=u}esc(e,t=!1){return e=e.replace(/[`*\\~\[\]_]/g,(n,i)=>n=="_"&&i>0&&i+1<e.length&&e[i-1].match(/\w/)&&e[i+1].match(/\w/)?n:"\\"+n),t&&(e=e.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let t=e.indexOf('"')==-1?'""':e.indexOf("'")==-1?"''":"()";return t[0]+e+t[1]}repeat(e,t){let n="";for(let i=0;i<t;i++)n+=e;return n}markString(e,t,n,i){let u=this.marks[e.type.name],l=t?u.open:u.close;return typeof l=="string"?l:l(this,e,n,i)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}}function ib(r,e,t){const n=document.querySelector("#content");if(!n)throw new Error("Content element not found");return new dp(r,{state:Qt.create({doc:Xg.parse(n.value),schema:eu,plugins:[...cm({schema:eu}),$i({"Mod-[":(i,u)=>{const{selection:l}=i,o=l.$from.node();if(o.type.name!=="heading")return!1;let s=o.attrs.level;return s>=6?s=1:s+=1,u?.(i.tr.setNodeMarkup(l.$from.before(),null,{...o.attrs,level:s})),!0}}),...t]}),nodeViews:e})}function ub(r){let e,t;return{c(){e=C("span"),t=ee(r[0]),this.h()},l(n){e=v(n,"SPAN",{class:!0});var i=O(e);t=te(i,r[0]),i.forEach(_),this.h()},h(){b(e,"class","hash svelte-sm6p8j")},m(n,i){x(n,e,i),M(e,t)},p:$,i:$,o:$,d(n){n&&_(e)}}}function lb(r){const t=Cp("spec")?.level;return[Array(t||0).fill("#").join("")]}class ob extends Ee{constructor(e){super(),Ae(this,e,lb,ub,me,{})}}function sb(r){let e,t,n;return{c(){e=C("div"),this.h()},l(i){e=v(i,"DIV",{class:!0}),O(e).forEach(_),this.h()},h(){b(e,"class","svelte-e2m4q9"),je(e,"selected",r[0])},m(i,u){x(i,e,u),t||(n=nu(r[1].call(null,e)),t=!0)},p(i,[u]){u&1&&je(e,"selected",i[0])},i:$,o:$,d(i){i&&_(e),t=!1,n()}}}function ab(r,e,t){let n=!1;const i=wr("contentRef");return wr("selected").subscribe(l=>{t(0,n=l)}),[n,i]}class cb extends Ee{constructor(e){super(),Ae(this,e,ab,sb,me,{})}}function vi(r){let e,t,n;return{c(){e=C(r[0])},l(i){e=v(i,(r[0]||"null").toUpperCase(),{}),O(e).forEach(_)},m(i,u){x(i,e,u),t||(n=nu(r[1].call(null,e)),t=!0)},p:$,d(i){i&&_(e),t=!1,n()}}}function fb(r){let e=r[0],t,n=r[0]&&vi(r);return{c(){n&&n.c(),t=T()},l(i){n&&n.l(i),t=T()},m(i,u){n&&n.m(i,u),x(i,t,u)},p(i,[u]){i[0]?e?me(e,i[0])?(n.d(1),n=vi(i),e=i[0],n.c(),n.m(t.parentNode,t)):n.p(i,u):(n=vi(i),e=i[0],n.c(),n.m(t.parentNode,t)):e&&(n.d(1),n=null,e=i[0])},i:$,o:$,d(i){i&&_(t),n&&n.d(i)}}}function db(r,e,t){let n="h1";const i=wr("contentRef");return wr("node").subscribe(l=>{const o=l.attrs.level;t(0,n=`h${o}`)}),[n,i]}class hb extends Ee{constructor(e){super(),Ae(this,e,db,fb,me,{})}}function pb(r){let e,t,n;return{c(){e=C("div"),this.h()},l(i){e=v(i,"DIV",{class:!0}),O(e).forEach(_),this.h()},h(){b(e,"class","editor bg-base-200 dark:bg-base-300 svelte-az7rnp")},m(i,u){x(i,e,u),t||(n=nu(r[0].call(null,e)),t=!0)},p:$,i:$,o:$,d(i){i&&_(e),t=!1,n()}}}function mb(r,e,t){const n=mp(),u=vp()({component:ob,as:"i"});let l;function o(){return tb.serialize(l?.state?.doc)??null}function s(a){l=ib(a,{paragraph:n({component:cb,as:"div",contentAs:"p"}),heading:n({component:hb})},[new Tt({props:{decorations(c){const{$from:f}=c.selection,d=f.node();if(d.type.name!=="heading")return le.empty;const h=u(f.before()+1,{side:-1,level:d.attrs.level});return le.create(c.doc,[h])}}})])}return Uf(()=>{l?.destroy()}),[s,o]}class gb extends Ee{constructor(e){super(),Ae(this,e,mb,pb,me,{getMarkdownContent:1})}get getMarkdownContent(){return this.$$.ctx[1]}}function ma(r,e,t){const n=r.slice();return n[20]=e[t][0],n[21]=e[t][1],n}function ga(r){let e,t,n,i;const u=[kb,_b,bb],l=[];function o(s,a){return s[0]?He[s[4]].items?1:2:0}return e=o(r),t=l[e]=u[e](r),{c(){t.c(),n=T()},l(s){t.l(s),n=T()},m(s,a){l[e].m(s,a),x(s,n,a),i=!0},p(s,a){let c=e;e=o(s),e===c?l[e].p(s,a):(J(),R(l[c],1,1,()=>{l[c]=null}),K(),t=l[e],t?t.p(s,a):(t=l[e]=u[e](s),t.c()),D(t,1),t.m(n.parentNode,n))},i(s){i||(D(t),i=!0)},o(s){R(t),i=!1},d(s){s&&_(n),l[e].d(s)}}}function bb(r){let e,t='<p class="mx-auto mt-8 mb-4">Changes saved</p>';return{c(){e=C("div"),e.innerHTML=t,this.h()},l(n){e=v(n,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1y1ajmb"&&(e.innerHTML=t),this.h()},h(){b(e,"class","flex")},m(n,i){x(n,e,i)},p:$,i:$,o:$,d(n){n&&_(e)}}}function _b(r){let e,t,n='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>Configuration saved. Now you can add content to the section from any of this places:</span>',i,u=He[r[4]].items.includes("stalls"),l,o=He[r[4]].items.includes("products"),s=u&&ba(),a=o&&_a();return{c(){e=C("div"),t=C("div"),t.innerHTML=n,i=I(),s&&s.c(),l=I(),a&&a.c(),this.h()},l(c){e=v(c,"DIV",{class:!0});var f=O(e);t=v(f,"DIV",{class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-1jq7eei"&&(t.innerHTML=n),i=F(f),s&&s.l(f),l=F(f),a&&a.l(f),f.forEach(_),this.h()},h(){b(t,"class","alert alert-info mb-4"),b(e,"class","mt-6")},m(c,f){x(c,e,f),M(e,t),M(e,i),s&&s.m(e,null),M(e,l),a&&a.m(e,null)},p(c,f){f&16&&(u=He[c[4]].items.includes("stalls")),u?s||(s=ba(),s.c(),s.m(e,l)):s&&(s.d(1),s=null),f&16&&(o=He[c[4]].items.includes("products")),o?a||(a=_a(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:$,o:$,d(c){c&&_(e),s&&s.d(),a&&a.d()}}}function kb(r){let e,t,n,i,u;function l(f,d){return f[3].title&&f[3].sections[f[2]]?xb:yb}let o=l(r),s=o(r),a=(r[4]!=="products_with_slider"||r[4]==="products_with_slider"&&!r[9])&&ka(r),c=r[4]&&wa(r);return{c(){e=C("p"),s.c(),t=I(),a&&a.c(),n=I(),c&&c.c(),i=T(),this.h()},l(f){e=v(f,"P",{class:!0});var d=O(e);s.l(d),d.forEach(_),t=F(f),a&&a.l(f),n=F(f),c&&c.l(f),i=T(),this.h()},h(){b(e,"class","text-lg")},m(f,d){x(f,e,d),s.m(e,null),x(f,t,d),a&&a.m(f,d),x(f,n,d),c&&c.m(f,d),x(f,i,d),u=!0},p(f,d){o===(o=l(f))&&s?s.p(f,d):(s.d(1),s=o(f),s&&(s.c(),s.m(e,null))),f[4]!=="products_with_slider"||f[4]==="products_with_slider"&&!f[9]?a?a.p(f,d):(a=ka(f),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),f[4]?c?(c.p(f,d),d&16&&D(c,1)):(c=wa(f),c.c(),D(c,1),c.m(i.parentNode,i)):c&&(J(),R(c,1,1,()=>{c=null}),K())},i(f){u||(D(c),u=!0)},o(f){R(c),u=!1},d(f){f&&(_(e),_(t),_(n),_(i)),s.d(),a&&a.d(f),c&&c.d(f)}}}function ba(r){let e,t="Stall Browser";return{c(){e=C("a"),e.textContent=t,this.h()},l(n){e=v(n,"A",{class:!0,target:!0,href:!0,"data-svelte-h":!0}),ue(e)!=="svelte-142lqqt"&&(e.textContent=t),this.h()},h(){b(e,"class","btn btn-sm btn-primary btn-outline mr-2"),b(e,"target","_blank"),b(e,"href","/stalls")},m(n,i){x(n,e,i)},d(n){n&&_(e)}}}function _a(r){let e,t="Planet",n,i,u="Homepage",l,o,s="Any stall";return{c(){e=C("a"),e.textContent=t,n=I(),i=C("a"),i.textContent=u,l=I(),o=C("a"),o.textContent=s,this.h()},l(a){e=v(a,"A",{class:!0,target:!0,href:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1lhi1aa"&&(e.textContent=t),n=F(a),i=v(a,"A",{class:!0,target:!0,href:!0,"data-svelte-h":!0}),ue(i)!=="svelte-e9llmq"&&(i.textContent=u),l=F(a),o=v(a,"A",{class:!0,href:!0,"data-svelte-h":!0}),ue(o)!=="svelte-1ntz3mc"&&(o.textContent=s),this.h()},h(){b(e,"class","btn btn-sm btn-primary btn-outline mr-2"),b(e,"target","_blank"),b(e,"href","/planet"),b(i,"class","btn btn-sm btn-primary btn-outline mr-2"),b(i,"target","_blank"),b(i,"href","/"),b(o,"class","btn btn-sm btn-primary btn-outline mr-2 btn-disabled"),b(o,"href",null)},m(a,c){x(a,e,c),x(a,n,c),x(a,i,c),x(a,l,c),x(a,o,c)},d(a){a&&(_(e),_(n),_(i),_(l),_(o))}}}function yb(r){let e,t,n,i;return{c(){e=ee("Editing section "),t=ee(r[2]),n=ee(" from page "),i=ee(r[1])},l(u){e=te(u,"Editing section "),t=te(u,r[2]),n=te(u," from page "),i=te(u,r[1])},m(u,l){x(u,e,l),x(u,t,l),x(u,n,l),x(u,i,l)},p(u,l){l&4&&Le(t,u[2]),l&2&&Le(i,u[1])},d(u){u&&(_(e),_(t),_(n),_(i))}}}function xb(r){let e,t,n,i=r[3].sections[r[2]].title+"",u,l,o,s,a=r[3].title+"",c,f;return{c(){e=ee("Editing section "),t=C("b"),n=C("i"),u=ee(i),l=ee(" in page "),o=C("b"),s=C("i"),c=ee(a),f=ee(":")},l(d){e=te(d,"Editing section "),t=v(d,"B",{});var h=O(t);n=v(h,"I",{});var p=O(n);u=te(p,i),p.forEach(_),h.forEach(_),l=te(d," in page "),o=v(d,"B",{});var m=O(o);s=v(m,"I",{});var g=O(s);c=te(g,a),g.forEach(_),m.forEach(_),f=te(d,":")},m(d,h){x(d,e,h),x(d,t,h),M(t,n),M(n,u),x(d,l,h),x(d,o,h),M(o,s),M(s,c),x(d,f,h)},p(d,h){h&12&&i!==(i=d[3].sections[d[2]].title+"")&&Le(u,i),h&8&&a!==(a=d[3].title+"")&&Le(c,a)},d(d){d&&(_(e),_(t),_(l),_(o),_(f))}}}function ka(r){let e,t,n,i,u,l,o,s,a,c,f,d=!r[4]&&ya(),h=j(Object.entries(He)),p=[];for(let m=0;m<h.length;m+=1)p[m]=xa(ma(r,h,m));return{c(){e=C("div"),t=ee(`Section title:
                        `),n=C("input"),i=I(),d&&d.c(),u=I(),l=C("div"),o=ee(`Section type:
                        `),s=C("select"),a=C("option");for(let m=0;m<p.length;m+=1)p[m].c();this.h()},l(m){e=v(m,"DIV",{class:!0});var g=O(e);t=te(g,`Section title:
                        `),n=v(g,"INPUT",{type:!0,class:!0}),g.forEach(_),i=F(m),d&&d.l(m),u=F(m),l=v(m,"DIV",{});var y=O(l);o=te(y,`Section type:
                        `),s=v(y,"SELECT",{class:!0});var w=O(s);a=v(w,"OPTION",{}),O(a).forEach(_);for(let k=0;k<p.length;k+=1)p[k].l(w);w.forEach(_),y.forEach(_),this.h()},h(){b(n,"type","text"),b(n,"class","ml-2 input input-bordered input-sm w-full max-w-xs"),b(e,"class","mt-8 mb-8"),a.__value="",Ct(a,a.__value),b(s,"class","ml-2 select select-sm select-bordered"),r[4]===void 0&&Kf(()=>r[14].call(s))},m(m,g){x(m,e,g),M(e,t),M(e,n),Ct(n,r[6]),x(m,i,g),d&&d.m(m,g),x(m,u,g),x(m,l,g),M(l,o),M(l,s),M(s,a);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(s,null);Fu(s,r[4],!0),c||(f=[ct(n,"input",r[13]),ct(s,"change",r[14])],c=!0)},p(m,g){if(g&64&&n.value!==m[6]&&Ct(n,m[6]),m[4]?d&&(d.d(1),d=null):d||(d=ya(),d.c(),d.m(u.parentNode,u)),g&0){h=j(Object.entries(He));let y;for(y=0;y<h.length;y+=1){const w=ma(m,h,y);p[y]?p[y].p(w,g):(p[y]=xa(w),p[y].c(),p[y].m(s,null))}for(;y<p.length;y+=1)p[y].d(1);p.length=h.length}g&16&&Fu(s,m[4])},d(m){m&&(_(e),_(i),_(u),_(l)),d&&d.d(m),se(p,m),c=!1,Gf(f)}}}function ya(r){let e,t="Choose a widget type to configure the section.";return{c(){e=C("p"),e.textContent=t,this.h()},l(n){e=v(n,"P",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1jvxpgk"&&(e.textContent=t),this.h()},h(){b(e,"class","mb-4")},m(n,i){x(n,e,i)},d(n){n&&_(e)}}}function xa(r){let e,t=r[21].title+"",n;return{c(){e=C("option"),n=ee(t),this.h()},l(i){e=v(i,"OPTION",{});var u=O(e);n=te(u,t),u.forEach(_),this.h()},h(){e.__value=r[20],Ct(e,e.__value)},m(i,u){x(i,e,u),M(e,n)},p:$,d(i){i&&_(e)}}}function wa(r){let e,t,n,i,u=(r[4]!=="products_with_slider"||r[4]==="products_with_slider"&&!r[9])&&Ca(r),l=He[r[4]].max_num_available&&va(r),o=(r[4]==="text"||r[4]==="products_with_slider"&&r[9])&&Sa(r);return{c(){u&&u.c(),e=I(),l&&l.c(),t=I(),o&&o.c(),n=T()},l(s){u&&u.l(s),e=F(s),l&&l.l(s),t=F(s),o&&o.l(s),n=T()},m(s,a){u&&u.m(s,a),x(s,e,a),l&&l.m(s,a),x(s,t,a),o&&o.m(s,a),x(s,n,a),i=!0},p(s,a){s[4]!=="products_with_slider"||s[4]==="products_with_slider"&&!s[9]?u?u.p(s,a):(u=Ca(s),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null),He[s[4]].max_num_available?l?l.p(s,a):(l=va(s),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),s[4]==="text"||s[4]==="products_with_slider"&&s[9]?o?(o.p(s,a),a&528&&D(o,1)):(o=Sa(s),o.c(),D(o,1),o.m(n.parentNode,n)):o&&(J(),R(o,1,1,()=>{o=null}),K())},i(s){i||(D(o),i=!0)},o(s){R(o),i=!1},d(s){s&&(_(e),_(t),_(n)),u&&u.d(s),l&&l.d(s),o&&o.d(s)}}}function Ca(r){let e,t,n=He[r[4]].description+"",i;return{c(){e=C("div"),t=C("p"),i=ee(n),this.h()},l(u){e=v(u,"DIV",{class:!0});var l=O(e);t=v(l,"P",{});var o=O(t);i=te(o,n),o.forEach(_),l.forEach(_),this.h()},h(){b(e,"class","mt-2 text-sm")},m(u,l){x(u,e,l),M(e,t),M(t,i)},p(u,l){l&16&&n!==(n=He[u[4]].description+"")&&Le(i,n)},d(u){u&&_(e)}}}function va(r){let e,t,n,i,u;return{c(){e=C("div"),t=ee(`Max number of products shown in the section:
                            `),n=C("input"),this.h()},l(l){e=v(l,"DIV",{class:!0});var o=O(e);t=te(o,`Max number of products shown in the section:
                            `),n=v(o,"INPUT",{type:!0,placeholder:!0,class:!0}),o.forEach(_),this.h()},h(){b(n,"type","text"),b(n,"placeholder","max products shown"),b(n,"class","mt-2 input input-bordered input-sm w-full max-w-xs"),b(e,"class","mt-8")},m(l,o){x(l,e,o),M(e,t),M(e,n),Ct(n,r[5]),i||(u=ct(n,"input",r[15]),i=!0)},p(l,o){o&32&&n.value!==l[5]&&Ct(n,l[5])},d(l){l&&_(e),i=!1,u()}}}function Sa(r){let e,t,n,i,u=r[8],l,o,s,a,c,f=Ea(r),d=r[4]==="products_with_slider"&&Aa();return{c(){e=C("div"),t=C("textarea"),n=I(),i=C("div"),f.c(),l=I(),d&&d.c(),o=T(),this.h()},l(h){e=v(h,"DIV",{style:!0});var p=O(e);t=v(p,"TEXTAREA",{id:!0}),O(t).forEach(_),p.forEach(_),n=F(h),i=v(h,"DIV",{class:!0});var m=O(i);f.l(m),m.forEach(_),l=F(h),d&&d.l(h),o=T(),this.h()},h(){b(t,"id","content"),Sn(e,"display","none"),b(i,"class","mt-8")},m(h,p){x(h,e,p),M(e,t),Ct(t,r[8]),x(h,n,p),x(h,i,p),f.m(i,null),x(h,l,p),d&&d.m(h,p),x(h,o,p),s=!0,a||(c=ct(t,"input",r[16]),a=!0)},p(h,p){p&256&&Ct(t,h[8]),p&256&&me(u,u=h[8])?(J(),R(f,1,1,$),K(),f=Ea(h),f.c(),D(f,1),f.m(i,null)):f.p(h,p),h[4]==="products_with_slider"?d||(d=Aa(),d.c(),d.m(o.parentNode,o)):d&&(d.d(1),d=null)},i(h){s||(D(f),s=!0)},o(h){R(f),s=!1},d(h){h&&(_(e),_(n),_(i),_(l),_(o)),f.d(h),d&&d.d(h),a=!1,c()}}}function Ea(r){let e,t,n;function i(l){r[17](l)}let u={};return r[7]!==void 0&&(u.getMarkdownContent=r[7]),e=new gb({props:u}),Dr.push(()=>Or(e,"getMarkdownContent",i)),{c(){Z(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,o){Y(e,l,o),n=!0},p(l,o){const s={};!t&&o&128&&(t=!0,s.getMarkdownContent=l[7],Tr(()=>t=!1)),e.$set(s)},i(l){n||(D(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){X(e,l)}}}function Aa(r){let e,t="Note: you're not editing the product description. This text will be used only when displaying this product in this section.";return{c(){e=C("span"),e.textContent=t,this.h()},l(n){e=v(n,"SPAN",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-e4uuhh"&&(e.textContent=t),this.h()},h(){b(e,"class","mt-8 text-sm")},m(n,i){x(n,e,i)},d(n){n&&_(e)}}}function Ma(r){let e,t="Save",n,i;return{c(){e=C("button"),e.textContent=t,this.h()},l(u){e=v(u,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-6lzuoj"&&(e.textContent=t),this.h()},h(){b(e,"class","btn btn-success mr-3"),je(e,"btn-disabled",!r[4]||!r[6])},m(u,l){x(u,e,l),n||(i=ct(e,"click",tu(r[10])),n=!0)},p(u,l){l&80&&je(e,"btn-disabled",!u[4]||!u[6])},d(u){u&&_(e),n=!1,i()}}}function wb(r){let e,t,n,i,u,l,o,s="Close",a,c=r[3]&&ga(r),f=r[3]&&!r[0]&&Ma(r);return{c(){e=C("dialog"),t=C("div"),c&&c.c(),n=I(),i=C("div"),u=C("form"),f&&f.c(),l=I(),o=C("button"),o.textContent=s,this.h()},l(d){e=v(d,"DIALOG",{id:!0,class:!0});var h=O(e);t=v(h,"DIV",{class:!0});var p=O(t);c&&c.l(p),n=F(p),i=v(p,"DIV",{class:!0});var m=O(i);u=v(m,"FORM",{method:!0});var g=O(u);f&&f.l(g),l=F(g),o=v(g,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(o)!=="svelte-17cpapt"&&(o.textContent=s),g.forEach(_),m.forEach(_),p.forEach(_),h.forEach(_),this.h()},h(){b(o,"class","btn"),b(u,"method","dialog"),b(i,"class","modal-action"),b(t,"class","modal-box w-11/12 max-w-5xl"),b(e,"id","setup_section"),b(e,"class","modal")},m(d,h){x(d,e,h),M(e,t),c&&c.m(t,null),M(t,n),M(t,i),M(i,u),f&&f.m(u,null),M(u,l),M(u,o),a=!0},p(d,[h]){d[3]?c?(c.p(d,h),h&8&&D(c,1)):(c=ga(d),c.c(),D(c,1),c.m(t,n)):c&&(J(),R(c,1,1,()=>{c=null}),K()),d[3]&&!d[0]?f?f.p(d,h):(f=Ma(d),f.c(),f.m(u,l)):f&&(f.d(1),f=null)},i(d){a||(D(c),a=!0)},o(d){R(c),a=!1},d(d){d&&_(e),c&&c.d(),f&&f.d()}}}function Cb(r,e,t){let n,i,u;we(r,Vn,P=>t(18,i=P)),we(r,Fr,P=>t(19,u=P)),Ep();let l,o,s=null,a,c,f,d,h="",p=null,m=!1;async function g(P,V,A=null,L=!1){if(t(0,n=!1),t(12,m=L),t(1,l=P),t(2,o=V),t(3,s=qa(l,u)),t(6,f=s?.sections[o]?.title??""),t(4,a=s?.sections[o]?.params?.sectionType??null),t(5,c=s?.sections[o]?.params?.maxProductsShown??0),a==="text"&&i&&i.admin_pubkeys.length>0){let H=0;t(8,h=""),sr(i.admin_pubkeys,[ar("sectionText_"+l+"_"+o)],(re,ge)=>{ge>H&&(H=ge,t(8,h=re))})}if(a==="products_with_slider")if(A){if(i&&i.admin_pubkeys.length>0){t(9,p=A);let H=0;t(8,h=(A.name??"")+(`

`+A.description)),sr(i.admin_pubkeys,[ar("section_products_with_slider_"+l+"_"+o+"_"+A.id)],(re,ge)=>{ge>H&&(H=ge,t(8,h=re))})}}else t(9,p=null);window.setup_section.showModal()}function y(){let P=null;(a==="text"||a==="products_with_slider"&&p)&&(P=d()),ed(l,o,{sectionTitle:f,sectionType:a,maxProductsShown:c,markDownContent:P,lastProductPassed:p}),t(0,n=!0)}function w(){f=this.value,t(6,f)}function k(){a=Jf(this),t(4,a)}function S(){c=this.value,t(5,c)}function E(){h=this.value,t(8,h)}function z(P){d=P,t(7,d)}return r.$$.update=()=>{r.$$.dirty&4097&&n&&m&&window.setup_section.close()},t(0,n=!1),[n,l,o,s,a,c,f,d,h,p,y,g,m,w,k,S,E,z]}class vb extends Ee{constructor(e){super(),Ae(this,e,Cb,wb,me,{setupSection:11})}get setupSection(){return this.$$.ctx[11]}}function Da(r,e,t){const n=r.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function Sb(r){let e,t='<span class="loading loading-bars w-24"></span>';return{c(){e=C("div"),e.innerHTML=t,this.h()},l(n){e=v(n,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1x1ih37"&&(e.innerHTML=t),this.h()},h(){b(e,"class","p-12 flex flex-wrap items-center justify-center")},m(n,i){x(n,e,i)},p:$,i:$,o:$,d(n){n&&_(e)}}}function Eb(r){let e,t,n,i,u;const l=[Mb,Ab],o=[];function s(a,c){return c&2&&(e=null),e==null&&(e=!!(a[1]&&Object.keys(a[1].sections).length>0)),e?0:1}return t=s(r,-1),n=o[t]=l[t](r),{c(){n.c(),i=T()},l(a){n.l(a),i=T()},m(a,c){o[t].m(a,c),x(a,i,c),u=!0},p(a,c){let f=t;t=s(a,c),t===f?o[t].p(a,c):(J(),R(o[f],1,1,()=>{o[f]=null}),K(),n=o[t],n?n.p(a,c):(n=o[t]=l[t](a),n.c()),D(n,1),n.m(i.parentNode,i))},i(a){u||(D(n),u=!0)},o(a){R(n),u=!1},d(a){a&&_(i),o[t].d(a)}}}function Ab(r){let e,t;return e=new Xf({props:{maxProductsLoaded:Rb}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},p:$,i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Mb(r){let e,t,n,i,u=j(r[4]),l=[];for(let a=0;a<u.length;a+=1)l[a]=Oa(Da(r,u,a));const o=a=>R(l[a],1,1,()=>{l[a]=null});let s=r[6]&&Ia(r);return{c(){e=C("div");for(let a=0;a<l.length;a+=1)l[a].c();t=I(),s&&s.c(),n=T(),this.h()},l(a){e=v(a,"DIV",{class:!0});var c=O(e);for(let f=0;f<l.length;f+=1)l[f].l(c);c.forEach(_),t=F(a),s&&s.l(a),n=T(),this.h()},h(){b(e,"class","pt-12")},m(a,c){x(a,e,c);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(e,null);x(a,t,c),s&&s.m(a,c),x(a,n,c),i=!0},p(a,c){if(c&89){u=j(a[4]);let f;for(f=0;f<u.length;f+=1){const d=Da(a,u,f);l[f]?(l[f].p(d,c),D(l[f],1)):(l[f]=Oa(d),l[f].c(),D(l[f],1),l[f].m(e,null))}for(J(),f=u.length;f<l.length;f+=1)o(f);K()}a[6]?s?(s.p(a,c),c&64&&D(s,1)):(s=Ia(a),s.c(),D(s,1),s.m(n.parentNode,n)):s&&(J(),R(s,1,1,()=>{s=null}),K())},i(a){if(!i){for(let c=0;c<u.length;c+=1)D(l[c]);D(s),i=!0}},o(a){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)R(l[c]);R(s),i=!1},d(a){a&&(_(e),_(t),_(n)),se(l,a),s&&s.d(a)}}}function Ta(r){let e,t,n=r[10].title+"",i,u,l,o,s,a,c,f,d=r[6]&&Na(r);const h=[Ib,Ob,Nb,Tb,Db],p=[];function m(g,y){return g[10]?.params?.sectionType==="text"?0:g[10]?.params?.sectionType==="stalls"?1:g[10]?.params?.sectionType==="products"?2:g[10]?.params?.sectionType==="products_with_slider"?3:g[10]?.params?.sectionType==="stall_products"?4:-1}return~(o=m(r))&&(s=p[o]=h[o](r)),{c(){e=C("div"),t=C("h2"),i=ee(n),u=I(),d&&d.c(),l=I(),s&&s.c(),a=I(),c=C("div"),this.h()},l(g){e=v(g,"DIV",{class:!0});var y=O(e);t=v(y,"H2",{class:!0});var w=O(t);i=te(w,n),u=F(w),d&&d.l(w),w.forEach(_),l=F(y),s&&s.l(y),y.forEach(_),a=F(g),c=v(g,"DIV",{class:!0}),O(c).forEach(_),this.h()},h(){b(t,"class","text-2xl font-bold text-center mb-2 md:mb-5"),b(e,"class","relative overflow-x-hidden"),b(c,"class","divider w-[80%] mx-auto my-8 md:my-10")},m(g,y){x(g,e,y),M(e,t),M(t,i),M(t,u),d&&d.m(t,null),M(e,l),~o&&p[o].m(e,null),x(g,a,y),x(g,c,y),f=!0},p(g,y){(!f||y&16)&&n!==(n=g[10].title+"")&&Le(i,n),g[6]?d?(d.p(g,y),y&64&&D(d,1)):(d=Na(g),d.c(),D(d,1),d.m(t,null)):d&&(J(),R(d,1,1,()=>{d=null}),K());let w=o;o=m(g),o===w?~o&&p[o].p(g,y):(s&&(J(),R(p[w],1,1,()=>{p[w]=null}),K()),~o?(s=p[o],s?s.p(g,y):(s=p[o]=h[o](g),s.c()),D(s,1),s.m(e,null)):s=null)},i(g){f||(D(d),D(s),f=!0)},o(g){R(d),R(s),f=!1},d(g){g&&(_(e),_(a),_(c)),d&&d.d(),~o&&p[o].d()}}}function Na(r){let e,t,n,i,u,l;n=new qd({});function o(){return r[7](r[9])}return{c(){e=C("button"),t=C("span"),Z(n.$$.fragment),this.h()},l(s){e=v(s,"BUTTON",{class:!0});var a=O(e);t=v(a,"SPAN",{class:!0});var c=O(t);Q(n.$$.fragment,c),c.forEach(_),a.forEach(_),this.h()},h(){b(t,"class","w-6 h-6"),b(e,"class","btn btn-square ml-2")},m(s,a){x(s,e,a),M(e,t),Y(n,t,null),i=!0,u||(l=ct(e,"click",o),u=!0)},p(s,a){r=s},i(s){i||(D(n.$$.fragment,s),i=!0)},o(s){R(n.$$.fragment,s),i=!1},d(s){s&&_(e),X(n),u=!1,l()}}}function Db(r){let e;return{c(){e=ee("----- Stall Products")},l(t){e=te(t,"----- Stall Products")},m(t,n){x(t,e,n)},p:$,i:$,o:$,d(t){t&&_(e)}}}function Tb(r){let e,t;return e=new Bd({props:{pageId:r[0],sectionId:r[9],setupSection:r[3]}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},p(n,i){const u={};i&1&&(u.pageId=n[0]),i&16&&(u.sectionId=n[9]),i&8&&(u.setupSection=n[3]),e.$set(u)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Nb(r){let e,t;return e=new Ed({props:{pageId:r[0],sectionId:r[9]}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},p(n,i){const u={};i&1&&(u.pageId=n[0]),i&16&&(u.sectionId=n[9]),e.$set(u)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Ob(r){let e,t;return e=new hd({props:{pageId:r[0],sectionId:r[9]}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},p(n,i){const u={};i&1&&(u.pageId=n[0]),i&16&&(u.sectionId=n[9]),e.$set(u)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Ib(r){let e,t;return e=new Nd({props:{pageId:r[0],sectionId:r[9]}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},p(n,i){const u={};i&1&&(u.pageId=n[0]),i&16&&(u.sectionId=n[9]),e.$set(u)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Oa(r){let e,t,n=r[10]?.params?.sectionType&&(r[10]?.values||r[10].params.sectionType==="text")&&Ta(r);return{c(){n&&n.c(),e=T()},l(i){n&&n.l(i),e=T()},m(i,u){n&&n.m(i,u),x(i,e,u),t=!0},p(i,u){i[10]?.params?.sectionType&&(i[10]?.values||i[10].params.sectionType==="text")?n?(n.p(i,u),u&16&&D(n,1)):(n=Ta(i),n.c(),D(n,1),n.m(e.parentNode,e)):n&&(J(),R(n,1,1,()=>{n=null}),K())},i(i){t||(D(n),t=!0)},o(i){R(n),t=!1},d(i){i&&_(e),n&&n.d(i)}}}function Ia(r){let e,t,n;function i(l){r[8](l)}let u={};return r[3]!==void 0&&(u.setupSection=r[3]),e=new vb({props:u}),Dr.push(()=>Or(e,"setupSection",i)),{c(){Z(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,o){Y(e,l,o),n=!0},p(l,o){const s={};!t&&o&8&&(t=!0,s.setupSection=l[3],Tr(()=>t=!1)),e.$set(s)},i(l){n||(D(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){X(e,l)}}}function Fb(r){let e,t,n,i,u;const l=[Eb,Sb],o=[];function s(a,c){return c&36&&(e=null),e==null&&(e=!!(Object.keys(a[2]).length>0||a[5])),e?0:1}return t=s(r,-1),n=o[t]=l[t](r),{c(){n.c(),i=T()},l(a){n.l(a),i=T()},m(a,c){o[t].m(a,c),x(a,i,c),u=!0},p(a,[c]){let f=t;t=s(a,c),t===f?o[t].p(a,c):(J(),R(o[f],1,1,()=>{o[f]=null}),K(),n=o[t],n?n.p(a,c):(n=o[t]=l[t](a),n.c()),D(n,1),n.m(i.parentNode,i))},i(a){u||(D(n),u=!0)},o(a){R(n),u=!1},d(a){a&&_(i),o[t].d(a)}}}const Rb=20;function zb(r,e,t){let n,i;we(r,Fr,d=>t(2,n=d)),we(r,Ir,d=>t(6,i=d));let{pageId:u}=e,l,o=null,s,a=!1;qn(async()=>{await new Promise(d=>setTimeout(d,2e3)),t(5,a=!0)});const c=d=>l(u,d,null,!0);function f(d){l=d,t(3,l)}return r.$$set=d=>{"pageId"in d&&t(0,u=d.pageId)},r.$$.update=()=>{r.$$.dirty&7&&Object.keys(n).length>0&&(t(1,o=qa(u,n)),o?.sections&&t(4,s=Object.entries(o.sections).sort((d,h)=>d[1].order-h[1].order)))},[u,o,n,l,s,a,i,c,f]}class Pb extends Ee{constructor(e){super(),Ae(this,e,zb,Fb,me,{pageId:0})}}function Bb(r){let e,t,n,i,u;return t=new cd({props:{title:"Plebeian Market",description:"Plebeian Market is a distributed self sovereign P2P market place.",openGraph:{site_name:"Plebeian Market",type:"website",url:r[0].url.href,title:"Plebeian Market",description:"Plebeian Market is a distributed self sovereign P2P market place.",images:[{url:Jr()+"images/Plebeian_Logo_OpenGraph.png",alt:"Plebeian Market logo"}]},twitter:{site:"@PlebeianMarket",handle:"@PlebeianMarket",cardType:"summary_large_image",image:Jr()+"images/Plebeian_Logo_OpenGraph.png",imageAlt:"Plebeian Market logo"}}}),i=new Pb({props:{pageId:0}}),{c(){e=I(),Z(t.$$.fragment),n=I(),Z(i.$$.fragment),this.h()},l(l){Fa("svelte-113fann",document.head).forEach(_),e=F(l),Q(t.$$.fragment,l),n=F(l),Q(i.$$.fragment,l),this.h()},h(){document.title="Plebeian Market"},m(l,o){x(l,e,o),Y(t,l,o),x(l,n,o),Y(i,l,o),u=!0},p(l,[o]){const s={};o&1&&(s.openGraph={site_name:"Plebeian Market",type:"website",url:l[0].url.href,title:"Plebeian Market",description:"Plebeian Market is a distributed self sovereign P2P market place.",images:[{url:Jr()+"images/Plebeian_Logo_OpenGraph.png",alt:"Plebeian Market logo"}]}),t.$set(s)},i(l){u||(D(t.$$.fragment,l),D(i.$$.fragment,l),u=!0)},o(l){R(t.$$.fragment,l),R(i.$$.fragment,l),u=!1},d(l){l&&(_(e),_(n)),X(t,l),X(i,l)}}}function Lb(r,e,t){let n;return we(r,Zf,i=>t(0,n=i)),[n]}class n3 extends Ee{constructor(e){super(),Ae(this,e,Lb,Bb,me,{})}}export{n3 as component};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["../chunks/tw-elements.es.min.hbzFXnQ4.js","../chunks/preload-helper.0HuHagjb.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}