import{s as be,e as he,i as x,d as f,y as ue,f as m,a as M,g as b,h as S,F as q,c as R,j as h,z as p,G as j,r as D,J as ce,l as ee,m as te,n as _e,P as Ce,Q as Ee,a0 as Ae,a1 as De,K as Z,o as Se,S as Ve,A as Ge,R as xe,U as Be,x as qe,M as Ie}from"../chunks/scheduler.2vmdsppc.js";import{S as ge,i as ve,g as fe,t as W,c as de,a as X,b as ne,d as ie,m as re,e as oe}from"../chunks/index.eLAHt3dB.js";import{b as Oe,j as ze,N as Ke,A as Ne,z as me,X as ye,I as se,a8 as je,q as We,M as Xe,E as ke,e as Pe}from"../chunks/utils.FkBaGfnY.js";import{p as Ye}from"../chunks/stores._GSMfgpH.js";import{P as Fe}from"../chunks/PrivateKeyInfo.crg3tdN3.js";import{n as Le}from"../chunks/VerificationMark.95_-Gkx8.js";import{T as Qe}from"../chunks/Title-h1.ksZwEtxJ.js";import{S as Je}from"../chunks/ShowExternalIdentities.fuldahui.js";function Ze(r){let e,t,l="You still have to login to Plebeian Market.",s,n,u="Login",c,i;return{c(){e=m("div"),t=m("p"),t.textContent=l,s=M(),n=m("button"),n.textContent=u,this.h()},l(o){e=b(o,"DIV",{class:!0});var a=S(e);t=b(a,"P",{"data-svelte-h":!0}),q(t)!=="svelte-2avk2c"&&(t.textContent=l),s=R(a),n=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),q(n)!=="svelte-oqeu8l"&&(n.textContent=u),a.forEach(f),this.h()},h(){h(n,"class","btn btn-info mt-4"),h(e,"class","w-full items-center justify-center text-center")},m(o,a){x(o,e,a),p(e,t),p(e,s),p(e,n),c||(i=[j(n,"click",r[5]),j(n,"keypress",r[6])],c=!0)},p:D,i:D,o:D,d(o){o&&f(e),c=!1,ce(i)}}}function et(r){let e,t,l,s;const n=[lt,tt],u=[];function c(i,o){return i[1]==="extension"?0:i[2]?1:-1}return~(e=c(r))&&(t=u[e]=n[e](r)),{c(){t&&t.c(),l=he()},l(i){t&&t.l(i),l=he()},m(i,o){~e&&u[e].m(i,o),x(i,l,o),s=!0},p(i,o){let a=e;e=c(i),e===a?~e&&u[e].p(i,o):(t&&(fe(),W(u[a],1,1,()=>{u[a]=null}),de()),~e?(t=u[e],t?t.p(i,o):(t=u[e]=n[e](i),t.c()),X(t,1),t.m(l.parentNode,l)):t=null)},i(i){s||(X(t),s=!0)},o(i){W(t),s=!1},d(i){i&&f(l),~e&&u[e].d(i)}}}function tt(r){let e,t;return e=new Fe({}),{c(){ne(e.$$.fragment)},l(l){ie(e.$$.fragment,l)},m(l,s){re(e,l,s),t=!0},p:D,i(l){t||(X(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function lt(r){let e,t="You&#39;re using your <b>Nostr browser extension</b>.",l,s,n="This is the <b>recommended</b> and <b>most secure</b> way to use Plebeian Market.",u,c,i="This is the public key we're getting from the browser extension:",o,a,P,O,C,I,E,A,d,y=Le.npubEncode(r[0])+"",$,U,k,G="Logout",N,Y;return{c(){e=m("p"),e.innerHTML=t,l=M(),s=m("p"),s.innerHTML=n,u=M(),c=m("p"),c.textContent=i,o=M(),a=m("p"),P=ee("Hex form:"),O=m("br"),C=ee(r[0]),I=M(),E=m("p"),A=ee("Npub:"),d=m("br"),$=ee(y),U=M(),k=m("button"),k.textContent=G,this.h()},l(_){e=b(_,"P",{"data-svelte-h":!0}),q(e)!=="svelte-ksogno"&&(e.innerHTML=t),l=R(_),s=b(_,"P",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-6c3htn"&&(s.innerHTML=n),u=R(_),c=b(_,"P",{class:!0,"data-svelte-h":!0}),q(c)!=="svelte-r2z72c"&&(c.textContent=i),o=R(_),a=b(_,"P",{class:!0});var v=S(a);P=te(v,"Hex form:"),O=b(v,"BR",{}),C=te(v,r[0]),v.forEach(f),I=R(_),E=b(_,"P",{class:!0});var g=S(E);A=te(g,"Npub:"),d=b(g,"BR",{}),$=te(g,y),g.forEach(f),U=R(_),k=b(_,"BUTTON",{class:!0,"data-svelte-h":!0}),q(k)!=="svelte-1g57sh4"&&(k.textContent=G),this.h()},h(){h(s,"class","mt-4"),h(c,"class","mt-4"),h(a,"class","mt-4 mb-4"),h(E,"class","mt-4 mb-4"),h(k,"class","btn btn-info mt-4")},m(_,v){x(_,e,v),x(_,l,v),x(_,s,v),x(_,u,v),x(_,c,v),x(_,o,v),x(_,a,v),p(a,P),p(a,O),p(a,C),x(_,I,v),x(_,E,v),p(E,A),p(E,d),p(E,$),x(_,U,v),x(_,k,v),N||(Y=[j(k,"click",r[3]),j(k,"keypress",r[4])],N=!0)},p(_,v){v&1&&_e(C,_[0]),v&1&&y!==(y=Le.npubEncode(_[0])+"")&&_e($,y)},i:D,o:D,d(_){_&&(f(e),f(l),f(s),f(u),f(c),f(o),f(a),f(I),f(E),f(U),f(k)),N=!1,ce(Y)}}}function st(r){let e,t,l,s;const n=[et,Ze],u=[];function c(i,o){return i[0]?0:1}return e=c(r),t=u[e]=n[e](r),{c(){t.c(),l=he()},l(i){t.l(i),l=he()},m(i,o){u[e].m(i,o),x(i,l,o),s=!0},p(i,[o]){let a=e;e=c(i),e===a?u[e].p(i,o):(fe(),W(u[a],1,1,()=>{u[a]=null}),de(),t=u[e],t?t.p(i,o):(t=u[e]=n[e](i),t.c()),X(t,1),t.m(l.parentNode,l))},i(i){s||(X(t),s=!0)},o(i){W(t),s=!1},d(i){i&&f(l),u[e].d(i)}}}function nt(r,e,t){let l,s,n;return ue(r,Oe,a=>t(0,l=a)),ue(r,ze,a=>t(1,s=a)),ue(r,Ke,a=>t(2,n=a)),[l,s,n,()=>Ne(),()=>Ne(),()=>me(),()=>me()]}class it extends ge{constructor(e){super(),ve(this,e,nt,st,be,{})}}function rt(r){let e,t;return{c(){e=Ce("svg"),t=Ce("path"),this.h()},l(l){e=Ee(l,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var s=S(e);t=Ee(s,"path",{d:!0}),S(t).forEach(f),s.forEach(f),this.h()},h(){h(t,"d","M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"fill","currentColor"),h(e,"class","bi bi-question"),h(e,"viewBox","0 0 16 16")},m(l,s){x(l,e,s),p(e,t)},p:D,i:D,o:D,d(l){l&&f(e)}}}class ot extends ge{constructor(e){super(),ve(this,e,null,rt,be,{})}}function at(r){let e,t,l="You still have to login to Plebeian Market.",s,n,u="Login",c,i;return{c(){e=m("div"),t=m("p"),t.textContent=l,s=M(),n=m("button"),n.textContent=u,this.h()},l(o){e=b(o,"DIV",{class:!0});var a=S(e);t=b(a,"P",{"data-svelte-h":!0}),q(t)!=="svelte-2avk2c"&&(t.textContent=l),s=R(a),n=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),q(n)!=="svelte-oqeu8l"&&(n.textContent=u),a.forEach(f),this.h()},h(){h(n,"class","btn btn-info mt-4"),h(e,"class","w-full items-center justify-center text-center")},m(o,a){x(o,e,a),p(e,t),p(e,s),p(e,n),c||(i=[j(n,"click",r[15]),j(n,"keypress",r[16])],c=!0)},p:D,i:D,o:D,d(o){o&&f(e),c=!1,ce(i)}}}function ut(r){let e,t="Adding a new external identity",l,s,n,u,c,i="Twitter / X",o,a="GitHub",P,O="Telegram",C,I,E,A,d,y,$,U,k="Add",G,N,Y,_="External identities:",v,g,H,L,w,B,F;E=new ot({});let V=r[1]==="telegram"&&$e(r);const ae=[ft,ct],Q=[];function we(T,K){return T[5].length===0?0:1}g=we(r),H=Q[g]=ae[g](r);let z=r[0]&&Ue(r);return{c(){e=m("h1"),e.textContent=t,l=M(),s=m("div"),n=m("div"),u=m("select"),c=m("option"),c.textContent=i,o=m("option"),o.textContent=a,P=m("option"),P.textContent=O,C=M(),I=m("button"),ne(E.$$.fragment),A=M(),V&&V.c(),d=M(),y=m("input"),$=M(),U=m("button"),U.textContent=k,G=M(),N=m("div"),Y=m("h2"),Y.textContent=_,v=M(),H.c(),L=M(),z&&z.c(),this.h()},l(T){e=b(T,"H1",{"data-svelte-h":!0}),q(e)!=="svelte-u6kmp7"&&(e.textContent=t),l=R(T),s=b(T,"DIV",{class:!0});var K=S(s);n=b(K,"DIV",{class:!0});var J=S(n);u=b(J,"SELECT",{class:!0});var pe=S(u);c=b(pe,"OPTION",{"data-svelte-h":!0}),q(c)!=="svelte-qlw77f"&&(c.textContent=i),o=b(pe,"OPTION",{"data-svelte-h":!0}),q(o)!=="svelte-qlpbhy"&&(o.textContent=a),P=b(pe,"OPTION",{"data-svelte-h":!0}),q(P)!=="svelte-dpzxue"&&(P.textContent=O),pe.forEach(f),C=R(J),I=b(J,"BUTTON",{class:!0,"data-tip":!0});var Te=S(I);ie(E.$$.fragment,Te),Te.forEach(f),A=R(J),V&&V.l(J),d=R(J),y=b(J,"INPUT",{class:!0,type:!0,placeholder:!0}),$=R(J),U=b(J,"BUTTON",{class:!0,"data-svelte-h":!0}),q(U)!=="svelte-1icxhbj"&&(U.textContent=k),J.forEach(f),K.forEach(f),G=R(T),N=b(T,"DIV",{class:!0});var le=S(N);Y=b(le,"H2",{"data-svelte-h":!0}),q(Y)!=="svelte-v3muzx"&&(Y.textContent=_),v=R(le),H.l(le),L=R(le),z&&z.l(le),le.forEach(f),this.h()},h(){c.__value="twitter",Z(c,c.__value),o.__value="github",Z(o,o.__value),P.__value="telegram",Z(P,P.__value),h(u,"class","select-bordered select-info max-w-xs border rounded py-2 px-3"),r[1]===void 0&&Ge(()=>r[11].call(u)),h(I,"class","btn btn-square btn-outline btn-info tooltip"),h(I,"data-tip","Click to learn how to do it"),h(y,"class","w-2/3 input-info border rounded py-2 px-3"),h(y,"type","text"),h(y,"placeholder","URL"),h(U,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"),h(n,"class","flex space-x-2 mt-4"),h(s,"class","mt-4"),h(N,"class","mt-16")},m(T,K){x(T,e,K),x(T,l,K),x(T,s,K),p(s,n),p(n,u),p(u,c),p(u,o),p(u,P),xe(u,r[1],!0),p(n,C),p(n,I),re(E,I,null),p(n,A),V&&V.m(n,null),p(n,d),p(n,y),Z(y,r[2]),p(n,$),p(n,U),x(T,G,K),x(T,N,K),p(N,Y),p(N,v),Q[g].m(N,null),p(N,L),z&&z.m(N,null),w=!0,B||(F=[j(u,"change",r[11]),j(I,"click",r[12]),j(y,"input",r[14]),j(U,"click",r[8])],B=!0)},p(T,K){K&2&&xe(u,T[1]),T[1]==="telegram"?V?V.p(T,K):(V=$e(T),V.c(),V.m(n,d)):V&&(V.d(1),V=null),K&4&&y.value!==T[2]&&Z(y,T[2]);let J=g;g=we(T),g===J?Q[g].p(T,K):(fe(),W(Q[J],1,1,()=>{Q[J]=null}),de(),H=Q[g],H?H.p(T,K):(H=Q[g]=ae[g](T),H.c()),X(H,1),H.m(N,L)),T[0]?z?z.p(T,K):(z=Ue(T),z.c(),z.m(N,null)):z&&(z.d(1),z=null)},i(T){w||(X(E.$$.fragment,T),X(H),w=!0)},o(T){W(E.$$.fragment,T),W(H),w=!1},d(T){T&&(f(e),f(l),f(s),f(G),f(N)),oe(E),V&&V.d(),Q[g].d(),z&&z.d(),B=!1,ce(F)}}}function $e(r){let e,t,l;return{c(){e=m("input"),this.h()},l(s){e=b(s,"INPUT",{class:!0,type:!0,placeholder:!0}),this.h()},h(){h(e,"class","input-info border rounded py-2 px-3"),h(e,"type","text"),h(e,"placeholder","Telegram user")},m(s,n){x(s,e,n),Z(e,r[3]),t||(l=j(e,"input",r[13]),t=!0)},p(s,n){n&8&&e.value!==s[3]&&Z(e,s[3])},d(s){s&&f(e),t=!1,l()}}}function ct(r){let e,t;return e=new Je({props:{profileFinishedLoading:r[6],externalIdentities:r[5],nostrPublicKey:r[7],deleteIdentity:r[9]}}),{c(){ne(e.$$.fragment)},l(l){ie(e.$$.fragment,l)},m(l,s){re(e,l,s),t=!0},p(l,s){const n={};s&64&&(n.profileFinishedLoading=l[6]),s&32&&(n.externalIdentities=l[5]),s&128&&(n.nostrPublicKey=l[7]),e.$set(n)},i(l){t||(X(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function ft(r){let e,t="Your Nostr profile doesn't have any external identity yet. Add one using the form above.";return{c(){e=m("p"),e.textContent=t,this.h()},l(l){e=b(l,"P",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-1otgovz"&&(e.textContent=t),this.h()},h(){h(e,"class","mt-2")},m(l,s){x(l,e,s)},p:D,i:D,o:D,d(l){l&&f(e)}}}function Ue(r){let e,t,l=r[5].length===0?"Save":"Verify and Save",s,n,u;return{c(){e=m("div"),t=m("button"),s=ee(l),this.h()},l(c){e=b(c,"DIV",{class:!0});var i=S(e);t=b(i,"BUTTON",{class:!0});var o=S(t);s=te(o,l),o.forEach(f),i.forEach(f),this.h()},h(){h(t,"class","mt-4 py-2 px-4 bg-blue-500 hover:bg-blue-700 text-white font-bold rounded"),h(e,"class","mt-6")},m(c,i){x(c,e,i),p(e,t),p(t,s),n||(u=j(t,"click",r[10]),n=!0)},p(c,i){i&32&&l!==(l=c[5].length===0?"Save":"Verify and Save")&&_e(s,l)},d(c){c&&f(e),n=!1,u()}}}function He(r){let e,t,l;return{c(){e=m("input"),this.h()},l(s){e=b(s,"INPUT",{class:!0,type:!0,placeholder:!0}),this.h()},h(){h(e,"class","input-info border rounded py-2 px-3"),h(e,"type","text"),h(e,"placeholder","Telegram user")},m(s,n){x(s,e,n),Z(e,r[3]),t||(l=j(e,"input",r[17]),t=!0)},p(s,n){n&8&&e.value!==s[3]&&Z(e,s[3])},d(s){s&&f(e),t=!1,l()}}}function dt(r){let e,t,l,s,n,u,c=r[4][r[1]].title+"",i,o,a,P,O=r[4][r[1]].description+"",C,I,E,A,d,y,$="Add",U,k,G='<form method="dialog"><button class="btn">Close</button></form>',N,Y,_;const v=[ut,at],g=[];function H(w,B){return w[7]?0:1}e=H(r),t=g[e]=v[e](r);let L=r[1]==="telegram"&&He(r);return{c(){t.c(),l=M(),s=m("dialog"),n=m("div"),u=m("h3"),i=ee(c),o=M(),a=m("p"),P=new Ae(!1),C=M(),I=m("p"),L&&L.c(),E=M(),A=m("input"),d=M(),y=m("button"),y.textContent=$,U=M(),k=m("div"),k.innerHTML=G,this.h()},l(w){t.l(w),l=R(w),s=b(w,"DIALOG",{id:!0,class:!0});var B=S(s);n=b(B,"DIV",{class:!0});var F=S(n);u=b(F,"H3",{class:!0});var V=S(u);i=te(V,c),V.forEach(f),o=R(F),a=b(F,"P",{class:!0});var ae=S(a);P=De(ae,!1),ae.forEach(f),C=R(F),I=b(F,"P",{class:!0});var Q=S(I);L&&L.l(Q),E=R(Q),A=b(Q,"INPUT",{class:!0,type:!0,placeholder:!0}),d=R(Q),y=b(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),q(y)!=="svelte-1icxhbj"&&(y.textContent=$),Q.forEach(f),U=R(F),k=b(F,"DIV",{class:!0,"data-svelte-h":!0}),q(k)!=="svelte-mvxxac"&&(k.innerHTML=G),F.forEach(f),B.forEach(f),this.h()},h(){h(u,"class","font-bold text-lg"),P.a=null,h(a,"class","py-4"),h(A,"class","input-info border rounded py-2 px-3"),h(A,"type","text"),h(A,"placeholder","URL"),h(y,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"),h(I,"class","py-4"),h(k,"class","modal-action"),h(n,"class","modal-box w-11/12 max-w-5xl"),h(s,"id","verifyHelp"),h(s,"class","modal")},m(w,B){g[e].m(w,B),x(w,l,B),x(w,s,B),p(s,n),p(n,u),p(u,i),p(n,o),p(n,a),P.m(O,a),p(n,C),p(n,I),L&&L.m(I,null),p(I,E),p(I,A),Z(A,r[2]),p(I,d),p(I,y),p(n,U),p(n,k),N=!0,Y||(_=[j(A,"input",r[18]),j(y,"click",r[8])],Y=!0)},p(w,[B]){let F=e;e=H(w),e===F?g[e].p(w,B):(fe(),W(g[F],1,1,()=>{g[F]=null}),de(),t=g[e],t?t.p(w,B):(t=g[e]=v[e](w),t.c()),X(t,1),t.m(l.parentNode,l)),(!N||B&18)&&c!==(c=w[4][w[1]].title+"")&&_e(i,c),(!N||B&18)&&O!==(O=w[4][w[1]].description+"")&&P.p(O),w[1]==="telegram"?L?L.p(w,B):(L=He(w),L.c(),L.m(I,E)):L&&(L.d(1),L=null),B&4&&A.value!==w[2]&&Z(A,w[2])},i(w){N||(X(t),N=!0)},o(w){W(t),N=!1},d(w){w&&(f(l),f(s)),g[e].d(w),L&&L.d(),Y=!1,ce(_)}}}function pt(r,e,t){let l,s,n,u;ue(r,Oe,_=>t(7,u=_));let c=!1,i="twitter",o="",a="",P={twitter:{verified:"waiting",recently_added:!1},github:{verified:"waiting",recently_added:!1},telegram:{verified:"waiting",recently_added:!1}},O=[];O.twitter={title:"How to verify your Twitter / X account",description:'<ol class="list-decimal list-inside mt-4"><li class="mb-2"><b>Create a Tweet</b> containing your npub <b><a class="underline" target="_blank"href="https://twitter.com/intent/tweet?text=Verifying%20that%20I%20control%20the%20following%20Nostr%20public%20key:%20'+ye(u)+`">(click here)</a></b>.</li><li class="mb-2">Once published, <b>open the published Tweet</b>.</li><li class="mb-2"><b>Copy the URL</b> and paste it in this screen.</li><li class="mb-2"><b>Click Add</b> to add the new identity to your Nostr profile and verify it.</ol><p class="mt-6 mb-1 font-bold">Example of the URL you'll get:</p><p class="mt-1">https://twitter.com/halfin/status/1110302988</p>`},O.github={title:"How to verify your GitHub account",description:'<ol class="list-decimal list-inside mt-4"><li class="mb-2"><b>Login</b> to your GitHub account</li><li class="mb-2"><b>Copy your npub</b> here: <span class="text-xs">'+ye(u)+`</span></li><li class="mb-2">Go to the gists page <b><a class="underline" target="_blank"' +
href="https://gist.github.com/">(click here)</a></b>.<li class="mb-2"><b>Paste the npub</b> into the textare in the middle.</li><li class="mb-2">Click the arrow on the right side of the green button and select <b>Create public gist</b>, then click the Create public gist green button.<li class="mb-2"><b>Copy the URL</b> and paste it in this screen.</li><li class="mb-2"><b>Click Add</b> to add the new identity to your Nostr profile and verify it.</ol><p class="mt-6 mb-1 font-bold">Example of the URL you'll get:</p><p class="mt-1">https://gist.github.com/your_username/a3158dcaf61a1c49485zf1c2719469af</p>`},O.telegram={title:"How to verify your Telegram account",description:`<p class="mt-4">To verify your Telegram account, you need to be able to write a message to a <i>public</i> Telegram room. We suggest using the <b><a class="underline" target="_blank" href="https://web.telegram.org/k/#@PlebeianMarket">Plebeian Market</a></b> channel.</p><ol class="mt-6 list-decimal list-inside"><li class="mb-2">Introduce the <b>Telegram username</b> into the first field. If you don't know it, you can find it by opening the Telegram app/web, clicking on the hamburguer menu, and then clicking on Settings. The username is the token preceded by a @.</li><li class="mb-2"><b>Copy your npub</b> here: <span class="text-xs">`+ye(u)+`</span></li><li class="mb-2">Open the <b>Telegram room</b> of your choice and <b>paste the npub</b> there.</li><li class="mb-2">Right click (or tap-and-hold) over your message and select "Link to message".</li><li class="mb-2"><b>Paste</b> the URL in this screen.</li><li class="mb-2"><b>Click Add</b> to add the new identity to your Nostr profile and verify it.</ol><p class="mt-6 mb-1 font-bold">Example of the URL you'll get:</p><p class="mt-1">https://t.me/nostr_protocol/118763</p>`};function C(){if(!i||!o){se.set("You must enter the URL before adding");return}if(!o.toLowerCase().startsWith("https")){se.set("URL must start with https");return}let _=!1;if(n.forEach(H=>{if(H.includes(i)){_=!0;return}}),_){se.set(i.charAt(0).toUpperCase()+i.slice(1)+" identity already exists. Delete it first if you want to change it.");return}let v="";const g=o.split("/");if(i==="twitter"){if(g.length!==6||o.endsWith("/")){ke.set("The Twitter/X URL that you provided for your verification message is not standard. It should have the form of this one: https://twitter.com/halfin/status/1110302988");return}const H=g[3],L=g[5];v=i+":"+H+":"+L}else if(i==="github"){if(g.length!==5||o.endsWith("/")){ke.set("The GitHub URL that you provided for your verification message is not standard. It should have the form of this one: https://gist.github.com/your_username/a3158dcaf61a1c49485zf1c2719469af");return}const H=g[3],L=g[4];v=i+":"+H+":"+L}else if(i==="telegram"){if(!a){se.set("You must enter the Telegram username before adding");return}if(g.length!==5||o.endsWith("/")){ke.set("The Telegram URL that you provided for your verification message is not standard. It should have the form of this one: https://t.me/nostr_protocol/118763");return}a.startsWith("@")&&t(3,a=a.substring(1));const L=g[3]+"/"+g[4];v=i+":"+a+":"+L}P[i].recently_added=!0,n.push(v),t(5,n),window.verifyHelp.close(),t(2,o=""),t(3,a=""),t(0,c=!0)}function I(_){t(5,n=n.filter(function(v){const g=v===_;return g&&t(0,c=!0),!g}))}async function E(){if(c||se.set("No changes made, so there is nothing to save"),!l.finishedLoading){se.set("There was a problem loading your profile, so no changes are allowed. Reload the page and try again.");return}let _=[];l&&l.tags&&(_=l.tags.filter(function(v,g,H){return v[0]!=="i"})),n.forEach(v=>{_.push(["i",v.split(":")[0]+":"+v.split(":")[1],v.split(":")[2]])}),l||(l={}),await je(l,_,()=>{console.log("Metadata saved at Nostr relays")})}function A(){u&&We([u],(_,v)=>{(l===null||l.created_at<v.created_at)&&(l=v,t(5,n=[]),Xe(l.tags,"i").forEach(g=>{const H=g[1]+":"+g[2];n.includes(H)||(n.push(H),t(5,n))}))},async()=>{l&&(l.finishedLoading=!0)})}Se(async()=>{A()});function d(){i=Ve(this),t(1,i)}const y=()=>{window.verifyHelp.showModal()};function $(){a=this.value,t(3,a)}function U(){o=this.value,t(2,o)}const k=()=>me(),G=()=>me();function N(){a=this.value,t(3,a)}function Y(){o=this.value,t(2,o)}return l=null,t(6,s=!1),t(5,n=[]),[c,i,o,a,O,n,s,u,C,I,E,d,y,$,U,k,G,N,Y]}class ht extends ge{constructor(e){super(),ve(this,e,pt,dt,be,{})}}function Me(r,e,t){const l=r.slice();return l[5]=e[t],l}function _t(r){let e;return{c(){e=ee("Settings")},l(t){e=te(t,"Settings")},m(t,l){x(t,e,l)},d(t){t&&f(e)}}}function Re(r){let e,t,l=r[5].title+"",s,n,u;function c(){return r[2](r[5])}return{c(){e=m("li"),t=m("a"),s=ee(l),this.h()},l(i){e=b(i,"LI",{});var o=S(e);t=b(o,"A",{href:!0});var a=S(t);s=te(a,l),a.forEach(f),o.forEach(f),this.h()},h(){h(t,"href",null),Ie(t,"active",r[5].key===r[0])},m(i,o){x(i,e,o),p(e,t),p(t,s),n||(u=j(t,"click",c),n=!0)},p(i,o){r=i,o&3&&Ie(t,"active",r[5].key===r[0])},d(i){i&&f(e),n=!1,u()}}}function mt(r){return{c:D,l:D,m:D,i:D,o:D,d:D}}function bt(r){let e,t;return e=new ht({}),{c(){ne(e.$$.fragment)},l(l){ie(e.$$.fragment,l)},m(l,s){re(e,l,s),t=!0},i(l){t||(X(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function gt(r){let e,t;return e=new it({}),{c(){ne(e.$$.fragment)},l(l){ie(e.$$.fragment,l)},m(l,s){re(e,l,s),t=!0},i(l){t||(X(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function vt(r){let e,t,l,s,n,u,c,i,o,a,P;t=new Qe({props:{$$slots:{default:[_t]},$$scope:{ctx:r}}});let O=Pe(r[1]),C=[];for(let d=0;d<O.length;d+=1)C[d]=Re(Me(r,O,d));const I=[gt,bt,mt],E=[];function A(d,y){return d[0]==="NOSTR_PAGE"?0:d[0]==="EXTERNAL_IDENTITIES"?1:d[0]==="SETUP_HOMEPAGE"?2:-1}return~(o=A(r))&&(a=E[o]=I[o](r)),{c(){e=M(),ne(t.$$.fragment),l=M(),s=m("div"),n=m("div"),u=m("ul");for(let d=0;d<C.length;d+=1)C[d].c();c=M(),i=m("div"),a&&a.c(),this.h()},l(d){Be("svelte-9moufe",document.head).forEach(f),e=R(d),ie(t.$$.fragment,d),l=R(d),s=b(d,"DIV",{class:!0});var $=S(s);n=b($,"DIV",{class:!0});var U=S(n);u=b(U,"UL",{class:!0});var k=S(u);for(let N=0;N<C.length;N+=1)C[N].l(k);k.forEach(f),U.forEach(f),c=R($),i=b($,"DIV",{class:!0});var G=S(i);a&&a.l(G),G.forEach(f),$.forEach(f),this.h()},h(){document.title="Settings",h(u,"class","md:w-52 mt-3 p-2 menu menu-compact bg-base-300 rounded-box"),h(n,"class","md:grow-0 pb-10"),h(i,"class","lg:col-span-3 w-full items-center justify-center"),h(s,"class","lg:grid lg:grid-cols-4 2xl:w-3/4 w-full p-0 md:p-4 pb-8 mx-auto")},m(d,y){x(d,e,y),re(t,d,y),x(d,l,y),x(d,s,y),p(s,n),p(n,u);for(let $=0;$<C.length;$+=1)C[$]&&C[$].m(u,null);p(s,c),p(s,i),~o&&E[o].m(i,null),P=!0},p(d,[y]){const $={};if(y&256&&($.$$scope={dirty:y,ctx:d}),t.$set($),y&3){O=Pe(d[1]);let k;for(k=0;k<O.length;k+=1){const G=Me(d,O,k);C[k]?C[k].p(G,y):(C[k]=Re(G),C[k].c(),C[k].m(u,null))}for(;k<C.length;k+=1)C[k].d(1);C.length=O.length}let U=o;o=A(d),o!==U&&(a&&(fe(),W(E[U],1,1,()=>{E[U]=null}),de()),~o?(a=E[o],a||(a=E[o]=I[o](d),a.c()),X(a,1),a.m(i,null)):a=null)},i(d){P||(X(t.$$.fragment,d),X(a),P=!0)},o(d){W(t.$$.fragment,d),W(a),P=!1},d(d){d&&(f(e),f(l),f(s)),oe(t,d),qe(C,d),~o&&E[o].d()}}}function yt(r,e,t){let l;ue(r,Ye,i=>t(4,l=i));const s=[{key:"NOSTR_PAGE",title:"Nostr"},{key:"EXTERNAL_IDENTITIES",title:"External identities"},{key:"SETUP_HOMEPAGE",title:"Setup homepage"}];let n="NOSTR_PAGE",u={};return Se(async()=>{let i=l.url.href.split("#");if(i.length===2)for(let o of i[1].split("&")){let[a,P]=o.split("=");u[a]=P}u.page&&t(0,n=u.page)}),[n,s,i=>t(0,n=i.key)]}class Pt extends ge{constructor(e){super(),ve(this,e,yt,vt,be,{})}}export{Pt as component};
