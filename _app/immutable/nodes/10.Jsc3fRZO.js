import{s as Fe,a as M,f as w,U as Ke,d as a,c as U,g as C,h as L,F as z,j as y,i as g,z as b,G as ee,I as me,J as ze,y as de,T as Ge,o as Qe,l as S,m as A,p as Re,Y as Ze,r as $,M as pe,x as _e,P as be,Q as ke,n as R,e as Q}from"../chunks/scheduler.2vmdsppc.js";import{S as Xe,i as $e,b as oe,d as ae,m as fe,t as J,c as le,a as H,e as ce,o as xe,g as se}from"../chunks/index.eLAHt3dB.js";import{y as et,P as tt,b as lt,_ as ve,I as st,$ as nt,e as ne,p as it,H as rt,a0 as ot,Z as ge}from"../chunks/utils.FkBaGfnY.js";import{r as at,b as ft}from"../chunks/shopping.HYDPEdxb.js";import{T as ct}from"../chunks/Title-h1.ksZwEtxJ.js";import{P as ut,B as _t}from"../chunks/PaymentWidget.crMBCL88.js";import{C as dt}from"../chunks/Clock.o45-HYqg.js";import{E as mt}from"../chunks/Email.iMOOqnwW.js";function ye(r,e,l){const t=r.slice();return t[27]=e[l][0],t[28]=e[l][1],t}function Pe(r,e,l){const t=r.slice();return t[31]=e[l],t}function we(r,e,l){const t=r.slice();return t[34]=e[l],t}function Ce(r,e,l){const t=r.slice();return t[37]=e[l][0],t[28]=e[l][1],t}function ht(r){let e;return{c(){e=S("Orders")},l(l){e=A(l,"Orders")},m(l,t){g(l,e,t)},d(l){l&&a(e)}}}function pt(r){let e,l='<p>You don&#39;t have any order yet.</p> <p class="mt-4">You can <a class="text-blue-500" href="/stalls">browse stalls</a> and buy some products.</p>';return{c(){e=w("div"),e.innerHTML=l,this.h()},l(t){e=C(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-103ftmq"&&(e.innerHTML=l),this.h()},h(){y(e,"class","grid justify-center items-center lg:mx-20 place-content-center p-6 text-lg")},m(t,s){g(t,e,s)},p:$,i:$,o:$,d(t){t&&a(e)}}}function bt(r){let e,l=Object.entries(r[0]).length>0,t,s,n,i,o,d,f,m='<tr class="text-center"><th class="text-left">Order</th> <th>Last update</th> <th>Status</th></tr>',h,E,N,B,j,D=l&&Ee(r),k=ne(r[5]),c=[];for(let u=0;u<k.length;u+=1)c[u]=Ye(ye(r,k,u));const _=u=>J(c[u],1,1,()=>{c[u]=null});return{c(){e=w("div"),D&&D.c(),t=M(),s=w("div"),n=S(`Hide old orders (> 3 months)
            `),i=w("input"),o=M(),d=w("table"),f=w("thead"),f.innerHTML=m,h=M(),E=w("tbody");for(let u=0;u<c.length;u+=1)c[u].c();this.h()},l(u){e=C(u,"DIV",{class:!0});var v=L(e);D&&D.l(v),t=U(v),s=C(v,"DIV",{class:!0});var p=L(s);n=A(p,`Hide old orders (> 3 months)
            `),i=C(p,"INPUT",{type:!0,class:!0}),p.forEach(a),o=U(v),d=C(v,"TABLE",{class:!0});var I=L(d);f=C(I,"THEAD",{"data-svelte-h":!0}),z(f)!=="svelte-1iveqsr"&&(f.innerHTML=m),h=U(I),E=C(I,"TBODY",{});var q=L(E);for(let Y=0;Y<c.length;Y+=1)c[Y].l(q);q.forEach(a),I.forEach(a),v.forEach(a),this.h()},h(){y(i,"type","checkbox"),y(i,"class","checkbox checkbox-md mr-3"),pe(i,"checkbox-success",r[6]),y(s,"class","text-right md:mb-3"),y(d,"class","block w-full p-2 md:p-4 rounded border border-gray-400"),y(e,"class","grid w-full lg:mx-20 gap-6 lg:gap-10 justify-center items-center place-content-center")},m(u,v){g(u,e,v),D&&D.m(e,null),b(e,t),b(e,s),b(s,n),b(s,i),i.checked=r[6],b(e,o),b(e,d),b(d,f),b(d,h),b(d,E);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(E,null);N=!0,B||(j=ee(i,"change",r[14]),B=!0)},p(u,v){if(v[0]&1&&(l=Object.entries(u[0]).length>0),l?D?D.p(u,v):(D=Ee(u),D.c(),D.m(e,t)):D&&(D.d(1),D=null),v[0]&64&&(i.checked=u[6]),(!N||v[0]&64)&&pe(i,"checkbox-success",u[6]),v[0]&6004){k=ne(u[5]);let p;for(p=0;p<k.length;p+=1){const I=ye(u,k,p);c[p]?(c[p].p(I,v),H(c[p],1)):(c[p]=Ye(I),c[p].c(),H(c[p],1),c[p].m(E,null))}for(se(),p=k.length;p<c.length;p+=1)_(p);le()}},i(u){if(!N){for(let v=0;v<k.length;v+=1)H(c[v]);N=!0}},o(u){c=c.filter(Boolean);for(let v=0;v<c.length;v+=1)J(c[v]);N=!1},d(u){u&&a(e),D&&D.d(),_e(c,u),B=!1,j()}}}function Ee(r){let e,l,t,s,n,i,o,d,f,m=Object.entries(r[0]).length+"",h,E,N,B,j=ne(Object.entries(r[0])),D=[];for(let k=0;k<j.length;k+=1)D[k]=Te(Ce(r,j,k));return{c(){e=w("div"),l=w("div"),t=be("svg"),s=be("path"),n=M(),i=w("div"),o=w("p"),d=S("You still have to pay "),f=w("b"),h=S(m),E=S(" of your orders!"),N=M(),B=w("ul");for(let k=0;k<D.length;k+=1)D[k].c();this.h()},l(k){e=C(k,"DIV",{class:!0});var c=L(e);l=C(c,"DIV",{});var _=L(l);t=ke(_,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var u=L(t);s=ke(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),L(s).forEach(a),u.forEach(a),n=U(_),i=C(_,"DIV",{});var v=L(i);o=C(v,"P",{class:!0});var p=L(o);d=A(p,"You still have to pay "),f=C(p,"B",{});var I=L(f);h=A(I,m),I.forEach(a),E=A(p," of your orders!"),p.forEach(a),N=U(v),B=C(v,"UL",{class:!0});var q=L(B);for(let Y=0;Y<D.length;Y+=1)D[Y].l(q);q.forEach(a),v.forEach(a),_.forEach(a),c.forEach(a),this.h()},h(){y(s,"stroke-linecap","round"),y(s,"stroke-linejoin","round"),y(s,"stroke-width","2"),y(s,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),y(t,"xmlns","http://www.w3.org/2000/svg"),y(t,"class","stroke-current flex-shrink-0 h-6 w-6"),y(t,"fill","none"),y(t,"viewBox","0 0 24 24"),y(o,"class","mb-1"),y(B,"class","list-disc list-inside ml-3 md:ml-5 text-xs md:text-sm"),y(e,"class","alert alert-warning shadow-lg")},m(k,c){g(k,e,c),b(e,l),b(l,t),b(t,s),b(l,n),b(l,i),b(i,o),b(o,d),b(o,f),b(f,h),b(o,E),b(i,N),b(i,B);for(let _=0;_<D.length;_+=1)D[_]&&D[_].m(B,null)},p(k,c){if(c[0]&1&&m!==(m=Object.entries(k[0]).length+"")&&R(h,m),c[0]&1){j=ne(Object.entries(k[0]));let _;for(_=0;_<j.length;_+=1){const u=Ce(k,j,_);D[_]?D[_].p(u,c):(D[_]=Te(u),D[_].c(),D[_].m(B,null))}for(;_<D.length;_+=1)D[_].d(1);D.length=j.length}},d(k){k&&a(e),_e(D,k)}}}function Te(r){let e,l=r[28].id+"",t;return{c(){e=w("li"),t=S(l)},l(s){e=C(s,"LI",{});var n=L(e);t=A(n,l),n.forEach(a)},m(s,n){g(s,e,n),b(e,t)},p(s,n){n[0]&1&&l!==(l=s[28].id+"")&&R(t,l)},d(s){s&&a(e)}}}function De(r){let e=!r[6]||r[6]&&Date.now()<r[28].created_at*1e3+We,l,t,s=e&&Oe(r);return{c(){s&&s.c(),l=Q()},l(n){s&&s.l(n),l=Q()},m(n,i){s&&s.m(n,i),g(n,l,i),t=!0},p(n,i){i[0]&96&&(e=!n[6]||n[6]&&Date.now()<n[28].created_at*1e3+We),e?s?(s.p(n,i),i[0]&96&&H(s,1)):(s=Oe(n),s.c(),H(s,1),s.m(l.parentNode,l)):s&&(se(),J(s,1,1,()=>{s=null}),le())},i(n){t||(H(s),t=!0)},o(n){J(s),t=!1},d(n){n&&a(l),s&&s.d(n)}}}function Oe(r){let e,l,t,s,n,i=r[27].substring(0,8)+"",o,d,f,m,h,E=r[27]+"",N,B,j,D,k,c=ge(r[28].created_at)+"",_,u,v,p,I,q,Y;function Z(O,P){return O[28].isAuction?vt:kt}let te=Z(r),K=te(r),W=r[9]!==null&&r[9].stalls[r[28].stall_id]&&Ie(r),T=r[28].items&&Ne(r);const X=[Dt,Tt,Et,Ct],F=[];function re(O,P){return O[28].type===0?0:O[28].type===1?1:O[28].type===2?2:3}return p=re(r),I=F[p]=X[p](r),{c(){e=w("tr"),l=w("td"),K.c(),t=M(),s=w("p"),n=S("# "),o=S(i),d=S("..."),f=M(),m=w("p"),h=S("# "),N=S(E),B=M(),W&&W.c(),j=M(),T&&T.c(),D=M(),k=w("td"),_=S(c),u=M(),v=w("td"),I.c(),q=M(),this.h()},l(O){e=C(O,"TR",{class:!0});var P=L(e);l=C(P,"TD",{});var V=L(l);K.l(V),t=U(V),s=C(V,"P",{class:!0});var x=L(s);n=A(x,"# "),o=A(x,i),d=A(x,"..."),x.forEach(a),f=U(V),m=C(V,"P",{class:!0});var G=L(m);h=A(G,"# "),N=A(G,E),G.forEach(a),B=U(V),W&&W.l(V),j=U(V),T&&T.l(V),V.forEach(a),D=U(P),k=C(P,"TD",{class:!0});var ie=L(k);_=A(ie,c),ie.forEach(a),u=U(P),v=C(P,"TD",{class:!0});var he=L(v);I.l(he),he.forEach(a),q=U(P),P.forEach(a),this.h()},h(){y(s,"class","text-sm md:hidden"),y(m,"class","text-sm hidden md:block"),y(k,"class","text-center px-0 md:px-4"),y(v,"class","text-center"),y(e,"class","border-y border-gray-600 hover")},m(O,P){g(O,e,P),b(e,l),K.m(l,null),b(l,t),b(l,s),b(s,n),b(s,o),b(s,d),b(l,f),b(l,m),b(m,h),b(m,N),b(l,B),W&&W.m(l,null),b(l,j),T&&T.m(l,null),b(e,D),b(e,k),b(k,_),b(e,u),b(e,v),F[p].m(v,null),b(e,q),Y=!0},p(O,P){te!==(te=Z(O))&&(K.d(1),K=te(O),K&&(K.c(),K.m(l,t))),(!Y||P[0]&32)&&i!==(i=O[27].substring(0,8)+"")&&R(o,i),(!Y||P[0]&32)&&E!==(E=O[27]+"")&&R(N,E),O[9]!==null&&O[9].stalls[O[28].stall_id]?W?W.p(O,P):(W=Ie(O),W.c(),W.m(l,j)):W&&(W.d(1),W=null),O[28].items?T?T.p(O,P):(T=Ne(O),T.c(),T.m(l,null)):T&&(T.d(1),T=null),(!Y||P[0]&32)&&c!==(c=ge(O[28].created_at)+"")&&R(_,c);let V=p;p=re(O),p===V?F[p].p(O,P):(se(),J(F[V],1,1,()=>{F[V]=null}),le(),I=F[p],I?I.p(O,P):(I=F[p]=X[p](O),I.c()),H(I,1),I.m(v,null))},i(O){Y||(H(I),Y=!0)},o(O){J(I),Y=!1},d(O){O&&a(e),K.d(),W&&W.d(),T&&T.d(),F[p].d()}}}function kt(r){let e,l="fixed price";return{c(){e=w("div"),e.textContent=l,this.h()},l(t){e=C(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1q3zwyq"&&(e.textContent=l),this.h()},h(){y(e,"class","badge badge-info gap-2")},m(t,s){g(t,e,s)},d(t){t&&a(e)}}}function vt(r){let e,l="auction";return{c(){e=w("div"),e.textContent=l,this.h()},l(t){e=C(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1934ak3"&&(e.textContent=l),this.h()},h(){y(e,"class","badge badge-success gap-2")},m(t,s){g(t,e,s)},d(t){t&&a(e)}}}function Ie(r){let e,l,t="Stall",s,n=(r[9].stalls[r[28].stall_id].name??"")+"",i;return{c(){e=w("p"),l=w("b"),l.textContent=t,s=S(": "),i=S(n),this.h()},l(o){e=C(o,"P",{class:!0});var d=L(e);l=C(d,"B",{"data-svelte-h":!0}),z(l)!=="svelte-ee8276"&&(l.textContent=t),s=A(d,": "),i=A(d,n),d.forEach(a),this.h()},h(){y(e,"class","mt-2")},m(o,d){g(o,e,d),b(e,l),b(e,s),b(e,i)},p(o,d){d[0]&544&&n!==(n=(o[9].stalls[o[28].stall_id].name??"")+"")&&R(i,n)},d(o){o&&a(e)}}}function Ne(r){let e,l;function t(i,o){return o[0]&32&&(l=null),l==null&&(l=!!Array.isArray(i[28].items)),l?yt:gt}let s=t(r,[-1,-1]),n=s(r);return{c(){e=w("ul"),n.c(),this.h()},l(i){e=C(i,"UL",{class:!0});var o=L(e);n.l(o),o.forEach(a),this.h()},h(){y(e,"class","list-disc list-inside ml-2")},m(i,o){g(i,e,o),n.m(e,null)},p(i,o){s===(s=t(i,o))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e,null)))},d(i){i&&a(e),n.d()}}}function gt(r){let e,l="Error loading items from the order";return{c(){e=w("li"),e.textContent=l},l(t){e=C(t,"LI",{"data-svelte-h":!0}),z(e)!=="svelte-13abj1h"&&(e.textContent=l)},m(t,s){g(t,e,s)},p:$,d(t){t&&a(e)}}}function yt(r){let e,l=ne(r[28].items),t=[];for(let s=0;s<l.length;s+=1)t[s]=Le(we(r,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=Q()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=Q()},m(s,n){for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(s,n);g(s,e,n)},p(s,n){if(n[0]&1056){l=ne(s[28].items);let i;for(i=0;i<l.length;i+=1){const o=we(s,l,i);t[i]?t[i].p(o,n):(t[i]=Le(o),t[i].c(),t[i].m(e.parentNode,e))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(s){s&&a(e),_e(t,s)}}}function Pt(r){let e,l=r[34].product_id+"",t;return{c(){e=S("#"),t=S(l)},l(s){e=A(s,"#"),t=A(s,l)},m(s,n){g(s,e,n),g(s,t,n)},p(s,n){n[0]&32&&l!==(l=s[34].product_id+"")&&R(t,l)},d(s){s&&(a(e),a(t))}}}function wt(r){let e=r[10].products[r[34].product_id].name+"",l;return{c(){l=S(e)},l(t){l=A(t,e)},m(t,s){g(t,l,s)},p(t,s){s[0]&1056&&e!==(e=t[10].products[t[34].product_id].name+"")&&R(l,e)},d(t){t&&a(l)}}}function je(r){let e,l=r[34].quantity+"",t,s;return{c(){e=S("- "),t=S(l),s=S(" units")},l(n){e=A(n,"- "),t=A(n,l),s=A(n," units")},m(n,i){g(n,e,i),g(n,t,i),g(n,s,i)},p(n,i){i[0]&32&&l!==(l=n[34].quantity+"")&&R(t,l)},d(n){n&&(a(e),a(t),a(s))}}}function Le(r){let e,l,t,s;function n(f,m){return f[10]!==null&&f[10].products[f[34].product_id]?wt:Pt}let i=n(r),o=i(r),d=r[34].quantity&&je(r);return{c(){e=w("li"),l=w("small"),o.c(),t=M(),d&&d.c(),s=M()},l(f){e=C(f,"LI",{});var m=L(e);l=C(m,"SMALL",{});var h=L(l);o.l(h),t=U(h),d&&d.l(h),h.forEach(a),s=U(m),m.forEach(a)},m(f,m){g(f,e,m),b(e,l),o.m(l,null),b(l,t),d&&d.m(l,null),b(e,s)},p(f,m){i===(i=n(f))&&o?o.p(f,m):(o.d(1),o=i(f),o&&(o.c(),o.m(l,t))),f[34].quantity?d?d.p(f,m):(d=je(f),d.c(),d.m(l,null)):d&&(d.d(1),d=null)},d(f){f&&a(e),o.d(),d&&d.d()}}}function Ct(r){let e,l="Unknown";return{c(){e=w("p"),e.textContent=l},l(t){e=C(t,"P",{"data-svelte-h":!0}),z(e)!=="svelte-97lalq"&&(e.textContent=l)},m(t,s){g(t,e,s)},p:$,i:$,o:$,d(t){t&&a(e)}}}function Et(r){let e,l,t,s,n,i=r[28].paid||r[28].message.includes("TxID:"),o,d=r[28].message&&!["Payment received."].includes(r[28].message),f,m,h=r[28].payment_options&&Be(r);function E(u,v){return u[28].paid?It:Ot}let N=E(r),B=N(r);function j(u,v){return u[28].shipped?jt:Nt}let D=j(r),k=D(r),c=i&&Ve(r),_=d&&Me(r);return{c(){e=w("p"),h&&h.c(),l=M(),B.c(),t=M(),s=w("p"),k.c(),n=M(),c&&c.c(),o=M(),_&&_.c(),f=Q(),this.h()},l(u){e=C(u,"P",{class:!0});var v=L(e);h&&h.l(v),l=U(v),B.l(v),v.forEach(a),t=U(u),s=C(u,"P",{class:!0});var p=L(s);k.l(p),p.forEach(a),n=U(u),c&&c.l(u),o=U(u),_&&_.l(u),f=Q(),this.h()},h(){y(e,"class","text-sm lg:text-base"),y(s,"class","text-sm lg:text-base")},m(u,v){g(u,e,v),h&&h.m(e,null),b(e,l),B.m(e,null),g(u,t,v),g(u,s,v),k.m(s,null),g(u,n,v),c&&c.m(u,v),g(u,o,v),_&&_.m(u,v),g(u,f,v),m=!0},p(u,v){u[28].payment_options?h?h.p(u,v):(h=Be(u),h.c(),h.m(e,l)):h&&(h.d(1),h=null),N!==(N=E(u))&&(B.d(1),B=N(u),B&&(B.c(),B.m(e,null))),D!==(D=j(u))&&(k.d(1),k=D(u),k&&(k.c(),k.m(s,null))),v[0]&32&&(i=u[28].paid||u[28].message.includes("TxID:")),i?c?(c.p(u,v),v[0]&32&&H(c,1)):(c=Ve(u),c.c(),H(c,1),c.m(o.parentNode,o)):c&&(se(),J(c,1,1,()=>{c=null}),le()),v[0]&32&&(d=u[28].message&&!["Payment received."].includes(u[28].message)),d?_?_.p(u,v):(_=Me(u),_.c(),_.m(f.parentNode,f)):_&&(_.d(1),_=null)},i(u){m||(H(c),m=!0)},o(u){J(c),m=!1},d(u){u&&(a(e),a(t),a(s),a(n),a(o),a(f)),h&&h.d(),B.d(),k.d(),c&&c.d(u),_&&_.d(u)}}}function Tt(r){let e,l,t=r[28].payment_options&&Ue(r);return{c(){t&&t.c(),e=Q()},l(s){t&&t.l(s),e=Q()},m(s,n){t&&t.m(s,n),g(s,e,n),l=!0},p(s,n){s[28].payment_options?t?(t.p(s,n),n[0]&32&&H(t,1)):(t=Ue(s),t.c(),H(t,1),t.m(e.parentNode,e)):t&&(se(),J(t,1,1,()=>{t=null}),le())},i(s){l||(H(t),l=!0)},o(s){J(t),l=!1},d(s){s&&a(e),t&&t.d(s)}}}function Dt(r){let e,l="Waiting for reply from the store";return{c(){e=w("p"),e.textContent=l},l(t){e=C(t,"P",{"data-svelte-h":!0}),z(e)!=="svelte-x9hjvi"&&(e.textContent=l)},m(t,s){g(t,e,s)},p:$,i:$,o:$,d(t){t&&a(e)}}}function Be(r){let e,l=ne(r[28].payment_options),t=[];for(let s=0;s<l.length;s+=1)t[s]=Ae(Pe(r,l,s));return{c(){e=w("ul");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=C(s,"UL",{class:!0});var n=L(e);for(let i=0;i<t.length;i+=1)t[i].l(n);n.forEach(a),this.h()},h(){y(e,"class","list-disc [&>*:first-child]:block")},m(s,n){g(s,e,n);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(s,n){if(n[0]&32){l=ne(s[28].payment_options);let i;for(i=0;i<l.length;i+=1){const o=Pe(s,l,i);t[i]?t[i].p(o,n):(t[i]=Ae(o),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(s){s&&a(e),_e(t,s)}}}function Se(r){let e,l=(r[31].amount_sats??r[31].amount)+"",t,s;return{c(){e=w("li"),t=S(l),s=S(" sats"),this.h()},l(n){e=C(n,"LI",{class:!0});var i=L(e);t=A(i,l),s=A(i," sats"),i.forEach(a),this.h()},h(){y(e,"class","hidden")},m(n,i){g(n,e,i),b(e,t),b(e,s)},p(n,i){i[0]&32&&l!==(l=(n[31].amount_sats??n[31].amount)+"")&&R(t,l)},d(n){n&&a(e)}}}function Ae(r){let e,l=(r[31].amount_sats||r[31].amount)&&Se(r);return{c(){l&&l.c(),e=Q()},l(t){l&&l.l(t),e=Q()},m(t,s){l&&l.m(t,s),g(t,e,s)},p(t,s){t[31].amount_sats||t[31].amount?l?l.p(t,s):(l=Se(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){t&&a(e),l&&l.d(t)}}}function Ot(r){let e;return{c(){e=S("❌ Payment not received")},l(l){e=A(l,"❌ Payment not received")},m(l,t){g(l,e,t)},d(l){l&&a(e)}}}function It(r){let e;return{c(){e=S("✅ Payment received")},l(l){e=A(l,"✅ Payment received")},m(l,t){g(l,e,t)},d(l){l&&a(e)}}}function Nt(r){let e;return{c(){e=S("❌ Order not shipped yet")},l(l){e=A(l,"❌ Order not shipped yet")},m(l,t){g(l,e,t)},d(l){l&&a(e)}}}function jt(r){let e;return{c(){e=S("✅ Order shipped")},l(l){e=A(l,"✅ Order shipped")},m(l,t){g(l,e,t)},d(l){l&&a(e)}}}function Ve(r){let e,l,t,s,n,i,o;t=new mt({});function d(){return r[16](r[28])}return{c(){e=w("button"),l=w("span"),oe(t.$$.fragment),s=S(`
                                            Contact the merchant`),this.h()},l(f){e=C(f,"BUTTON",{class:!0});var m=L(e);l=C(m,"SPAN",{class:!0});var h=L(l);ae(t.$$.fragment,h),h.forEach(a),s=A(m,`
                                            Contact the merchant`),m.forEach(a),this.h()},h(){y(l,"class","w-8 h-8"),y(e,"class","btn btn-outline btn-primary hover:btn-success h-16 md:h-12 gap-2 mt-4 mb-4 md:mb-2")},m(f,m){g(f,e,m),b(e,l),fe(t,l,null),b(e,s),n=!0,i||(o=ee(e,"click",d),i=!0)},p(f,m){r=f},i(f){n||(H(t.$$.fragment,f),n=!0)},o(f){J(t.$$.fragment,f),n=!1},d(f){f&&a(e),ce(t),i=!1,o()}}}function Me(r){let e,l;function t(i,o){return o[0]&32&&(l=null),l==null&&(l=!!i[28].message.includes("TxID:")),l?Bt:Lt}let s=t(r,[-1,-1]),n=s(r);return{c(){e=w("p"),n.c(),this.h()},l(i){e=C(i,"P",{class:!0});var o=L(e);n.l(o),o.forEach(a),this.h()},h(){y(e,"class","text-sm text-ellipsis overflow-hidden mt-2")},m(i,o){g(i,e,o),n.m(e,null)},p(i,o){s===(s=t(i,o))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e,null)))},d(i){i&&a(e),n.d()}}}function Lt(r){let e,l=r[28].message+"",t;return{c(){e=S("🛈 "),t=S(l)},l(s){e=A(s,"🛈 "),t=A(s,l)},m(s,n){g(s,e,n),g(s,t,n)},p(s,n){n[0]&32&&l!==(l=s[28].message+"")&&R(t,l)},d(s){s&&(a(e),a(t))}}}function Bt(r){let e,l=r[28].message.substring(0,r[28].message.indexOf(" TxID:"))+"",t,s,n,i="Copy Tx ID",o,d;function f(){return r[17](r[28])}return{c(){e=S("🛈 "),t=S(l),s=M(),n=w("button"),n.textContent=i,this.h()},l(m){e=A(m,"🛈 "),t=A(m,l),s=U(m),n=C(m,"BUTTON",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1kjgj62"&&(n.textContent=i),this.h()},h(){y(n,"class","btn btn-xs mt-1")},m(m,h){g(m,e,h),g(m,t,h),g(m,s,h),g(m,n,h),o||(d=ee(n,"click",f),o=!0)},p(m,h){r=m,h[0]&32&&l!==(l=r[28].message.substring(0,r[28].message.indexOf(" TxID:"))+"")&&R(t,l)},d(m){m&&(a(e),a(t),a(s),a(n)),o=!1,d()}}}function Ue(r){let e,l,t,s,n;const i=[At,St],o=[];function d(f,m){return m[0]&288&&(e=null),e==null&&(e=!!f[8].includes(f[27])),e?0:1}return l=d(r,[-1,-1]),t=o[l]=i[l](r),{c(){t.c(),s=Q()},l(f){t.l(f),s=Q()},m(f,m){o[l].m(f,m),g(f,s,m),n=!0},p(f,m){let h=l;l=d(f,m),l===h?o[l].p(f,m):(se(),J(o[h],1,1,()=>{o[h]=null}),le(),t=o[l],t?t.p(f,m):(t=o[l]=i[l](f),t.c()),H(t,1),t.m(s.parentNode,s))},i(f){n||(H(t),n=!0)},o(f){J(t),n=!1},d(f){f&&a(s),o[l].d(f)}}}function St(r){let e=ue(r[28]),l,t,s,n,i,o="⚡",d,f,m=r[28].message&&!["Payment received."].includes(r[28].message),h,E,N,B,j=e&&He(r);n=new _t({});function D(){return r[15](r[28])}let k=m&&qe(r);return{c(){j&&j.c(),l=M(),t=w("button"),s=w("span"),oe(n.$$.fragment),i=w("p"),i.textContent=o,d=S(" Pay order"),f=M(),k&&k.c(),h=Q(),this.h()},l(c){j&&j.l(c),l=U(c),t=C(c,"BUTTON",{class:!0});var _=L(t);s=C(_,"SPAN",{class:!0});var u=L(s);ae(n.$$.fragment,u),u.forEach(a),i=C(_,"P",{class:!0,"data-svelte-h":!0}),z(i)!=="svelte-16xa1rk"&&(i.textContent=o),d=A(_," Pay order"),_.forEach(a),f=U(c),k&&k.l(c),h=Q(),this.h()},h(){y(s,"class","h-7 w-7"),y(i,"class","-ml-5 text-2xl"),y(t,"class","btn btn-outline gap-2 mb-4 md:mb-2 h-16 md:h-12")},m(c,_){j&&j.m(c,_),g(c,l,_),g(c,t,_),b(t,s),fe(n,s,null),b(t,i),b(t,d),g(c,f,_),k&&k.m(c,_),g(c,h,_),E=!0,N||(B=ee(t,"click",me(D)),N=!0)},p(c,_){r=c,_[0]&32&&(e=ue(r[28])),e?j?j.p(r,_):(j=He(r),j.c(),j.m(l.parentNode,l)):j&&(j.d(1),j=null),_[0]&32&&(m=r[28].message&&!["Payment received."].includes(r[28].message)),m?k?k.p(r,_):(k=qe(r),k.c(),k.m(h.parentNode,h)):k&&(k.d(1),k=null)},i(c){E||(H(n.$$.fragment,c),E=!0)},o(c){J(n.$$.fragment,c),E=!1},d(c){c&&(a(l),a(t),a(f),a(h)),j&&j.d(c),ce(n),k&&k.d(c),N=!1,B()}}}function At(r){let e,l,t,s,n,i="Market as paid.<br/>Waiting for payment confirmation from the seller...",o,d,f="Waiting confirmation from seller...",m;return t=new dt({}),{c(){e=w("div"),l=w("span"),oe(t.$$.fragment),s=M(),n=w("p"),n.innerHTML=i,o=M(),d=w("p"),d.textContent=f,this.h()},l(h){e=C(h,"DIV",{class:!0});var E=L(e);l=C(E,"SPAN",{class:!0});var N=L(l);ae(t.$$.fragment,N),N.forEach(a),s=U(E),n=C(E,"P",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1axlpe2"&&(n.innerHTML=i),o=U(E),d=C(E,"P",{class:!0,"data-svelte-h":!0}),z(d)!=="svelte-1uasekp"&&(d.textContent=f),E.forEach(a),this.h()},h(){y(l,"class","w-10 h-10 mb-1"),y(n,"class","hidden md:block"),y(d,"class","md:hidden"),y(e,"class","flex flex-col justify-center items-center")},m(h,E){g(h,e,E),b(e,l),fe(t,l,null),b(e,s),b(e,n),b(e,o),b(e,d),m=!0},p:$,i(h){m||(H(t.$$.fragment,h),m=!0)},o(h){J(t.$$.fragment,h),m=!1},d(h){h&&a(e),ce(t)}}}function He(r){let e,l=ue(r[28])+"",t,s;return{c(){e=w("p"),t=S(l),s=S(" sat"),this.h()},l(n){e=C(n,"P",{class:!0});var i=L(e);t=A(i,l),s=A(i," sat"),i.forEach(a),this.h()},h(){y(e,"class","mb-2")},m(n,i){g(n,e,i),b(e,t),b(e,s)},p(n,i){i[0]&32&&l!==(l=ue(n[28])+"")&&R(t,l)},d(n){n&&a(e)}}}function qe(r){let e,l,t=r[28].message+"",s;return{c(){e=w("p"),l=S("🛈 "),s=S(t),this.h()},l(n){e=C(n,"P",{class:!0});var i=L(e);l=A(i,"🛈 "),s=A(i,t),i.forEach(a),this.h()},h(){y(e,"class","text-xs lg:text-sm")},m(n,i){g(n,e,i),b(e,l),b(e,s)},p(n,i){i[0]&32&&t!==(t=n[28].message+"")&&R(s,t)},d(n){n&&a(e)}}}function Ye(r){let e,l,t=r[28].type!==10&&De(r);return{c(){t&&t.c(),e=Q()},l(s){t&&t.l(s),e=Q()},m(s,n){t&&t.m(s,n),g(s,e,n),l=!0},p(s,n){s[28].type!==10?t?(t.p(s,n),n[0]&32&&H(t,1)):(t=De(s),t.c(),H(t,1),t.m(e.parentNode,e)):t&&(se(),J(t,1,1,()=>{t=null}),le())},i(s){l||(H(t),l=!0)},o(s){J(t),l=!1},d(s){s&&a(e),t&&t.d(s)}}}function Je(r){let e,l,t,s,n,i="✕",o,d,f,m,h,E,N,B,j,D;function k(p,I){if(I[0]&1&&(f=null),I[0]&1&&(m=null),f==null&&(f=Object.entries(p[0]).length===1),f)return Mt;if(m==null&&(m=Object.entries(p[0]).length>1),m)return Vt}let c=k(r,[-1,-1]),_=c&&c(r);function u(p){r[20](p)}let v={orderToBePaid:r[4]};return r[7]!==void 0&&(v.showPaymentDetails=r[7]),E=new ut({props:v}),Re.push(()=>xe(E,"showPaymentDetails",u)),{c(){e=w("input"),l=M(),t=w("div"),s=w("div"),n=w("label"),n.textContent=i,o=M(),d=w("h3"),_&&_.c(),h=M(),oe(E.$$.fragment),this.h()},l(p){e=C(p,"INPUT",{type:!0,id:!0,class:!0}),l=U(p),t=C(p,"DIV",{class:!0});var I=L(t);s=C(I,"DIV",{class:!0});var q=L(s);n=C(q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(n)!=="svelte-10x72oo"&&(n.textContent=i),o=U(q),d=C(q,"H3",{class:!0});var Y=L(d);_&&_.l(Y),Y.forEach(a),h=U(q),ae(E.$$.fragment,q),q.forEach(a),I.forEach(a),this.h()},h(){y(e,"type","checkbox"),y(e,"id","nostrTextConfirmation"),y(e,"class","modal-toggle"),y(n,"for","nostrTextConfirmation"),y(n,"class","btn btn-sm btn-circle absolute right-2 top-2"),y(d,"class","text-lg font-bold mb-0 text-black"),y(s,"class","modal-box relative bg-white"),y(t,"class","modal")},m(p,I){g(p,e,I),e.checked=r[2],g(p,l,I),g(p,t,I),b(t,s),b(s,n),b(s,o),b(s,d),_&&_.m(d,null),b(s,h),fe(E,s,null),B=!0,j||(D=[ee(e,"change",r[18]),ee(e,"change",r[19])],j=!0)},p(p,I){I[0]&4&&(e.checked=p[2]),c===(c=k(p,I))&&_?_.p(p,I):(_&&_.d(1),_=c&&c(p),_&&(_.c(),_.m(d,null)));const q={};I[0]&16&&(q.orderToBePaid=p[4]),!N&&I[0]&128&&(N=!0,q.showPaymentDetails=p[7],Ze(()=>N=!1)),E.$set(q)},i(p){B||(H(E.$$.fragment,p),B=!0)},o(p){J(E.$$.fragment,p),B=!1},d(p){p&&(a(e),a(l),a(t)),_&&_.d(),ce(E),j=!1,ze(D)}}}function Vt(r){let e,l=Object.entries(r[0]).length+"",t,s;return{c(){e=S("You have to pay "),t=S(l),s=S(" orders. Start by paying this one:")},l(n){e=A(n,"You have to pay "),t=A(n,l),s=A(n," orders. Start by paying this one:")},m(n,i){g(n,e,i),g(n,t,i),g(n,s,i)},p(n,i){i[0]&1&&l!==(l=Object.entries(n[0]).length+"")&&R(t,l)},d(n){n&&(a(e),a(t),a(s))}}}function Mt(r){let e;return{c(){e=S("Pay your order:")},l(l){e=A(l,"Pay your order:")},m(l,t){g(l,e,t)},p:$,d(l){l&&a(e)}}}function Ut(r){let e,l,t,s,n,i,o,d,f,m,h,E,N,B="✕",j,D,k="Payment completed successfully?",c,_,u="Have you got a confirmation from your wallet that this payment has completed successfully?",v,p,I,q="Not yet",Y,Z,te="Yes, payment correct",K,W,T;l=new ct({props:{$$slots:{default:[ht]},$$scope:{ctx:r}}});const X=[bt,pt],F=[];function re(P,V){return V[0]&32&&(s=null),s==null&&(s=Object.keys(P[5]).length>0),s?0:1}n=re(r,[-1,-1]),i=F[n]=X[n](r);let O=r[4]&&Je(r);return{c(){e=M(),oe(l.$$.fragment),t=M(),i.c(),o=M(),O&&O.c(),d=M(),f=w("input"),m=M(),h=w("div"),E=w("div"),N=w("label"),N.textContent=B,j=M(),D=w("h3"),D.textContent=k,c=M(),_=w("p"),_.textContent=u,v=M(),p=w("div"),I=w("button"),I.textContent=q,Y=M(),Z=w("button"),Z.textContent=te,this.h()},l(P){Ke("svelte-1rg3di6",document.head).forEach(a),e=U(P),ae(l.$$.fragment,P),t=U(P),i.l(P),o=U(P),O&&O.l(P),d=U(P),f=C(P,"INPUT",{type:!0,id:!0,class:!0}),m=U(P),h=C(P,"DIV",{class:!0});var x=L(h);E=C(x,"DIV",{class:!0});var G=L(E);N=C(G,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(N)!=="svelte-k3dqq1"&&(N.textContent=B),j=U(G),D=C(G,"H3",{class:!0,"data-svelte-h":!0}),z(D)!=="svelte-1rb2pe7"&&(D.textContent=k),c=U(G),_=C(G,"P",{class:!0,"data-svelte-h":!0}),z(_)!=="svelte-1hpmy1e"&&(_.textContent=u),v=U(G),p=C(G,"DIV",{class:!0});var ie=L(p);I=C(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),z(I)!=="svelte-1384gv4"&&(I.textContent=q),Y=U(ie),Z=C(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),z(Z)!=="svelte-rsvgco"&&(Z.textContent=te),ie.forEach(a),G.forEach(a),x.forEach(a),this.h()},h(){document.title="Orders",y(f,"type","checkbox"),y(f,"id","paymentConfirmation"),y(f,"class","modal-toggle"),y(N,"for","paymentConfirmation"),y(N,"class","btn btn-sm btn-circle absolute right-2 top-2"),y(D,"class","text-lg font-bold mb-0 text-black"),y(_,"class","p-6 md:p-10 text-justify"),y(I,"class","btn btn-error mr-6"),y(Z,"class","btn btn-success"),y(p,"class","flex justify-center items-center"),y(E,"class","modal-box relative bg-white"),y(h,"class","modal")},m(P,V){g(P,e,V),fe(l,P,V),g(P,t,V),F[n].m(P,V),g(P,o,V),O&&O.m(P,V),g(P,d,V),g(P,f,V),f.checked=r[3],g(P,m,V),g(P,h,V),b(h,E),b(E,N),b(E,j),b(E,D),b(E,c),b(E,_),b(E,v),b(E,p),b(p,I),b(p,Y),b(p,Z),K=!0,W||(T=[ee(f,"change",r[21]),ee(f,"change",r[22]),ee(I,"click",me(r[23])),ee(Z,"click",me(r[24]))],W=!0)},p(P,V){const x={};V[1]&512&&(x.$$scope={dirty:V,ctx:P}),l.$set(x);let G=n;n=re(P,V),n===G?F[n].p(P,V):(se(),J(F[G],1,1,()=>{F[G]=null}),le(),i=F[n],i?i.p(P,V):(i=F[n]=X[n](P),i.c()),H(i,1),i.m(o.parentNode,o)),P[4]?O?(O.p(P,V),V[0]&16&&H(O,1)):(O=Je(P),O.c(),H(O,1),O.m(d.parentNode,d)):O&&(se(),J(O,1,1,()=>{O=null}),le()),V[0]&8&&(f.checked=P[3])},i(P){K||(H(l.$$.fragment,P),H(i),H(O),K=!0)},o(P){J(l.$$.fragment,P),J(i),J(O),K=!1},d(P){P&&(a(e),a(t),a(o),a(d),a(f),a(m),a(h)),ce(l,P),F[n].d(P),O&&O.d(P),W=!1,ze(T)}}}const We=7776e6;function ue(r){for(const e of r.payment_options)if(e.amount_sats)return e.amount_sats}function Ht(r,e,l){let t,s,n,i;de(r,it,T=>l(13,s=T)),de(r,rt,T=>l(9,n=T)),de(r,ot,T=>l(10,i=T));let o=!1,d=!1,f=null,m=[],h=[],E=!0,N=!1,B;et(async()=>{await tt()});const j=lt.subscribe(async T=>{T&&(at(),ft())});Ge(j);function D(){let T=localStorage.getItem("paidPayments");l(8,t=JSON.parse(T)??[])}function k(T){t.includes(T)||(l(8,t[t.length]=T,t),localStorage.setItem("paidPayments",JSON.stringify(t))),l(3,d=!1),l(2,o=!1)}function c(T){navigator.clipboard.writeText(T),st.set("Transaction ID copied to clipboard: "+T.substring(0,9)+"...")}Qe(async()=>{D()});function _(){E=this.checked,l(6,E)}const u=T=>{l(4,f=T),l(2,o=!0)},v=T=>nt(T.pubkey),p=T=>c(T.message.match(/[^TxID: ]*$/)[0]);function I(){o=this.checked,l(2,o),l(1,N),l(0,h),l(13,s)}const q=()=>l(1,N=!1);function Y(T){B=T,l(7,B)}function Z(){d=this.checked,l(3,d)}const te=()=>l(1,N=!1),K=()=>l(3,d=!1),W=()=>k(paymentInfo.orderId);return r.$$.update=()=>{if(r.$$.dirty[0]&8192&&(l(5,m=Object.entries(s.automatic).filter(([,T])=>T.stall_id!==ve).sort((T,X)=>X[1].created_at-T[1].created_at)),l(0,h=Object.fromEntries(Object.entries(s.automatic).filter(([,T])=>{if(T.type===1){if(T.stall_id===ve)return!1;if(T.payment_options)for(const X of T.payment_options)if(X.type==="ln"){if(Date.now()<T.created_at*1e3+X.expiry*1e3)return!0}else return!0}return!1})))),r.$$.dirty[0]&3)if(N&&Object.entries(h).length>0){let T=Object.entries(h)[0][1];if(T.payment_options)for(const X of T.payment_options)X.type==="ln"?Date.now()>T.created_at*1e3+X.expiry*1e3&&(l(4,f=T),l(2,o=!0)):(l(4,f=T),l(2,o=!0))}else l(2,o=!1)},l(8,t=[]),[h,N,o,d,f,m,E,B,t,n,i,k,c,s,_,u,v,p,I,q,Y,Z,te,K,W]}class Qt extends Xe{constructor(e){super(),$e(this,e,Ht,Ut,Fe,{},null,[-1,-1])}}export{Qt as component};
