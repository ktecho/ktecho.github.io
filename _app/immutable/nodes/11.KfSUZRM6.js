import{s as Re,f as k,g as E,h as G,d as _,j as c,i as y,r as he,a as F,l as W,F as J,c as V,m as Q,O as U,z as w,G as S,n as fe,J as ze,e as q,y as Qe,o as Xe,x as be,p as Z,Y as $}from"../chunks/scheduler.2vmdsppc.js";import{S as Ke,i as Ye,a as O,t as z,c as pe,b as ne,d as se,m as oe,g as ge,e as ae,o as x}from"../chunks/index.eLAHt3dB.js";import{E as Ze,a1 as $e,I as We,a2 as xe,e as te,b as et}from"../chunks/utils.FkBaGfnY.js";import{T as tt}from"../chunks/Title-h1.ksZwEtxJ.js";import"../chunks/singletons.PqOxICUJ.js";/* empty css                                                      */import{p as me}from"../chunks/profile_picture_placeholder.0d-yZyxG.js";import{S as lt}from"../chunks/StallsBrowser.QVo8m-DK.js";import{b as Y,U as it}from"../chunks/badge_placeholder.tdxaBMwY.js";import{n as ue}from"../chunks/VerificationMark.95_-Gkx8.js";import{C as rt,S as nt}from"../chunks/ShowExternalIdentities.fuldahui.js";async function st({params:n}){const{pubkey:e}=n;return{pubkey:e}}const jt=Object.freeze(Object.defineProperty({__proto__:null,load:st},Symbol.toStringTag,{value:"Module"}));function ve(n){let e,l,t='<button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>',r,i,s,d,f,o,u,I,m,p=n[0].name+"",h,M,D,R=n[0].description+"",H,N,A,L,g="<button>close</button>",B,K,T=n[2]&&!n[0].accepted&&ke(n);return{c(){e=k("div"),l=k("form"),l.innerHTML=t,r=F(),i=k("div"),s=k("div"),d=k("figure"),f=k("img"),u=F(),I=k("div"),m=k("p"),h=W(p),M=F(),D=k("p"),H=W(R),N=F(),T&&T.c(),A=F(),L=k("form"),L.innerHTML=g,this.h()},l(a){e=E(a,"DIV",{class:!0});var b=G(e);l=E(b,"FORM",{method:!0,"data-svelte-h":!0}),J(l)!=="svelte-kvjbt1"&&(l.innerHTML=t),r=V(b),i=E(b,"DIV",{class:!0});var j=G(i);s=E(j,"DIV",{class:!0});var P=G(s);d=E(P,"FIGURE",{class:!0});var C=G(d);f=E(C,"IMG",{id:!0,src:!0,alt:!0}),C.forEach(_),P.forEach(_),u=V(j),I=E(j,"DIV",{class:!0});var X=G(I);m=E(X,"P",{class:!0});var le=G(m);h=Q(le,p),le.forEach(_),M=V(X),D=E(X,"P",{class:!0});var ie=G(D);H=Q(ie,R),ie.forEach(_),X.forEach(_),j.forEach(_),N=V(b),T&&T.l(b),b.forEach(_),A=V(a),L=E(a,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),J(L)!=="svelte-9i9e7k"&&(L.innerHTML=g),this.h()},h(){c(l,"method","dialog"),c(f,"id","badgeModalImg"),U(f.src,o=n[0].image??Y)||c(f,"src",o),c(f,"alt",""),c(d,"class","avatar mask mask-squircle h-32 w-32 md:h-72 md:w-72"),c(s,"class","grid flex-grow place-items-center"),c(m,"class","font-bold text-xl md:text-2xl mb-3"),c(D,"class","text-lg md:text-xl align-top"),c(I,"class","grid flex-grow place-items-center ml-4 md:ml-12"),c(i,"class","flex w-full"),c(e,"class","modal-box w-11/12 max-w-3xl"),c(L,"method","dialog"),c(L,"class","modal-backdrop")},m(a,b){y(a,e,b),w(e,l),w(e,r),w(e,i),w(i,s),w(s,d),w(d,f),w(i,u),w(i,I),w(I,m),w(m,h),w(I,M),w(I,D),w(D,H),w(e,N),T&&T.m(e,null),y(a,A,b),y(a,L,b),B||(K=[S(f,"load",at),S(f,"error",n[5])],B=!0)},p(a,b){b&1&&!U(f.src,o=a[0].image??Y)&&c(f,"src",o),b&1&&p!==(p=a[0].name+"")&&fe(h,p),b&1&&R!==(R=a[0].description+"")&&fe(H,R),a[2]&&!a[0].accepted?T?T.p(a,b):(T=ke(a),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},d(a){a&&(_(e),_(A),_(L)),T&&T.d(),B=!1,ze(K)}}}function ke(n){let e,l,t="You have been awarded this badge. If you consider it valuable, <b>you can accept it to have it displayed on your profile</b>.",r,i,s="Accept badge",d,f;return{c(){e=k("div"),l=k("p"),l.innerHTML=t,r=F(),i=k("button"),i.textContent=s,this.h()},l(o){e=E(o,"DIV",{class:!0});var u=G(e);l=E(u,"P",{"data-svelte-h":!0}),J(l)!=="svelte-18linb3"&&(l.innerHTML=t),r=V(u),i=E(u,"BUTTON",{class:!0,"data-svelte-h":!0}),J(i)!=="svelte-1rlkzii"&&(i.textContent=s),u.forEach(_),this.h()},h(){c(i,"class","btn btn-primary"),c(e,"class","mt-8 grid flex-grow place-items-center")},m(o,u){y(o,e,u),w(e,l),w(e,r),w(e,i),d||(f=S(i,"click",n[3]),d=!0)},p:he,d(o){o&&_(e),d=!1,f()}}}function ot(n){let e,l=n[0]&&ve(n);return{c(){e=k("dialog"),l&&l.c(),this.h()},l(t){e=E(t,"DIALOG",{id:!0,class:!0});var r=G(e);l&&l.l(r),r.forEach(_),this.h()},h(){c(e,"id","badge_modal"),c(e,"class","modal")},m(t,r){y(t,e,r),l&&l.m(e,null)},p(t,[r]){t[0]?l?l.p(t,r):(l=ve(t),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:he,o:he,d(t){t&&_(e),l&&l.d()}}}const at=n=>{n.srcElement.style.visibility="visible"};function ft(n,e,l){let{onImgError:t=()=>{}}=e,{profileBadgesLastEvent:r}=e,{badgeInfo:i}=e,{myBadge:s=!1}=e;function d(){if(i.accepted){Ze.set("Badge already accepted!"),console.error("This badge was already accepted");return}r.tags.length<3?(console.debug("nostrAcceptBadge - profile doesn't have a single entire badge"),l(4,r.tags=[["d","profile_badges"]],r)):console.debug("nostrAcceptBadge - adding new badge to profile"),r.tags.push(["a",i.badgeFullName]),r.tags.push(["e",i.eventId]),$e(r.tags,o=>{We.set("Badge accepted!"),l(0,i.accepted=!0,i),window.badge_modal.close()})}const f=o=>t(o.srcElement);return n.$$set=o=>{"onImgError"in o&&l(1,t=o.onImgError),"profileBadgesLastEvent"in o&&l(4,r=o.profileBadgesLastEvent),"badgeInfo"in o&&l(0,i=o.badgeInfo),"myBadge"in o&&l(2,s=o.myBadge)},[i,t,s,d,r,f]}class ut extends Ke{constructor(e){super(),Ye(this,e,ft,ot,Re,{onImgError:1,profileBadgesLastEvent:4,badgeInfo:0,myBadge:2})}}function Ee(n,e,l){const t=n.slice();return t[37]=e[l],t}function Ie(n,e,l){const t=n.slice();return t[37]=e[l],t}function we(n,e,l){const t=n.slice();return t[37]=e[l],t}function ye(n,e,l){const t=n.slice();return t[37]=e[l],t}function Me(n){let e,l,t,r,i,s,d,f,o,u,I,m,p,h,M,D=ue.npubEncode(n[11].pubkey)+"",R,H,N,A,L,g,B,K,T,a=(n[11].display_name||n[11].name)&&Be(n);A=new rt({});let b=n[11].about&&Le(n),j=n[11].lud16&&Pe(n);return{c(){a&&a.c(),e=F(),l=k("div"),t=k("div"),r=k("div"),i=k("img"),d=F(),f=k("div"),o=k("div"),u=k("img"),m=F(),p=k("div"),h=k("div"),M=k("p"),R=W(D),H=F(),N=k("button"),ne(A.$$.fragment),L=F(),b&&b.c(),g=F(),j&&j.c(),this.h()},l(P){a&&a.l(P),e=V(P),l=E(P,"DIV",{class:!0});var C=G(l);t=E(C,"DIV",{class:!0});var X=G(t);r=E(X,"DIV",{class:!0});var le=G(r);i=E(le,"IMG",{class:!0,src:!0}),le.forEach(_),X.forEach(_),d=V(C),f=E(C,"DIV",{class:!0});var ie=G(f);o=E(ie,"DIV",{class:!0});var de=G(o);u=E(de,"IMG",{class:!0,src:!0}),de.forEach(_),ie.forEach(_),m=V(C),p=E(C,"DIV",{class:!0});var ee=G(p);h=E(ee,"DIV",{class:!0});var re=G(h);M=E(re,"P",{class:!0});var ce=G(M);R=Q(ce,D),ce.forEach(_),H=V(re),N=E(re,"BUTTON",{class:!0});var _e=G(N);se(A.$$.fragment,_e),_e.forEach(_),re.forEach(_),L=V(ee),b&&b.l(ee),g=V(ee),j&&j.l(ee),ee.forEach(_),C.forEach(_),this.h()},h(){c(i,"class","mx-auto"),U(i.src,s=n[11].picture??me)||c(i,"src",s),c(r,"class","w-36 h-36 mx-auto rounded-full"),c(t,"class","avatar hidden lg:block mr-8"),c(u,"class","mx-auto"),U(u.src,I=n[11].picture??me)||c(u,"src",I),c(o,"class","w-36 h-36 mx-auto rounded-full"),c(f,"class","avatar container block lg:hidden -mt-4 mb-4"),c(M,"class","font-bold text-ellipsis overflow-hidden lg:mr-2"),c(N,"class","btn btn-square btn-xs"),c(h,"class","w-full mb-4 flex"),c(p,"class","mt-2"),c(l,"class","lg:flex w-full pb-4 md:pb-8")},m(P,C){a&&a.m(P,C),y(P,e,C),y(P,l,C),w(l,t),w(t,r),w(r,i),w(l,d),w(l,f),w(f,o),w(o,u),w(l,m),w(l,p),w(p,h),w(h,M),w(M,R),w(h,H),w(h,N),oe(A,N,null),w(p,L),b&&b.m(p,null),w(p,g),j&&j.m(p,null),B=!0,K||(T=[S(i,"error",n[13]),S(u,"error",n[14]),S(N,"click",n[15])],K=!0)},p(P,C){P[11].display_name||P[11].name?a?(a.p(P,C),C[0]&2048&&O(a,1)):(a=Be(P),a.c(),O(a,1),a.m(e.parentNode,e)):a&&(ge(),z(a,1,1,()=>{a=null}),pe()),(!B||C[0]&2048&&!U(i.src,s=P[11].picture??me))&&c(i,"src",s),(!B||C[0]&2048&&!U(u.src,I=P[11].picture??me))&&c(u,"src",I),(!B||C[0]&2048)&&D!==(D=ue.npubEncode(P[11].pubkey)+"")&&fe(R,D),P[11].about?b?b.p(P,C):(b=Le(P),b.c(),b.m(p,g)):b&&(b.d(1),b=null),P[11].lud16?j?j.p(P,C):(j=Pe(P),j.c(),j.m(p,null)):j&&(j.d(1),j=null)},i(P){B||(O(a),O(A.$$.fragment,P),B=!0)},o(P){z(a),z(A.$$.fragment,P),B=!1},d(P){P&&(_(e),_(l)),a&&a.d(P),ae(A),b&&b.d(),j&&j.d(),K=!1,ze(T)}}}function Be(n){let e,l;return e=new tt({props:{$$slots:{default:[dt]},$$scope:{ctx:n}}}),{c(){ne(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,r){oe(e,t,r),l=!0},p(t,r){const i={};r[0]&2048|r[1]&32768&&(i.$$scope={dirty:r,ctx:t}),e.$set(i)},i(t){l||(O(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){ae(e,t)}}}function dt(n){let e=(n[11].display_name??n[11].name??ue.npubEncode(n[11].pubkey)?.substring(0,20))+"",l;return{c(){l=W(e)},l(t){l=Q(t,e)},m(t,r){y(t,l,r)},p(t,r){r[0]&2048&&e!==(e=(t[11].display_name??t[11].name??ue.npubEncode(t[11].pubkey)?.substring(0,20))+"")&&fe(l,e)},d(t){t&&_(l)}}}function Le(n){let e,l=n[11].about+"",t;return{c(){e=k("p"),t=W(l),this.h()},l(r){e=E(r,"P",{class:!0});var i=G(e);t=Q(i,l),i.forEach(_),this.h()},h(){c(e,"class","mb-6 text-justify text-lg")},m(r,i){y(r,e,i),w(e,t)},p(r,i){i[0]&2048&&l!==(l=r[11].about+"")&&fe(t,l)},d(r){r&&_(e)}}}function Pe(n){let e,l,t,r;return{c(){e=k("p"),l=k("a"),t=W("⚡ Tips"),this.h()},l(i){e=E(i,"P",{class:!0});var s=G(e);l=E(s,"A",{class:!0,"data-tip":!0,href:!0});var d=G(l);t=Q(d,"⚡ Tips"),d.forEach(_),s.forEach(_),this.h()},h(){c(l,"class","hover:underline tooltip tooltip-bottom"),c(l,"data-tip","Tip with Lightning"),c(l,"href",r="lightning:"+n[11].lud16),c(e,"class","mb-1 text-xl")},m(i,s){y(i,e,s),w(e,l),w(l,t)},p(i,s){s[0]&2048&&r!==(r="lightning:"+i[11].lud16)&&c(l,"href",r)},d(i){i&&_(e)}}}function Ce(n){let e,l,t="External Identities",r,i,s;return i=new nt({props:{profileFinishedLoading:n[10],externalIdentities:n[2],nostrPublicKey:n[11].pubkey}}),{c(){e=k("div"),l=k("p"),l.textContent=t,r=F(),ne(i.$$.fragment),this.h()},l(d){e=E(d,"DIV",{class:!0});var f=G(e);l=E(f,"P",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-1j1ka2s"&&(l.textContent=t),r=V(f),se(i.$$.fragment,f),f.forEach(_),this.h()},h(){c(l,"class","mb-1 font-bold text-xl"),c(e,"class","mt-1 pb-4 md:pb-6")},m(d,f){y(d,e,f),w(e,l),w(e,r),oe(i,e,null),s=!0},p(d,f){const o={};f[0]&1024&&(o.profileFinishedLoading=d[10]),f[0]&4&&(o.externalIdentities=d[2]),f[0]&2048&&(o.nostrPublicKey=d[11].pubkey),i.$set(o)},i(d){s||(O(i.$$.fragment,d),s=!0)},o(d){z(i.$$.fragment,d),s=!1},d(d){d&&_(e),ae(i)}}}function De(n){let e,l,t=te(n[8]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Ne(ye(n,t,s));let i=n[0].pubkey===n[12]&&Te(n);return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=F(),i&&i.c(),l=q()},l(s){for(let d=0;d<r.length;d+=1)r[d].l(s);e=V(s),i&&i.l(s),l=q()},m(s,d){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(s,d);y(s,e,d),i&&i.m(s,d),y(s,l,d)},p(s,d){if(d[0]&450){t=te(s[8]);let f;for(f=0;f<t.length;f+=1){const o=ye(s,t,f);r[f]?r[f].p(o,d):(r[f]=Ne(o),r[f].c(),r[f].m(e.parentNode,e))}for(;f<r.length;f+=1)r[f].d(1);r.length=t.length}s[0].pubkey===s[12]?i?i.p(s,d):(i=Te(s),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},d(s){s&&(_(e),_(l)),be(r,s),i&&i.d(s)}}}function Ae(n){let e,l,t,r,i,s,d;function f(m,p){return p[0]&384&&(t=null),t==null&&(t=!!(m[7].get(m[37]).thumb&&/\.(gif|jpg|jpeg|png|webp)$/i.test(m[7].get(m[37]).thumb))),t?_t:ct}let o=f(n,[-1,-1]),u=o(n);function I(){return n[18](n[37])}return{c(){e=k("div"),l=k("figure"),u.c(),r=F(),this.h()},l(m){e=E(m,"DIV",{class:!0,"data-tip":!0});var p=G(e);l=E(p,"FIGURE",{class:!0});var h=G(l);u.l(h),h.forEach(_),r=V(p),p.forEach(_),this.h()},h(){c(l,"class","h-14 w-14 mr-2 md:mr-4 avatar mask mask-squircle cursor-pointer"),c(e,"class","tooltip tooltip-accent"),c(e,"data-tip",i=n[7].get(n[37]).name)},m(m,p){y(m,e,p),w(e,l),u.m(l,null),w(e,r),s||(d=S(e,"click",I),s=!0)},p(m,p){n=m,o===(o=f(n,p))&&u?u.p(n,p):(u.d(1),u=o(n),u&&(u.c(),u.m(l,null))),p[0]&384&&i!==(i=n[7].get(n[37]).name)&&c(e,"data-tip",i)},d(m){m&&_(e),u.d(),s=!1,d()}}}function ct(n){let e,l,t,r;return{c(){e=k("img"),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0}),this.h()},h(){U(e.src,l=n[7].get(n[37]).image??Y)||c(e,"src",l),c(e,"alt","")},m(i,s){y(i,e,s),t||(r=S(e,"error",n[17]),t=!0)},p(i,s){s[0]&384&&!U(e.src,l=i[7].get(i[37]).image??Y)&&c(e,"src",l)},d(i){i&&_(e),t=!1,r()}}}function _t(n){let e,l,t,r;return{c(){e=k("img"),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0}),this.h()},h(){U(e.src,l=n[7].get(n[37]).thumb)||c(e,"src",l),c(e,"alt","")},m(i,s){y(i,e,s),t||(r=S(e,"error",n[16]),t=!0)},p(i,s){s[0]&384&&!U(e.src,l=i[7].get(i[37]).thumb)&&c(e,"src",l)},d(i){i&&_(e),t=!1,r()}}}function Ne(n){let e=n[7].get(n[37])&&n[7].get(n[37]).pm_issued,l,t=e&&Ae(n);return{c(){t&&t.c(),l=q()},l(r){t&&t.l(r),l=q()},m(r,i){t&&t.m(r,i),y(r,l,i)},p(r,i){i[0]&384&&(e=r[7].get(r[37])&&r[7].get(r[37]).pm_issued),e?t?t.p(r,i):(t=Ae(r),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(r){r&&_(l),t&&t.d(r)}}}function Te(n){let e,l=te(n[9]),t=[];for(let r=0;r<l.length;r+=1)t[r]=Fe(we(n,l,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=q()},l(r){for(let i=0;i<t.length;i+=1)t[i].l(r);e=q()},m(r,i){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(r,i);y(r,e,i)},p(r,i){if(i[0]&962){l=te(r[9]);let s;for(s=0;s<l.length;s+=1){const d=we(r,l,s);t[s]?t[s].p(d,i):(t[s]=Fe(d),t[s].c(),t[s].m(e.parentNode,e))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(r){r&&_(e),be(t,r)}}}function Ge(n){let e,l,t,r,i,s,d;function f(m,p){return p[0]&640&&(t=null),t==null&&(t=!!(m[7].get(m[37]).thumb&&/\.(gif|jpg|jpeg|png|webp)$/i.test(m[7].get(m[37]).thumb))),t?pt:mt}let o=f(n,[-1,-1]),u=o(n);function I(){return n[21](n[37])}return{c(){e=k("div"),l=k("figure"),u.c(),r=F(),this.h()},l(m){e=E(m,"DIV",{class:!0,"data-tip":!0});var p=G(e);l=E(p,"FIGURE",{class:!0});var h=G(l);u.l(h),h.forEach(_),r=V(p),p.forEach(_),this.h()},h(){c(l,"class","h-14 w-14 mr-2 md:mr-4 avatar mask mask-squircle cursor-pointer opacity-40 hover:opacity-80"),c(e,"class","tooltip tooltip-accent"),c(e,"data-tip",i="Unaccepted badge: "+n[7].get(n[37]).name)},m(m,p){y(m,e,p),w(e,l),u.m(l,null),w(e,r),s||(d=S(e,"click",I),s=!0)},p(m,p){n=m,o===(o=f(n,p))&&u?u.p(n,p):(u.d(1),u=o(n),u&&(u.c(),u.m(l,null))),p[0]&640&&i!==(i="Unaccepted badge: "+n[7].get(n[37]).name)&&c(e,"data-tip",i)},d(m){m&&_(e),u.d(),s=!1,d()}}}function mt(n){let e,l,t,r;return{c(){e=k("img"),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0}),this.h()},h(){U(e.src,l=n[7].get(n[37]).image??Y)||c(e,"src",l),c(e,"alt","")},m(i,s){y(i,e,s),t||(r=S(e,"error",n[20]),t=!0)},p(i,s){s[0]&640&&!U(e.src,l=i[7].get(i[37]).image??Y)&&c(e,"src",l)},d(i){i&&_(e),t=!1,r()}}}function pt(n){let e,l,t,r;return{c(){e=k("img"),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0}),this.h()},h(){U(e.src,l=n[7].get(n[37]).thumb)||c(e,"src",l),c(e,"alt","")},m(i,s){y(i,e,s),t||(r=S(e,"error",n[19]),t=!0)},p(i,s){s[0]&640&&!U(e.src,l=i[7].get(i[37]).thumb)&&c(e,"src",l)},d(i){i&&_(e),t=!1,r()}}}function Fe(n){let e=!n[8].includes(n[37])&&n[7].get(n[37]).pm_issued&&n[7].get(n[37]),l,t=e&&Ge(n);return{c(){t&&t.c(),l=q()},l(r){t&&t.l(r),l=q()},m(r,i){t&&t.m(r,i),y(r,l,i)},p(r,i){i[0]&896&&(e=!r[8].includes(r[37])&&r[7].get(r[37]).pm_issued&&r[7].get(r[37])),e?t?t.p(r,i):(t=Ge(r),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(r){r&&_(l),t&&t.d(r)}}}function gt(n){let e,l="This user doesn't have any Plebeian Market badge yet.";return{c(){e=k("span"),e.textContent=l},l(t){e=E(t,"SPAN",{"data-svelte-h":!0}),J(e)!=="svelte-1wbvz9g"&&(e.textContent=l)},m(t,r){y(t,e,r)},p:he,d(t){t&&_(e)}}}function ht(n){let e;function l(i,s){return i[4]?vt:bt}let t=l(n),r=t(n);return{c(){r.c(),e=q()},l(i){r.l(i),e=q()},m(i,s){r.m(i,s),y(i,e,s)},p(i,s){t!==(t=l(i))&&(r.d(1),r=t(i),r&&(r.c(),r.m(e.parentNode,e)))},d(i){i&&_(e),r.d(i)}}}function bt(n){let e,l,t="here",r;return{c(){e=W("You don't have Plebeian Market badges yet. Learn how to get one "),l=k("a"),l.textContent=t,r=W("."),this.h()},l(i){e=Q(i,"You don't have Plebeian Market badges yet. Learn how to get one "),l=E(i,"A",{href:!0,target:!0,class:!0,"data-tip":!0,"data-svelte-h":!0}),J(l)!=="svelte-1fe9yin"&&(l.textContent=t),r=Q(i,"."),this.h()},h(){c(l,"href","/faq?question=howToGetPMBadge"),c(l,"target","_blank"),c(l,"class","lg:tooltip underline"),c(l,"data-tip","Click to read: How do I get a Plebeian Market badge?")},m(i,s){y(i,e,s),y(i,l,s),y(i,r,s)},d(i){i&&(_(e),_(l),_(r))}}}function vt(n){let e,l,t="here",r;return{c(){e=W("Learn how to get more PM badges to show in your profile "),l=k("a"),l.textContent=t,r=W("."),this.h()},l(i){e=Q(i,"Learn how to get more PM badges to show in your profile "),l=E(i,"A",{href:!0,target:!0,class:!0,"data-tip":!0,"data-svelte-h":!0}),J(l)!=="svelte-1fe9yin"&&(l.textContent=t),r=Q(i,"."),this.h()},h(){c(l,"href","/faq?question=howToGetPMBadge"),c(l,"target","_blank"),c(l,"class","lg:tooltip underline"),c(l,"data-tip","Click to read: How do I get a Plebeian Market badge?")},m(i,s){y(i,e,s),y(i,l,s),y(i,r,s)},d(i){i&&(_(e),_(l),_(r))}}}function Ve(n){let e,l="Other Nostr badges",t,r,i,s=te(n[8]),d=[];for(let o=0;o<s.length;o+=1)d[o]=Ue(Ie(n,s,o));let f=n[0].pubkey===n[12]&&qe(n);return{c(){e=k("p"),e.textContent=l,t=F();for(let o=0;o<d.length;o+=1)d[o].c();r=F(),f&&f.c(),i=q(),this.h()},l(o){e=E(o,"P",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-zhifmx"&&(e.textContent=l),t=V(o);for(let u=0;u<d.length;u+=1)d[u].l(o);r=V(o),f&&f.l(o),i=q(),this.h()},h(){c(e,"class","mb-1 font-bold text-xl")},m(o,u){y(o,e,u),y(o,t,u);for(let I=0;I<d.length;I+=1)d[I]&&d[I].m(o,u);y(o,r,u),f&&f.m(o,u),y(o,i,u)},p(o,u){if(u[0]&450){s=te(o[8]);let I;for(I=0;I<s.length;I+=1){const m=Ie(o,s,I);d[I]?d[I].p(m,u):(d[I]=Ue(m),d[I].c(),d[I].m(r.parentNode,r))}for(;I<d.length;I+=1)d[I].d(1);d.length=s.length}o[0].pubkey===o[12]?f?f.p(o,u):(f=qe(o),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null)},d(o){o&&(_(e),_(t),_(r),_(i)),be(d,o),f&&f.d(o)}}}function je(n){let e,l,t,r,i,s,d;function f(m,p){return p[0]&384&&(t=null),t==null&&(t=!!(m[7].get(m[37]).thumb&&/\.(gif|jpg|jpeg|png|webp)$/i.test(m[7].get(m[37]).thumb))),t?Et:kt}let o=f(n,[-1,-1]),u=o(n);function I(){return n[24](n[37])}return{c(){e=k("div"),l=k("figure"),u.c(),r=F(),this.h()},l(m){e=E(m,"DIV",{class:!0,"data-tip":!0});var p=G(e);l=E(p,"FIGURE",{class:!0});var h=G(l);u.l(h),h.forEach(_),r=V(p),p.forEach(_),this.h()},h(){c(l,"class","h-14 w-14 mr-2 md:mr-4 avatar mask mask-squircle cursor-pointer"),c(e,"class","tooltip tooltip-accent"),c(e,"data-tip",i=n[7].get(n[37]).name)},m(m,p){y(m,e,p),w(e,l),u.m(l,null),w(e,r),s||(d=S(e,"click",I),s=!0)},p(m,p){n=m,o===(o=f(n,p))&&u?u.p(n,p):(u.d(1),u=o(n),u&&(u.c(),u.m(l,null))),p[0]&384&&i!==(i=n[7].get(n[37]).name)&&c(e,"data-tip",i)},d(m){m&&_(e),u.d(),s=!1,d()}}}function kt(n){let e,l,t,r;return{c(){e=k("img"),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0}),this.h()},h(){U(e.src,l=n[7].get(n[37]).image??Y)||c(e,"src",l),c(e,"alt","")},m(i,s){y(i,e,s),t||(r=S(e,"error",n[23]),t=!0)},p(i,s){s[0]&384&&!U(e.src,l=i[7].get(i[37]).image??Y)&&c(e,"src",l)},d(i){i&&_(e),t=!1,r()}}}function Et(n){let e,l,t,r;return{c(){e=k("img"),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0}),this.h()},h(){U(e.src,l=n[7].get(n[37]).thumb)||c(e,"src",l),c(e,"alt","")},m(i,s){y(i,e,s),t||(r=S(e,"error",n[22]),t=!0)},p(i,s){s[0]&384&&!U(e.src,l=i[7].get(i[37]).thumb)&&c(e,"src",l)},d(i){i&&_(e),t=!1,r()}}}function Ue(n){let e=n[7].get(n[37])&&!n[7].get(n[37]).pm_issued,l,t=e&&je(n);return{c(){t&&t.c(),l=q()},l(r){t&&t.l(r),l=q()},m(r,i){t&&t.m(r,i),y(r,l,i)},p(r,i){i[0]&384&&(e=r[7].get(r[37])&&!r[7].get(r[37]).pm_issued),e?t?t.p(r,i):(t=je(r),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(r){r&&_(l),t&&t.d(r)}}}function qe(n){let e,l=te(n[9]),t=[];for(let r=0;r<l.length;r+=1)t[r]=Oe(Ee(n,l,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=q()},l(r){for(let i=0;i<t.length;i+=1)t[i].l(r);e=q()},m(r,i){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(r,i);y(r,e,i)},p(r,i){if(i[0]&962){l=te(r[9]);let s;for(s=0;s<l.length;s+=1){const d=Ee(r,l,s);t[s]?t[s].p(d,i):(t[s]=Oe(d),t[s].c(),t[s].m(e.parentNode,e))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(r){r&&_(e),be(t,r)}}}function He(n){let e,l,t,r,i,s,d;function f(m,p){return p[0]&640&&(t=null),t==null&&(t=!!(m[7].get(m[37]).thumb&&/\.(gif|jpg|jpeg|png|webp)$/i.test(m[7].get(m[37]).thumb))),t?wt:It}let o=f(n,[-1,-1]),u=o(n);function I(){return n[27](n[37])}return{c(){e=k("div"),l=k("figure"),u.c(),r=F(),this.h()},l(m){e=E(m,"DIV",{class:!0,"data-tip":!0});var p=G(e);l=E(p,"FIGURE",{class:!0});var h=G(l);u.l(h),h.forEach(_),r=V(p),p.forEach(_),this.h()},h(){c(l,"class","h-14 w-14 mr-2 md:mr-4 avatar mask mask-squircle cursor-pointer opacity-40 hover:opacity-80"),c(e,"class","tooltip tooltip-accent"),c(e,"data-tip",i="Unaccepted badge: "+n[7].get(n[37]).name)},m(m,p){y(m,e,p),w(e,l),u.m(l,null),w(e,r),s||(d=S(e,"click",I),s=!0)},p(m,p){n=m,o===(o=f(n,p))&&u?u.p(n,p):(u.d(1),u=o(n),u&&(u.c(),u.m(l,null))),p[0]&640&&i!==(i="Unaccepted badge: "+n[7].get(n[37]).name)&&c(e,"data-tip",i)},d(m){m&&_(e),u.d(),s=!1,d()}}}function It(n){let e,l,t,r;return{c(){e=k("img"),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0}),this.h()},h(){U(e.src,l=n[7].get(n[37]).image??Y)||c(e,"src",l),c(e,"alt","")},m(i,s){y(i,e,s),t||(r=S(e,"error",n[26]),t=!0)},p(i,s){s[0]&640&&!U(e.src,l=i[7].get(i[37]).image??Y)&&c(e,"src",l)},d(i){i&&_(e),t=!1,r()}}}function wt(n){let e,l,t,r;return{c(){e=k("img"),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0}),this.h()},h(){U(e.src,l=n[7].get(n[37]).thumb)||c(e,"src",l),c(e,"alt","")},m(i,s){y(i,e,s),t||(r=S(e,"error",n[25]),t=!0)},p(i,s){s[0]&640&&!U(e.src,l=i[7].get(i[37]).thumb)&&c(e,"src",l)},d(i){i&&_(e),t=!1,r()}}}function Oe(n){let e=!n[8].includes(n[37])&&!n[7].get(n[37]).pm_issued&&n[7].get(n[37]),l,t=e&&He(n);return{c(){t&&t.c(),l=q()},l(r){t&&t.l(r),l=q()},m(r,i){t&&t.m(r,i),y(r,l,i)},p(r,i){i[0]&896&&(e=!r[8].includes(r[37])&&!r[7].get(r[37]).pm_issued&&r[7].get(r[37])),e?t?t.p(r,i):(t=He(r),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(r){r&&_(l),t&&t.d(r)}}}function Se(n){let e,l,t,r,i,s,d,f,o,u,I,m,p,h,M;e=new lt({props:{merchantPubkey:n[0].pubkey}}),t=new ut({props:{badgeInfo:n[6]?n[7].get(n[6]):null,profileBadgesLastEvent:n[5],onImgError:n[1],myBadge:n[0].pubkey===n[12]}});function D(a){n[28](a)}function R(a){n[29](a)}function H(a){n[30](a)}function N(a){n[31](a)}function A(a){n[32](a)}function L(a){n[33](a)}function g(a){n[34](a)}function B(a){n[35](a)}function K(a){n[36](a)}let T={userPubkey:n[0].pubkey};return n[11]!==void 0&&(T.profile=n[11]),n[10]!==void 0&&(T.profileFinishedLoading=n[10]),n[9]!==void 0&&(T.badgesAwarded=n[9]),n[8]!==void 0&&(T.badgesAccepted=n[8]),n[7]!==void 0&&(T.badgeDefinitions=n[7]),n[5]!==void 0&&(T.profileBadgesLastEvent=n[5]),n[4]!==void 0&&(T.pm_badges=n[4]),n[3]!==void 0&&(T.other_badges=n[3]),n[2]!==void 0&&(T.externalIdentities=n[2]),i=new it({props:T}),Z.push(()=>x(i,"profile",D)),Z.push(()=>x(i,"profileFinishedLoading",R)),Z.push(()=>x(i,"badgesAwarded",H)),Z.push(()=>x(i,"badgesAccepted",N)),Z.push(()=>x(i,"badgeDefinitions",A)),Z.push(()=>x(i,"profileBadgesLastEvent",L)),Z.push(()=>x(i,"pm_badges",g)),Z.push(()=>x(i,"other_badges",B)),Z.push(()=>x(i,"externalIdentities",K)),{c(){ne(e.$$.fragment),l=F(),ne(t.$$.fragment),r=F(),ne(i.$$.fragment)},l(a){se(e.$$.fragment,a),l=V(a),se(t.$$.fragment,a),r=V(a),se(i.$$.fragment,a)},m(a,b){oe(e,a,b),y(a,l,b),oe(t,a,b),y(a,r,b),oe(i,a,b),M=!0},p(a,b){const j={};b[0]&1&&(j.merchantPubkey=a[0].pubkey),e.$set(j);const P={};b[0]&192&&(P.badgeInfo=a[6]?a[7].get(a[6]):null),b[0]&32&&(P.profileBadgesLastEvent=a[5]),b[0]&4097&&(P.myBadge=a[0].pubkey===a[12]),t.$set(P);const C={};b[0]&1&&(C.userPubkey=a[0].pubkey),!s&&b[0]&2048&&(s=!0,C.profile=a[11],$(()=>s=!1)),!d&&b[0]&1024&&(d=!0,C.profileFinishedLoading=a[10],$(()=>d=!1)),!f&&b[0]&512&&(f=!0,C.badgesAwarded=a[9],$(()=>f=!1)),!o&&b[0]&256&&(o=!0,C.badgesAccepted=a[8],$(()=>o=!1)),!u&&b[0]&128&&(u=!0,C.badgeDefinitions=a[7],$(()=>u=!1)),!I&&b[0]&32&&(I=!0,C.profileBadgesLastEvent=a[5],$(()=>I=!1)),!m&&b[0]&16&&(m=!0,C.pm_badges=a[4],$(()=>m=!1)),!p&&b[0]&8&&(p=!0,C.other_badges=a[3],$(()=>p=!1)),!h&&b[0]&4&&(h=!0,C.externalIdentities=a[2],$(()=>h=!1)),i.$set(C)},i(a){M||(O(e.$$.fragment,a),O(t.$$.fragment,a),O(i.$$.fragment,a),M=!0)},o(a){z(e.$$.fragment,a),z(t.$$.fragment,a),z(i.$$.fragment,a),M=!1},d(a){a&&(_(l),_(r)),ae(e,a),ae(t,a),ae(i,a)}}}function yt(n){let e,l,t,r,i="Plebeian Market badges",s,d,f,o,u,I=n[0].pubkey&&!n[0].pubkey.startsWith("npub"),m,p,h=n[11]&&Me(n),M=n[11]&&n[2].length&&Ce(n),D=n[4]&&De(n);function R(g,B){if(g[0].pubkey===g[12])return ht;if(!g[4])return gt}let H=R(n),N=H&&H(n),A=n[3]&&Ve(n),L=I&&Se(n);return{c(){h&&h.c(),e=F(),M&&M.c(),l=F(),t=k("div"),r=k("p"),r.textContent=i,s=F(),D&&D.c(),d=F(),f=k("div"),N&&N.c(),o=F(),A&&A.c(),u=F(),L&&L.c(),m=q(),this.h()},l(g){h&&h.l(g),e=V(g),M&&M.l(g),l=V(g),t=E(g,"DIV",{class:!0});var B=G(t);r=E(B,"P",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-4lw9bn"&&(r.textContent=i),s=V(B),D&&D.l(B),d=V(B),f=E(B,"DIV",{class:!0});var K=G(f);N&&N.l(K),K.forEach(_),o=V(B),A&&A.l(B),B.forEach(_),u=V(g),L&&L.l(g),m=q(),this.h()},h(){c(r,"class","mb-1 font-bold text-xl"),c(f,"class","mt-1 mb-8 text-lg"),c(t,"class","mt-1 pb-8 md:pb-10")},m(g,B){h&&h.m(g,B),y(g,e,B),M&&M.m(g,B),y(g,l,B),y(g,t,B),w(t,r),w(t,s),D&&D.m(t,null),w(t,d),w(t,f),N&&N.m(f,null),w(t,o),A&&A.m(t,null),y(g,u,B),L&&L.m(g,B),y(g,m,B),p=!0},p(g,B){g[11]?h?(h.p(g,B),B[0]&2048&&O(h,1)):(h=Me(g),h.c(),O(h,1),h.m(e.parentNode,e)):h&&(ge(),z(h,1,1,()=>{h=null}),pe()),g[11]&&g[2].length?M?(M.p(g,B),B[0]&2052&&O(M,1)):(M=Ce(g),M.c(),O(M,1),M.m(l.parentNode,l)):M&&(ge(),z(M,1,1,()=>{M=null}),pe()),g[4]?D?D.p(g,B):(D=De(g),D.c(),D.m(t,d)):D&&(D.d(1),D=null),H===(H=R(g))&&N?N.p(g,B):(N&&N.d(1),N=H&&H(g),N&&(N.c(),N.m(f,null))),g[3]?A?A.p(g,B):(A=Ve(g),A.c(),A.m(t,null)):A&&(A.d(1),A=null),B[0]&1&&(I=g[0].pubkey&&!g[0].pubkey.startsWith("npub")),I?L?(L.p(g,B),B[0]&1&&O(L,1)):(L=Se(g),L.c(),O(L,1),L.m(m.parentNode,m)):L&&(ge(),z(L,1,1,()=>{L=null}),pe())},i(g){p||(O(h),O(M),O(L),p=!0)},o(g){z(h),z(M),z(L),p=!1},d(g){g&&(_(e),_(l),_(t),_(u),_(m)),h&&h.d(g),M&&M.d(g),D&&D.d(),N&&N.d(),A&&A.d(),L&&L.d(g)}}}function Mt(n,e,l){let t,r,i,s,d,f,o,u,I,m,p;Qe(n,et,v=>l(12,p=v));let{data:h}=e;function M(v){v.onerror="",v.src=Y}Xe(async()=>{h&&h.pubkey&&h.pubkey.startsWith("npub")&&l(0,h.pubkey=xe(h.pubkey),h)});const D=v=>M(v.srcElement),R=v=>M(v.srcElement),H=()=>{navigator.clipboard.writeText(ue.npubEncode(t.pubkey)),We.set("Public key copied to clipboard.")},N=v=>M(v.srcElement),A=v=>M(v.srcElement),L=v=>{document.getElementById("badgeModalImg")&&(document.getElementById("badgeModalImg").style.visibility="hidden"),l(6,f=v),window.badge_modal.showModal()},g=v=>M(v.srcElement),B=v=>M(v.srcElement),K=v=>{document.getElementById("badgeModalImg")&&(document.getElementById("badgeModalImg").style.visibility="hidden"),l(6,f=v),window.badge_modal.showModal()},T=v=>M(v.srcElement),a=v=>M(v.srcElement),b=v=>{document.getElementById("badgeModalImg")&&(document.getElementById("badgeModalImg").style.visibility="hidden"),l(6,f=v),window.badge_modal.showModal()},j=v=>M(v.srcElement),P=v=>M(v.srcElement),C=v=>{document.getElementById("badgeModalImg")&&(document.getElementById("badgeModalImg").style.visibility="hidden"),l(6,f=v),window.badge_modal.showModal()};function X(v){t=v,l(11,t)}function le(v){r=v,l(10,r)}function ie(v){i=v,l(9,i)}function de(v){s=v,l(8,s)}function ee(v){d=v,l(7,d)}function re(v){o=v,l(5,o)}function ce(v){u=v,l(4,u)}function _e(v){I=v,l(3,I)}function Je(v){m=v,l(2,m)}return n.$$set=v=>{"data"in v&&l(0,h=v.data)},l(11,t=null),l(10,r=!1),l(9,i=[]),l(8,s=[]),l(7,d=new Map),l(6,f=null),l(5,o=null),l(4,u=!1),l(3,I=!1),l(2,m=[]),[h,M,m,I,u,o,f,d,s,i,r,t,p,D,R,H,N,A,L,g,B,K,T,a,b,j,P,C,X,le,ie,de,ee,re,ce,_e,Je]}class Ut extends Ke{constructor(e){super(),Ye(this,e,Mt,yt,Re,{data:0,onImgError:1},null,[-1,-1])}get onImgError(){return this.$$.ctx[1]}}export{Ut as component,jt as universal};
